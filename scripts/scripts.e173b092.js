"use strict";angular.module("chesireApp",["ngRoute","LocalStorageModule","draganddrop"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"scripts/app/main.html",controller:"MainController",controllerAs:"vm"}).otherwise({redirectTo:"/"})}]).config(["localStorageServiceProvider",function(a){a.setPrefix("chesire")}]),function(){function a(a,b,c,d,e,f){function g(){a.init(),b.getSongs(),c.init(),d.getSynths(),f.init()}function h(){e.notifyMenuOpen("no-menu")}var i=this;i.closeAllPopopovers=h,g()}angular.module("chesireApp").controller("MainController",a),a.$inject=["ScaleOptions","SongStore","SynthOptions","SynthStore","UIService","soundMuter"]}(),angular.module("chesireApp").service("Colorpalette",function(){return{BACKGROUND:"#1a1b1d",PARTICLES:"#BA8E3D",PARTICLES_NOTE:"#D65B27",POINTER:"#071255",PARTICLES_BACK:"#000000",BOUNDARIES:"#1a1b1d",HAND:"#660000",hex:{BACKGROUND:1710877,PARTICLES:12226109,PARTICLES_NOTE:14048039,POINTER:463445,PARTICLES_BACK:0,BOUNDARIES:77,HAND:6684672}}}),angular.module("chesireApp").factory("LastUsedSettingsStore",["$q","localStorageService","SynthoptionsModel",function(a,b,c){var d="0.1",e=function(){var c=a.defer();return c.resolve(b.get("lastUsedSong")),c.promise},f=function(a){b.set("lastUsedSong",a)},g=function(){var e=a.defer(),f=b.get("lastUsedSynth");f&&f.version===d||(f=null);var g=c.create(f);return e.resolve(g),e.promise},h=function(a){a.version=d,b.set("lastUsedSynth",a)};return{getLastUsedSong:e,notifyLastUsedSongChanged:f,getLastUsedSynth:g,notifyLastUsedSynthChanged:h}}]),angular.module("chesireApp").factory("IdGenerator",function(){var a=(new Date).getTime(),b=function(){return a+=1};return{getUniqueId:b}}),angular.module("chesireApp").filter("frequencyToPercentage",["NoteList",function(a){var b=function(a){return Math.log(a)/Math.LN2};return function(c){var d=b(_.first(a).freq),e=b(_.last(a).freq),f=b(c);return 100*(f-d)/(e-d)}}]),angular.module("chesireApp").factory("UIService",function(){var a=[],b=function(b){angular.forEach(a,function(a){a(b)})},c=function(b){a.push(b)},d=function(b){a=_.without(a,b)};return{notifyMenuOpen:b,subscribeToMenuOpening:c,unsubscribeToMenuOpening:d}}),function(){function a(a,b){function c(a){this.init(a),this.$$isSynth=!0}function d(a){return new c(a)}var e={create:d},f={outputMode:"audio",name:"Default synth"};return c.prototype.init=function(c){c=c||{},angular.extend(this,f,c),this.midi=a.create(this.midi),this.audio=b.create(this.audio)},c.prototype.getActiveComponents=function(){return this.outputMode&&this[this.outputMode]?this[this.outputMode].components:null},c.prototype.getActiveControls=function(){return this.outputMode&&this[this.outputMode]?this[this.outputMode].getControls():null},c.prototype.getOscillators=function(){return this.audio.oscillators},c.prototype.isMidiOutput=function(){return"midi"===this.outputMode},c.prototype.isAudioOutput=function(){return"audio"===this.outputMode},c.prototype.isCustomOscillator=function(){return"custom"===this.getOscillatorComponent().oscillatorType},c.prototype.removeControl=function(a){if(!this.outputMode||!this[this.outputMode])return null;var b=this[this.outputMode].controls;b=_.without(b,a)},e}angular.module("chesireApp").factory("SynthoptionsModel",a),a.$inject=["SynthoptionsMidiModel","SynthoptionsAudioModel"]}(),function(){function a(a,b,c,d,e,f,g,h){function i(a){this.init(a)}function j(a){var b=[];if(b=b.concat(n(a)),a.components&&a.components.length)for(var c=0;c<a.components.length;c++)a.components[c].enabled&&(b=b.concat(n(a.components[c])));return b}function k(a,b){var c=l(a,b);c>-1&&b.splice(c,1)}function l(a,b){return b?_.findIndex(b,function(b){return b.uniqueId===a.uniqueId}):-1}function m(a){return new i(a)}function n(a){var b=[];return angular.forEach(a.controls,function(a){a.enabled&&b.push(a)}),b}function o(a){a&&!a.uniqueId&&(a.uniqueId=h.getUniqueId())}var p={create:m};return i.prototype.init=function(b){b=angular.extend({},a.get(),b||{}),angular.extend(this,a.get(),b)},i.prototype.getControls=function(){var a=this._getControlsFromComponents();return a=a.concat(this._getControlsFromSoundSources())},i.prototype.addOscillator=function(){var a=angular.copy(b.get());return o(a),this.oscillators.push(a),a},i.prototype.removeOscillator=function(a){var b=_.findIndex(this.oscillators,function(b){return a.uniqueId===b.uniqueId});b>-1&&this.oscillators.splice(b,1)},i.prototype.removeNoise=function(a){var b=_.findIndex(this.noises,function(b){return a.uniqueId===b.uniqueId});b>-1&&this.noises.splice(b,1)},i.prototype.addNoise=function(){var a=angular.copy(c.get());return o(a),this.noises.push(a),a},i.prototype.addComponent=function(a){this.components=this.components||[];var b;switch(a.value){case"eq":b=angular.copy(g.get());break;case"tremolo":b=angular.copy(e.get());break;case"delay":b=angular.copy(f.get());break;case"distortion":b=angular.copy(d.get())}return b?(o(b),this.components.push(b),b):void 0},i.prototype.moveComponentAfterComponent=function(a,b){if(a.uniqueId!==b.uniqueId){this.removeComponent(a);var c=l(b,this.components);this.components.splice(c+1,0,a)}},i.prototype.moveComponentToBeginning=function(a){this.removeComponent(a),this.components.splice(0,0,a)},i.prototype.moveComponentAfterSoundSource=function(a,b){this.removeComponent(a),b.components=b.components||[],b.components.splice(0,0,a)},i.prototype.moveComponentAfterSoundSourceComponent=function(a,b,c){this.removeComponent(a),b.components=b.components||[];var d=l(c,b.components);b.components.splice(d+1,0,a)},i.prototype.removeComponent=function(a){k(a,this.components);for(var b=0;b<this.noises.length;b++)k(a,this.noises[b].components);for(b=0;b<this.oscillators.length;b++)k(a,this.oscillators[b].components)},i.prototype._getControlsFromComponents=function(){for(var a=[],b=0;b<this.components.length;b++)this.components[b].enabled&&(a=a.concat(n(this.components[b])));return a},i.prototype._getControlsFromSoundSources=function(){for(var a=[],b=0;b<this.oscillators.length;b++)if(this.oscillators[b].enabled){a=a.concat(j(this.oscillators[b]));var c=this.oscillators[b].fm;c&&c.enabled&&(a=a.concat(n(c)))}for(b=0;b<this.noises.length;b++)this.noises[b].enabled&&(a=a.concat(j(this.noises[b])));return a},p}angular.module("chesireApp").factory("SynthoptionsAudioModel",a),a.$inject=["synthOptionsAudioDefault","oscillatorOptionsDefault","noiseOptionsDefault","distortionOptionsDefault","tremoloOptionsDefault","delayOptionsDefault","eqOptionsDefault","IdGenerator"]}(),function(){function a(){function a(a){this.init(a)}function b(b){return new a(b)}var c={create:b},d={midiControlMode:"soft",snapDistance:.35,transitionType:"volume",controls:{gain:{param:"y",responseFunction:{name:"linear",min:0,max:.9,inverse:!0}}}};return a.prototype.init=function(a){a=a||{},angular.extend(this,d,a)},a.prototype.getControls=function(){return this.controls},c}angular.module("chesireApp").factory("SynthoptionsMidiModel",a)}(),function(){function a(a,b){function c(a){this.init(a),this.$$isSong=!0}function d(a){return new c(a)}function e(a){var c=null;return a.chords&&a.chords.length&&(c={name:"Original part",chords:a.chords,index:0}),b.create(c)}var f={create:d},g=a;return c.prototype.init=function(a){a=a||{},angular.extend(this,g,a),this._createPartsIfNeeded(),this._decorateParts(),this.currentPart=this.currentPart||0},c.prototype.getCurrentPart=function(){return this.parts[this.currentPart]},c.prototype.setCurrentPart=function(a){return this.currentPart!==a.index?(this.currentPart=a.index,this.$isModified=!0,!0):!1},c.prototype.replaceCurrentPart=function(a){a.index=this.currentPart,this.parts[this.currentPart]=a,this.$isModified=!0},c.prototype.addPart=function(){var a=b.create();return a.index=this.parts.length,this.parts.push(a),this.$isModified=!0,a},c.prototype.setCurrentPartByIndex=function(a){0>a&&(a=0),a>=this.parts.length&&(a=this.parts.length-1),this.currentPart=a,this.$isModified=!0},c.prototype.movePart=function(a,b){if(a===b||a===b-1)return!1;var c=b>=this.parts.length,d=this.parts[a];return this.parts.splice(a,1),c?this.parts.push(d):this.parts.splice(b,0,d),this._updatePartsIndex(),this.$isModified=!0,!0},c.prototype.deletePart=function(a){return this.parts.length>1?(this.parts.splice(a.index,1),this._updatePartsIndex(),this.currentPart>=this.parts.length&&(this.currentPart=this.parts.length-1),this.$isModified=!0,!0):!1},c.prototype.duplicatePart=function(a){var c=b.create(angular.copy(a));return c.name+=" (copy)",this.parts.push(c),this._updatePartsIndex(),this.$isModified=!0,!0},c.prototype.removeChordInPart=function(a,b){return a.removeChordAtIndex(b),this.$isModified=!0,!0},c.prototype.addChordBefore=function(a,b){return a.addChordBefore(b),this.$isModified=!0,!0},c.prototype.addChordLast=function(a){return a.addChordLast(),this.$isModified=!0,!0},c.prototype.replaceChord=function(a,b,c){return a.replaceChord(b,c),this.$isModified=!0,!0},c.prototype._updatePartsIndex=function(){for(var a=0;a<this.parts.length;a++)this.parts[a].index=a},c.prototype._createPartsIfNeeded=function(){this.parts&&this.parts.length||(this.parts=[],this.parts.push(e(this))),this._oldChords=void 0,this.chords=void 0},c.prototype._decorateParts=function(){for(var a=0;a<this.parts.length;a++)this.parts[a]=b.create(this.parts[a])},f}angular.module("chesireApp").factory("SongModel",a),a.$inject=["DefaultScale","SongPartModel"]}(),function(){function a(a){function b(a){this.init(a),this.$$isSongPart=!0}function c(a){return new b(a)}function d(){return{name:void 0,notes:[]}}var e={create:c},f=a;return b.prototype.init=function(a){a=a||{},angular.extend(this,f,a)},b.prototype.removeChordAtIndex=function(a){this.chords.length>2?this.chords.splice(a,1):(this.chords[a].notes=[],this.chords[a].name=void 0)},b.prototype.getBiggerChordSize=function(){for(var a=0,b=0;b<this.chords.length;b++)this.chords[b].notes&&this.chords[b].notes.length>a&&(a=this.chords[b].notes.length);return a},b.prototype.addChordBefore=function(a){this.chords.splice(a,0,d())},b.prototype.addChordLast=function(){this.chords.push(d())},b.prototype.replaceChord=function(a,b){this.chords[a]=b},b.prototype.setPreferredSynth=function(a){this.preferredSynth=a.name},b.prototype.getPreferredSynth=function(){return this.preferredSynth},e}angular.module("chesireApp").factory("SongPartModel",a),a.$inject=["DefaultScale"]}(),function(){function a(a,b,c,d,e,f,g){function h(){return{snapDistance:.35,transitionType:"glissando",controls:{gain:{name:"Main volume",param:"y",responseFunction:{name:"linear",min:0,max:.9,inverse:!0}}},oscillators:[b.get(),b.get({enabled:!1,oscillatorType:a[2]}),b.get({enabled:!1,oscillatorType:a[3]})],noises:[c.get()],components:[e.get(),g.get(),d.get(),f.get()]}}var i={get:h};return i}angular.module("chesireApp").factory("synthOptionsAudioDefault",a),a.$inject=["availableOscillators","oscillatorOptionsDefault","noiseOptionsDefault","distortionOptionsDefault","tremoloOptionsDefault","delayOptionsDefault","eqOptionsDefault"]}(),function(){function a(a){function b(b){var c={gain:1,enabled:!0,name:"Oscillator",type:"oscillator",oscillatorType:a[1],realPeriodicTable:[0,.4,.4,1,1,1,.3,.7,.6,.5,.9,.8],imaginaryPeriodicTable:[0,0,0,0,0,0,0,0,0,0,0,0],controls:{gain:{name:"Oscillator Gain",param:"y",responseFunction:{name:"linear",min:0,max:.9,inverse:!0}}},fm:{enabled:!0,depth:.7,freq:3.5,controls:{depth:{name:"Oscillator FM depth",enabled:!0,param:"handDirectionY",responseFunction:{name:"linear",min:0,max:.9,inverse:!1}}},preModulator:{enabled:!0,depth:.3,freq:4}}};return c=angular.extend({},c,b||{}),angular.extend(c)}var c={get:b};return c}angular.module("chesireApp").factory("oscillatorOptionsDefault",a),a.$inject=["availableOscillators"]}(),function(){function a(){function a(a){var b={gain:1,enabled:!0,name:"Noise",type:"noise",noiseType:"white",controls:{gain:{name:"Noise gain",param:"y",responseFunction:{name:"linear",min:0,max:.9,inverse:!0}}}};return b=angular.extend({},b,a||{}),angular.extend(b)}var b={get:a};return b}angular.module("chesireApp").factory("noiseOptionsDefault",a)}(),function(){function a(){function a(a){var b={name:"Delay",type:"delay",enabled:!0,MIN_DELAY:.01,MAX_DELAY:3,minDelay:.2,maxDelay:.8,delay:.3,feedback:.1,cutoff:1e3,controls:{delay:{name:"Delay time",enabled:!0,param:"z",responseFunction:{name:"linear",min:0,max:1,inverse:!0}},feedback:{name:"Delay feedback",enabled:!1,param:"z",responseFunction:{name:"linear",min:0,max:1,inverse:!0}}}};return b=angular.extend({},b,a||{}),angular.extend(b)}var b={get:a};return b}angular.module("chesireApp").factory("delayOptionsDefault",a)}(),function(){function a(){function a(a){var b={name:"Distortion",type:"distortion",enabled:!0,MIN_AMOUNT:0,MAX_AMOUNT:100,amount:10,controls:{amount:{name:"Dist Amount",enabled:!0,param:"z",responseFunction:{name:"linear",min:0,max:1,inverse:!0}}}};return b=angular.extend({},b,a||{}),angular.extend(b)}var b={get:a};return b}angular.module("chesireApp").factory("distortionOptionsDefault",a)}(),function(){function a(a){function b(b){var c={name:"EQ",type:"equalizer",enabled:!0,eqType:a[0],DEFAULT_MIN_Q:1,DEFAULT_MAX_Q:50,minQ:1,maxQ:10,q:5,DEFAULT_MIN_FREQ:20,DEFAULT_MAX_FREQ:22e3,minFreq:20,maxFreq:22e3,freq:220,DEFAULT_MIN_GAIN:-40,DEFAULT_MAX_GAIN:40,minGain:-20,maxGain:20,gain:1,controls:{freq:{name:"EQ freq",enabled:!0,param:"z",responseFunction:{name:"linear",min:0,max:1,inverse:!0}},q:{name:"EQ Q",enabled:!0,param:"handDirectionY",responseFunction:{name:"linear",min:.1,max:.9}},gain:{name:"EQ gain",enabled:!0,param:"handDirectionY",responseFunction:{name:"linear",min:.1,max:.9}}}};return c=angular.extend({},c,b||{}),angular.extend(c)}var c={get:b};return c}angular.module("chesireApp").factory("eqOptionsDefault",a),a.$inject=["availableEqTypes"]}(),function(){function a(a){function b(b){var c={name:"Tremolo",type:"tremolo",oscillatorType:a[1],enabled:!1,DEFAULT_MIN_RATE:1,DEFAULT_MAX_RATE:10,minRate:1,maxRate:10,fixedRate:5,rate:3,depth:.2,controls:{rate:{name:"Tremolo rate",enabled:!0,param:"z",responseFunction:{name:"linear",min:0,max:1,inverse:!0}},depth:{name:"Tremolo depth",enabled:!0,param:"handDirectionY",responseFunction:{name:"linear",min:.1,max:.9}}}};return c=angular.extend({},c,b||{}),angular.extend(c)}var c={get:b};return c}angular.module("chesireApp").factory("tremoloOptionsDefault",a),a.$inject=["availableSimpleOscillators"]}(),angular.module("chesireApp").directive("selectBox",function(){return{templateUrl:"scripts/select-box/select-box.html",restrict:"E",scope:{value:"=",valueList:"=",attrToShow:"@",changeCallback:"&"},controller:"SelectBoxController",controllerAs:"vm",bindToController:!0}}),function(){function a(a){function b(){e.listExpanded=!1}function c(){e.listExpanded=!e.listExpanded}function d(b){e.value=b,e.listExpanded=!1,angular.isFunction(e.changeCallback)&&a(e.changeCallback)}var e=this;e.toggleList=c,e.selectValue=d,b()}angular.module("chesireApp").controller("SelectBoxController",a),a.$inject=["$timeout"]}(),function(){function a(a){function b(b,c){function d(){b.$on("$destroy",e),h=angular.element(c[0].querySelector(".js-file-input")),h.on("change",f)}function e(){h.off("change",f)}function f(){h[0].files&&h[0].files[0]&&i.readAsText(h[0].files[0])}function g(){var c=angular.fromJson(i.result);b.vm.onLoad&&angular.isFunction(b.vm.onLoad)&&a(function(){b.vm.onLoad(c)})}var h,i=new FileReader;i.onload=g,d()}return{restrict:"E",scope:{onLoad:"="},templateUrl:"scripts/file-loader/file-loader.tpl.html",controller:"FileLoaderController",controllerAs:"vm",bindToController:!0,link:b,replace:!0}}angular.module("chesireApp").directive("fileLoader",a),a.$inject=["$timeout"]}(),function(){function a(){}angular.module("chesireApp").controller("FileLoaderController",a)}(),function(){function a(){return{templateUrl:"scripts/custom-checkbox/custom-checkbox.html",restrict:"E",replace:!0,scope:{value:"=",changeCallback:"&"}}}angular.module("chesireApp").directive("customCheckbox",a)}(),angular.module("chesireApp").factory("Leapmotion",["$rootScope","closeToChordControl",function(a,b){var c={fingers:0,hands:0,iterations:0,connected:!1},d={id:!1,frame:null},e=50,f=500,g=150,h=1e3,i=0,j=.5,k=-.3,l=.5,m=-.5,n=-1,o=.45,p=2.6,q=-.9,r=0,s=[],t=[],u=5,v=null,w=function(){if(!Leap)throw"Error, LeapMotion library was not loaded";var a=new Leap.Controller;return a.on("animationFrame",x),a.on("deviceFrame",y),a.on("connect",B),a.on("deviceStreaming/deviceStreaming",C),a.on("deviceStreaming/deviceStopped",D),a.connect(),Leap},x=function(a){c.iterations++,c.fingers=a.fingers.length,c.hands=a.hands.length,d.frame=a,d.id=a.id,z(d)},y=function(a){var b={};b.fingers=a.fingers.length,b.hands=a.hands.length,b.frame=a,b.id=a.id,A(b)},z=function(a){angular.forEach(s,function(b){b(a)})},A=function(a){angular.forEach(t,function(b){b(a)})},B=function(){c.connected=!0,a.$apply()},C=function(){c.connected=!0,a.$apply()},D=function(){c.connected=!1,a.$apply()},E=function(){return c},F=function(){return d},G=function(a,c){var d=c[0].palmPosition,g=L(d,a),h=c[0].palmVelocity,k=Math.sqrt(h[0]*h[0]+h[1]*h[1]+h[2]*h[2]);return g.handVelocity=T((k-e)/(f-e)),g.handDirectionX=T((c[0].direction[0]-i)/(j-i)),g.handDirectionY=O(c[0]),g.handDirectionZ=T((c[0].direction[2]-m)/(n-m)),g.fingerVelocity=R(c[0]),g.handAperture=M(c[0]),g.fingerDirectionY=N(c[0]),g.closeToChord=b.getValue(c[0],g),g.closeToChordY=g.closeToChord*g.y,g.closeToChordYInverse=g.closeToChord*(1-g.y),g.fingersPulsationInfo=H(c[0]),g.fingersDirectionInfo=I(c[0]),g},H=function(a){var b={pinky:K(a.pinky,a),indexFinger:K(a.indexFinger,a),middleFinger:K(a.middleFinger,a),thumb:K(a.thumb,a),ringFinger:K(a.ringFinger,a)};return b},I=function(a){var b={pinky:J(a.pinky,a),indexFinger:J(a.indexFinger,a),middleFinger:J(a.middleFinger,a),thumb:J(a.thumb,a),ringFinger:J(a.ringFinger,a)};return b},J=function(a){return{xDirection:a.direction[0],yDirection:a.direction[1],zDirection:a.direction[2]}},K=function(a){return{xVelocity:a.tipVelocity[0],yVelocity:a.tipVelocity[1],zVelocity:a.tipVelocity[2]}},L=function(a,b){var c={};return c.x=T((a[0]-(b.interactionBox.center[0]-b.interactionBox.size[0]/2))/b.interactionBox.size[0]),c.y=T((a[1]-(b.interactionBox.center[1]-b.interactionBox.size[1]/2))/b.interactionBox.size[1]),c.z=T((a[2]-(b.interactionBox.center[2]-b.interactionBox.size[2]/2))/b.interactionBox.size[2]),c},M=function(a){var b=0;if(a.fingers.length>2){for(var c=0;c<a.fingers.length;c++)for(var d=0;d<a.fingers.length;d++)c!==d&&(b+=Q(a.fingers[c],a.fingers[d]));b/=a.fingers.length,b=T((b-o)/(p-o))}return P(b)},N=function(a){if(a.fingers.length){for(var b=0,c=0,d=0;d<a.fingers.length;d++)0!==a.fingers[d].type&&(b+=a.fingers[d].direction[1],c++);if(c)return b/=c,1-T((b-q)/(r-q))}return O()},O=function(a){return 1-T((a.direction[1]-k)/(l-k))},P=function(a){v=v||Array.apply(null,new Array(u)).map(Number.prototype.valueOf,0),v.pop(),v.splice(0,0,a);for(var b=0,c=0;u>c;c++)b+=v[c];return b/u},Q=function(a,b){var c=a.direction[0]*b.direction[0]+a.direction[2]*b.direction[2],d=Math.sqrt(a.direction[0]*a.direction[0]+a.direction[2]*a.direction[2]),e=Math.sqrt(b.direction[0]*b.direction[0]+b.direction[2]*b.direction[2]),f=c/(d*e);return Math.abs(Math.acos(f))},R=function(a){if(a.fingers.length){for(var b=0,c=0;c<a.fingers.length;c++)b+=S(a.fingers[c],a);return T((b-g)/(h-g))}return 0},S=function(a,b){var c=a.tipVelocity[0]-b.palmVelocity[0],d=a.tipVelocity[1]-b.palmVelocity[1],e=a.tipVelocity[2]-b.palmVelocity[2];return Math.sqrt(c*c+d*d+e*e)},T=function(a){return 0>a?0:a>1?1:a},U=function(a){s.push(a)},V=function(a){s=_.without(s,a)},W=function(a){t.push(a)},X=function(a){t=_.without(t,a)},Y=w();return{leapObject:Y,getStats:E,getFrameInfo:F,getRelativePositions:G,subscribeToFrameChange:U,unsubscribeToFrameChange:V,getRelativePositionXYZ:L,subscribeToFrameDeviceChange:W,unsubscribeToFrameDeviceChange:X}}]),angular.module("chesireApp").service("Three",function(){if(!THREE)throw"Error, Three.js library was not loaded";return THREE}),angular.module("chesireApp").factory("Audiocontext",function(){var a=window.AudioContext||window.webkitAudioContext;if(!a)throw"Error, AudioContext not available in your browser";return new a}),angular.module("chesireApp").service("requestanimationframe",function(){return window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame}),function(){function a(a,b,c,d){function e(){j().then(f)}function f(a){q=a;var c=g(a);c&&d.tryToUseSynth(c),p(a),b.notifyLastUsedSongChanged(a)}function g(a){return a&&a.getCurrentPart()&&a.getCurrentPart().getPreferredSynth()?a.getCurrentPart().getPreferredSynth():null}function h(a){q.replaceCurrentPart(a),p(q),b.notifyLastUsedSongChanged(q)}function i(a){f(c.create(angular.copy(a)))}function j(){return s?s.promise:k()}function k(){return q?l():m()}function l(){var b=a.defer();return b.resolve(q),b.promise}function m(){return s=a.defer(),b.getLastUsedSong().then(function(a){q=c.create(a),s.resolve(q),s=null}),s.promise}function n(a){r.push(a),a(q)}function o(a){r=_.without(r,a)}function p(a){angular.forEach(r,function(b){b(a)})}var q=null,r=[],s=null,t={init:e,setScaleOptions:f,setCurrentPart:h,setScaleOptionsFromPreset:i,getScaleOptions:j,subscribeToChangesInScaleOptions:n,unsubscribeToChangesInScaleOptions:o};return t}angular.module("chesireApp").factory("ScaleOptions",a),a.$inject=["$q","LastUsedSettingsStore","SongModel","SynthOptions"]}(),angular.module("chesireApp").factory("SongStore",["$q","localStorageService",function(a,b){var c=null,d=[],e=function(){var d=a.defer();return c=b.get("songs")||[],d.resolve(c),l(c),d.promise},f=function(d){var e=a.defer();if(d&&d.name&&d.parts&&d.parts.length){d.$isModified=!1;var f=b.get("songs");f=f?angular.fromJson(f):[];var g=i(d,f);g>-1?f[g]=d:f.push(d),b.set("songs",f),c=f,e.promise.then(l),e.resolve(f)}else e.reject("Error saving song, bad config");return e.promise},g=function(d){var e=a.defer(),f=b.get("songs"),g=h(d,f);return f=_.without(f,g),c=f,b.set("songs",f),e.promise.then(function(a){l(a,!0)}),e.resolve(f),e.promise},h=function(a,b){var c=i(a,b);return c>-1?b[c]:!1},i=function(a,b){for(var c=0;c<b.length;c++)if(b[c].name===a.name)return c;return-1},j=function(a){d.push(a),a(c)},k=function(a){d=_.without(d,a)},l=function(a,b){angular.forEach(d,function(c){c(a,b)})},m=function(a){for(var c={name:a},d=b.get("songs")||[];h(c,d);)c.name+=" (1)";return c.name};return{getSongs:e,saveSong:f,deleteSong:g,subscribeToChangeInAllSongs:j,unsubscribeToChangeInAllSongs:k,getUniqueName:m}}]),angular.module("chesireApp").controller("SoundgeneratorCtrl",["$log","$scope","$timeout","$q","Leapmotion","SynthClass","ScaleOptions","SynthOptions","CurrentSynth",function(a,b,c,d,e,f,g,h,i){function j(){h.unsubscribeToChangesInSynthOptions(q),g.unsubscribeToChangesInScaleOptions(p)}var k=null,l=null,m=new f;i.setCurrentSynth(m);var n=function(){var a=d.all([h.getSynthOptions(),g.getScaleOptions()]);a.then(o),b.$on("$destroy",j)},o=function(a){k=a[0],l=a[1],h.subscribeToChangesInSynthOptions(q),g.subscribeToChangesInScaleOptions(p),e.subscribeToFrameChange(r)},p=function(a){m.scaleChanged(a.getCurrentPart())},q=function(a){k=a,m.destroy(),m=new f(a,l),i.setCurrentSynth(m),k.isMidiOutput()&&m.disable()},r=function(a){if(!k.isMidiOutput()){var b=a.frame;if(b.hands.length){var c=e.getRelativePositions(b,b.hands);m.updateSound(b.hands[0],c)}else m.stopPlaying()}};n()}]),angular.module("chesireApp").directive("soundgenerator",function(){return{restrict:"E",templateUrl:"scripts/sound-generator/sound-generator.html",scope:{},controller:"SoundgeneratorCtrl"}}),function(){angular.module("chesireApp").constant("availableOscillators",["sawtooth","sine","square","triangle","custom"]).constant("availableSimpleOscillators",["sawtooth","sine","square","triangle"])}(),function(){angular.module("chesireApp").constant("availableComponents",[{name:"EQ",value:"eq"},{name:"Delay",value:"delay"},{name:"Tremolo",value:"tremolo"},{name:"Distortion",value:"distortion"}])}(),function(){angular.module("chesireApp").constant("availableEqTypes",[{name:"Low pass",id:"lowpass",usesGain:!1,usesQ:!0},{name:"High pass",id:"highpass",usesGain:!1,usesQ:!0},{name:"Band pass",id:"bandpass",usesGain:!1,usesQ:!0},{name:"Low shelf",id:"lowshelf",usesGain:!1,usesQ:!1},{name:"High shelf",id:"highshelf",usesGain:!0,usesQ:!1},{name:"Peaking",id:"peaking",usesGain:!0,usesQ:!0},{name:"Notch",id:"notch",usesGain:!0,usesQ:!0},{name:"All pass",id:"allpass",usesGain:!1,usesQ:!0}])}(),function(){function a(a,b,c,d,e){function f(c){function f(a,b){if(k(),a){var c=d.getNotesDefinition(a,b);l=[],m={};for(var f=0;f<c.length;f++){var h=new e(b);m[c[f].name]=f,l.push(h)}n&&g(n)}}function g(a){!a.connect&&a.getAudioNode&&(a=a.getAudioNode()),n=a;for(var b=0;b<l.length;b++)l[b].connect(a)}function h(a){for(var b,c,d,e=0;e<a.length;e++)d=a[e],b=l[m[d.name]],c=d.freqToPlay,b.setGain(d.gain),b.setFrequency(c),b.updateFM(a.fmInfo)}function i(){return l}function j(c,d){var e=a.defer();if(l[0]){var f=l[0].oscillator.frequency.value;l[0].oscillator.frequency.value=c.freq,l[0].gainNode.gain.value=.5,b(function(){l[0].oscillator.frequency.value=f,l[0].gainNode.gain.value=0,e.resolve()},d)}else e.resolve();return e.promise}function k(){for(var a=0;a<l.length;a++)l[a].destroy();l=[]}var l=[],m={},n=null,o={connectTo:g,updateNodes:h,destroy:k,init:f,getNodes:i,playNote:j};return f(void 0,c),o}return f}angular.module("chesireApp").factory("OscillatorCollection",a),a.$inject=["$q","$timeout","Audiocontext","MultiNotesHelper","OscillatorCollectionNode"]}(),function(){function a(a){function b(a){this.init(a)}return b.prototype={init:function(b){this.oscillator=a.createOscillator(),this.gainNode=a.createGain(),this.setGain(0),this.oscillator.connect(this.gainNode),this.oscillator.start(0),this._assignOscillatorType(b),this._createFMComponents(b)},connect:function(a){this._connectedTo=a,this.gainNode.connect(a)},setGain:function(a){this.gainNode.gain.value=a},setFrequency:function(a){a&&(this.oscillator.frequency.value=a,this._updateFMFrequency())},updateFM:function(a){a&&a.depth&&this.modulatorGain&&this.modulatorGain.gain.value!==a.depth&&(this.modulatorGain.gain.value=a.depth)},_updateFMFrequency:function(){this.modulatorOscillator&&this._fmFreqRatio&&(this.modulatorOscillator.frequency.value=this._fmFreqRatio*this.oscillator.frequency.value),this.preModulatorOscillator&&this._preFmFreqRatio&&(this.preModulatorOscillator.frequency.value=this._preFmFreqRatio*this.oscillator.frequency.value)},destroy:function(){this.oscillator.disconnect(this.gainNode),this._connectedTo&&(this.gainNode.disconnect(this._connectedTo),this._connectedTo=null)},_assignOscillatorType:function(a){var b=this._getOscillatorTypeFromOptions(a);"custom"===b?this._assignPeriodicTableFromOptions(a):this.oscillator.type=b},_getOscillatorTypeFromOptions:function(a){return a?a.oscillatorType||"sine":"sine"},_assignPeriodicTableFromOptions:function(b){b.realPeriodicTable=b.realPeriodicTable||[0,1],b.imaginaryPeriodicTable=b.imaginaryPeriodicTable||[0,0];var c=new Float32Array(b.realPeriodicTable),d=new Float32Array(b.imaginaryPeriodicTable),e=a.createPeriodicWave(c,d);this.oscillator.setPeriodicWave(e)},_createFMComponents:function(b){b&&b.fm&&b.fm.enabled&&(this.modulatorOscillator=a.createOscillator(),this.modulatorOscillator.start(),this.modulatorGain=a.createGain(),this.modulatorGain.gain.value=b.fm.depth,this._fmFreqRatio=b.fm.freq,this.modulatorOscillator.connect(this.modulatorGain),this.modulatorGain.connect(this.gainNode),b.fm.preModulator&&b.fm.preModulator.enabled&&this._createPreModulator(b.fm.preModulator))},_createPreModulator:function(b){this.preModulatorOscillator=a.createOscillator(),this.preModulatorOscillator.start(),this.preModulatorGain=a.createGain(),this.preModulatorGain.gain.value=b.depth,this._preFmFreqRatio=b.freq,this.preModulatorOscillator.connect(this.preModulatorGain),this.preModulatorGain.connect(this.modulatorGain)}},b}angular.module("chesireApp").factory("OscillatorCollectionNode",a),a.$inject=["Audiocontext"]}(),function(){angular.module("chesireApp").factory("SoundSourceClass",["OscillatorClass","Audiocontext","MotionParamsHelper","NoiseGeneratorClass",function(a,b,c,d){var e=function(a){a&&this.init(a)};return e.prototype={connectedTo:null,DEFAULT_GAIN:1,MIN_GAIN_CHANGE:.05,init:function(a){this.options=a,this._createSources();var c=this._getEnabledSources();this.gainController=b.createGain(),c>0&&(this.merger=b.createChannelMerger(1),this.merger.connect(this.gainController)),this._connectAllNodes()},playNote:function(a,b){for(var c=0;c<this._sources.length;c++)this._sources[c].playNote(a,b)},connectTo:function(a){"AudioDestinationNode"!==a.constructor.name&&"GainNode"!==a.constructor.name&&(a=a.getAudioNode()),this.connectedTo=a,this.gainController.connect(a)},updateSound:function(a){this._updateMainGain(a),this._updateAllSoundSources(a),this._updatePartialGains()},stopPlaying:function(){this._setGainControllerValue(0)},_connectAllNodes:function(){for(var a=0;a<this._gains.length;a++)this._gains[a].connect(this.merger,0,0)},_getEnabledSources:function(){return this._gains.length},_setGainControllerValue:function(a){var b=this.gainController.gain.value;b!==a&&((0===b||1===b)&&(this.gainController.gain.value=a),Math.abs(b-a)>this.MIN_GAIN_CHANGE&&(this.gainController.gain.value=a))},changeScale:function(a){for(var b=0;b<this._sources.length;b++)this._sources[b].changeScale(a)},_updateMainGain:function(a){var b=this.DEFAULT_GAIN;this.options.controls&&this.options.controls.gain&&(b=c.getParamValue(this.options.controls.gain,a)),this._setGainControllerValue(b)},_updateAllSoundSources:function(a){for(var b=0;b<this._sources.length;b++)this._sources[b].updateSound(a)},_updatePartialGains:function(){for(var a=0,b=0;b<this._sources.length;b++)a+=this._sources[b].getGain();for(1>a&&(a=1),b=0;b<this._gains.length;b++)this._gains[b].gain.value=1/a},_createSources:function(){this._sources=[],this._gains=[],this._createOscillators(),this._createNoiseGenerators()},_createOscillators:function(){for(var c=0;c<this.options.oscillators.length;c++){var d=this.options.oscillators[c];if(d.enabled){d.generalSoundSource=this;var e=new a(d);this._sources.push(e);var f=b.createGain();e.connectTo(f),this._gains.push(f)}}},_createNoiseGenerators:function(){for(var a=0;a<this.options.noises.length;a++){var c=this.options.noises[a];if(c.enabled){c.generalSoundSource=this;var e=new d(c);this._sources.push(e);var f=b.createGain();e.connectTo(f),this._gains.push(f)}}},destroy:function(){this._destroySources(),this.merger&&(this.merger.disconnect(),this.merger=null),this.connectedTo&&this.gainController&&(this.gainController.disconnect(),this.connectedTo=null)},_destroySources:function(){for(var a=0;a<this._sources.length;a++)this._sources[a].destroy();for(a=0;a<this._gains.length;a++)this._gains[a].disconnect();this._sources=[],this._gains=[]}},e}])}(),angular.module("chesireApp").factory("OscillatorClass",["MultiNotesHelper","OscillatorCollection","Audiocontext","MotionParamsHelper","SynthElementsSetClass",function(a,b,c,d,e){var f=function(a){a&&this.init(a)};return f.prototype={connectedTo:null,DEFAULT_GAIN:1,MIN_GAIN_CHANGE:.05,init:function(a){this.options=a,this.destroy(),this.oscillatorCollection=new b(a),this.synthElementsSet=new e(this.oscillatorCollection,this.options.components),this.gainController=c.createGain(),this.synthElementsSet.connectTo(this.gainController)},changeScale:function(a){this.oscillatorCollection&&this.oscillatorCollection.destroy(),this.oscillatorCollection.init(a,this.options)},updateSound:function(a){this._updateNotesBeingPlayed(a),this._updateGain(a),this.synthElementsSet.updateSound(a)},_updateNotesBeingPlayed:function(b){var c=a.getNotesInfo(b,this.options);c.fmInfo=this._getFmInfo(b),this.oscillatorCollection.updateNodes(c)},_getFmInfo:function(a){if(!this.options||!this.options.fm||!this.options.fm.enabled)return null;var b=this.options.fm,c=b.depth;
return b.controls&&b.controls.depth&&b.controls.depth.enabled&&(c=d.getParamValue(b.controls.depth,a)),{depth:c}},_updateGain:function(a){var b=this.options.gain;angular.isUndefined(b)&&(b=this.DEFAULT_GAIN),this.options.controls&&this.options.controls.gain&&this.options.controls.gain.enabled&&(b=d.getParamValue(this.options.controls.gain,a)),this._setGainControllerValue(b)},playNote:function(a,b){var c=this;this._setGainControllerValue(1),this.oscillatorCollection.playNote(a,b).then(function(){c._setGainControllerValue(0)})},getGain:function(){return this.options.enabled?this.gainController.gain.value:0},_setGainControllerValue:function(a){var b=this.gainController.gain.value;b!==a&&((0===b||1===b)&&(this.gainController.gain.value=a),Math.abs(b-a)>this.MIN_GAIN_CHANGE&&(this.gainController.gain.value=a))},connectTo:function(a){this.connectedTo=a,this.gainController.connect(a)},destroy:function(){this.oscillatorCollection&&(this.oscillatorCollection.destroy(),this.oscillatorCollection=null),this.synthElementsSet&&(this.synthElementsSet.destroy(),this.synthElementsSet=null),this.connectedTo&&this.gainController&&(this.gainController.disconnect(),this.connectedTo=null)}},f}]),function(){angular.module("chesireApp").factory("NoiseGeneratorClass",["$timeout","Audiocontext","MotionParamsHelper","SynthElementsSetClass",function(a,b,c,d){function e(a){if(!a||"white"===a){for(var c=f*b.sampleRate,d=b.createBuffer(1,c,b.sampleRate),e=d.getChannelData(0),g=0;c>g;g++)e[g]=2*Math.random()-1;var h=b.createBufferSource();return h.buffer=d,h.loop=!0,h}}var f=3,g=function(a){a&&this.init(a)};g.prototype={connectedTo:null,DEFAULT_GAIN:1,alreadyStarted:!1,MIN_GAIN_CHANGE:.05,init:function(a){this.options=a,this.destroy(),this.noiseGenerator=new h(this.options),this.synthElementsSet=new d(this.noiseGenerator,this.options.components),this.gainController=b.createGain(),this.synthElementsSet.connectTo(this.gainController)},updateSound:function(a){this._updateGain(a),this._startIfNeeded(),this.synthElementsSet.updateSound(a)},changeScale:function(){},_startIfNeeded:function(){!this.alreadyStarted&&this.noiseGenerator&&(this.noiseGenerator.start(0),this.alreadyStarted=!0)},_updateGain:function(a){this._cancelGainTimeout();var b=this.options.gain;angular.isUndefined(b)&&(b=this.DEFAULT_GAIN),this.options.controls&&this.options.controls.gain&&this.options.controls.gain.enabled&&(b=c.getParamValue(this.options.controls.gain,a)),this._setGainControllerValue(b)},_cancelGainTimeout:function(){this.timeoutToRestoreVolume&&(a.cancel(this.timeoutToRestoreVolume),this.timeoutToRestoreVolume=null)},getGain:function(){return this.options.enabled?this.gainController.gain.value:0},_setGainControllerValue:function(a){var b=this.gainController.gain.value;b!==a&&((0===b||1===b)&&(this.gainController.gain.value=a),Math.abs(b-a)>this.MIN_GAIN_CHANGE&&(this.gainController.gain.value=a))},connectTo:function(b){var c=this.getGain();this._setGainControllerValue(0),this.connectedTo=b,this.gainController.connect(b);var d=this;this.timeoutToRestoreVolume=a(function(){d._setGainControllerValue(c)},1e3*f,!1)},destroy:function(){this.synthElementsSet&&(this.synthElementsSet.destroy(),this.synthElementsSet=null),this.connectedTo&&this.gainController&&(this._cancelGainTimeout(),this.alreadyStarted&&this.noiseGenerator.stop(),this.alreadyStarted=!1,this.gainController.disconnect(),this.connectedTo=null),this.noiseGenerator&&(this.noiseGenerator.destroy(),this.noiseGenerator=null)}};var h=function(a){a&&this.init(a)};return h.prototype={init:function(a){this.options=a,this.noiseNode=e(this.options.noiseType)},connectTo:function(a){!a.connect&&a.getAudioNode&&(a=a.getAudioNode()),this.connectedTo=a,this.noiseNode.connect(a)},start:function(a){this.noiseNode&&this.noiseNode.start(a)},stop:function(){this.noiseNode&&this.noiseNode.stop()},destroy:function(){this.connectedTo&&(this.noiseNode.disconnect(),this.connectedTo=null),this.noiseNode=null}},g}])}(),angular.module("chesireApp").factory("EqualizerClass",["Audiocontext","MotionParamsHelper",function(a,b){var c=function(a){a&&this.init(a)};return c.prototype={init:function(b){this.options=b,this.filter=a.createBiquadFilter(),this.filter.type=b.eqType.id},getAudioNode:function(){return this.filter},updateSound:function(a){this.options.eqType.usesQ&&this._updateQ(a),this.options.eqType.usesGain&&this._updateGain(a),this._updateFrequency(a)},_updateQ:function(a){var c=this.options.q;this.options.controls&&this.options.controls.q&&this.options.controls.q.enabled&&(c=b.getParamValue(this.options.controls.q,a),c=this._adjustValue(c,this.options.minQ,this.options.maxQ)),this._setQValue(c)},_updateFrequency:function(a){var c=this.options.freq;this.options.controls&&this.options.controls.freq&&this.options.controls.freq.enabled&&(c=b.getParamValue(this.options.controls.freq,a),c=this._adjustValue(c,this.options.minFreq,this.options.maxFreq)),this._setFreqValue(c)},_updateGain:function(a){var c=this.options.gain;this.options.controls&&this.options.controls.gain&&this.options.controls.gain.enabled&&(c=b.getParamValue(this.options.controls.gain,a),c=this._adjustValue(c,this.options.minGain,this.options.maxGain)),this._setGainValue(c)},_adjustValue:function(a,b,c){return b=parseFloat(b),c=parseFloat(c),a*(c-b)+b},_setQValue:function(a){this.filter.Q.value!==a&&(this.filter.Q.value=a)},_setFreqValue:function(a){this.filter.frequency.value!==a&&(this.filter.frequency.value=a)},_setGainValue:function(a){this.filter.gain.value!==a&&(this.filter.gain.value=a)},connectTo:function(a){"AudioDestinationNode"!==a.constructor.name&&"GainNode"!==a.constructor.name&&(a=a.getAudioNode()),this.connectedTo=a,this.filter.connect(a)},destroy:function(){this.connectedTo&&this.filter&&(this.filter.disconnect(),this.connectedTo=null)}},c}]),angular.module("chesireApp").directive("synthcomponent",["$rootScope","$compile",function(a,b){var c=function(c){var d="Error, component directive not found";switch(c.type){case"tremolo":d="<tremolo/>";break;case"equalizer":d="<equalizer/>";break;case"distortion":d="<distortion/>";break;case"delay":d="<delay/>"}var e=angular.element(d),f=a.$new(!0);return f.componentInfo=c,b(e)(f)};return{template:"",restrict:"E",scope:{componentInfo:"="},link:function(a,b){var d=c(a.componentInfo);b.append(d)}}}]),angular.module("chesireApp").factory("CurrentSynth",function(){var a=null,b=[],c=function(c){a=c,angular.forEach(b,function(a){a(c)})},d=function(){return a},e=function(a){b.push(a)};return{setCurrentSynth:c,getCurrentSynth:d,subscribeToChangesInCurrentSynth:e}}),angular.module("chesireApp").factory("SynthClass",["Audiocontext","SynthElementFactory","SoundSourceClass","soundMuter",function(a,b,c,d){var e=function(a,b){a&&b&&this.init(a,b)};return e.prototype={synthElements:null,init:function(b,c){this.mainGain=a.createGain(),this.mainGain.gain.value=1,this.mainGain.connect(a.destination),this.synthOptions=angular.copy(b),this.scaleOptions=angular.copy(c),this.synthElements=[],this._createComponents(),this.scaleChanged(this.scaleOptions)},getComponent:function(a){return _.find(this.synthElements,function(b){return b.options.uniqueId===a.uniqueId})},playNote:function(a,b){angular.forEach(this.synthElements,function(c){c.playNote&&c.playNote(a,b)})},_createComponents:function(){if(!this._areOptionsCorrect())throw"SynthClass: error creating components, wrong options";var a=this;this.synthElements=[],this.synthElements.push(this._createSoundSource()),angular.forEach(this.synthOptions.getActiveComponents(),function(c){c.enabled&&a.synthElements.push(b.createSynthElement(c))});for(var c=0;c<this.synthElements.length-1;c++)this.synthElements[c].connectTo(this.synthElements[c+1]);_.last(this.synthElements).connectTo(this.mainGain)},_createSoundSource:function(){return new c(this.synthOptions.audio)},_areOptionsCorrect:function(){if(this.synthOptions){var a=this.synthOptions.getOscillators(),b=a&&a.length>=1;return b}return!1},scaleChanged:function(a){this.scaleOptions=a,angular.forEach(this.synthElements,function(b){b.changeScale&&b.changeScale(a)})},stopPlaying:function(){angular.forEach(this.synthElements,function(a){a.stopPlaying&&a.stopPlaying()})},updateSound:function(a,b){angular.forEach(this.synthElements,function(a){a.updateSound&&a.updateSound(b)}),this._muteMainGainIfNeeded()},_muteMainGainIfNeeded:function(){var a=1;d.isMuted()&&(a=0),this._oldGainValue!==a&&(this._oldGainValue=a,this.mainGain.gain.value=a)},disable:function(){_.last(this.synthElements).gainController.disconnect(this.mainGain)},destroy:function(){angular.forEach(this.synthElements,function(a){a.destroy()}),this.synthElements=[],this.mainGain&&(this.mainGain.disconnect(),this.mainGain=null)}},e}]),angular.module("chesireApp").factory("SynthElementFactory",["TremoloClass","EqualizerClass","DistortionClass","DelayClass",function(a,b,c,d){var e=function(e){switch(e.type){case"tremolo":return new a(e);case"equalizer":return new b(e);case"distortion":return new c(e);case"delay":return new d(e);default:throw"Error creating SynthElement, wrong type: "+e.type}};return{createSynthElement:e}}]),angular.module("chesireApp").factory("TremoloClass",["Audiocontext","MotionParamsHelper",function(a,b){var c=function(a){a&&this.init(a)};return c.prototype={DEFAULT_DEPTH:.2,init:function(b){this.options=b,this.mainGainController=a.createGain(),this.gainController=a.createGain(),this.oscillatorGain=a.createGain(),this.oscillator=a.createOscillator(),this.oscillator.connect(this.oscillatorGain),this.oscillatorGain.connect(this.gainController.gain),this.gainController.connect(this.mainGainController),this.oscillator.type=b.oscillatorType,this.oscillator.frequency.value=3,this.oscillator.start()},getAudioNode:function(){return this.gainController},updateSound:function(a){this._updateRate(a),this._updateDepth(a)},_updateRate:function(a){var c=this.options.rate;this.options.controls&&this.options.controls.rate&&this.options.controls.rate.enabled&&(c=b.getParamValue(this.options.controls.rate,a),c=this._adjustValue(c,this.options.minRate,this.options.maxRate)),this._setRateValue(c)},_updateDepth:function(a){var c=this.options.depth||this.DEFAULT_DEPTH;this.options.controls&&this.options.controls.depth&&this.options.controls.depth.enabled&&(c=b.getParamValue(this.options.controls.depth,a)),this._setDepthValue(c)},_adjustValue:function(a,b,c){return b=parseFloat(b),c=parseFloat(c),a*(c-b)+b},_setRateValue:function(a){this.oscillator.frequency.value!==a&&(this.oscillator.frequency.value=a)},_setDepthValue:function(a){var b=a/2;this.mainGainController.gain.value=1-b,this.oscillatorGain.gain.value=a},connectTo:function(a){"AudioDestinationNode"!==a.constructor.name&&"GainNode"!==a.constructor.name&&(a=a.getAudioNode()),this.connectedTo=a,this.mainGainController.connect(a)},destroy:function(){this.connectedTo&&this.mainGainController&&(this.gainController.disconnect(),this.mainGainController=null)}},c}]),function(){function a(a,b){function c(a){for(var b,c="number"==typeof a?a:50,d=44100,e=new Float32Array(d),f=Math.PI/180,g=0;d>g;++g)b=2*g/d-1,e[g]=(3+c)*b*20*f/(Math.PI+c*Math.abs(b));return e}var d=function(a){a&&this.init(a)};return d.prototype={init:function(b){this.options=b,this.shaper=a.createWaveShaper(),this.shaper.oversample="4x"},getAudioNode:function(){return this.shaper},updateSound:function(a){this._updateAmount(a)},_updateAmount:function(a){var c=this.options.amount;this.options.controls&&this.options.controls.amount&&this.options.controls.amount.enabled&&(c=b.getParamValue(this.options.controls.amount,a),c=this._adjustValue(c,this.options.MIN_AMOUNT,this.options.MAX_AMOUNT)),this._setAmountValue(c)},_adjustValue:function(a,b,c){return b=parseFloat(b),c=parseFloat(c),a*(c-b)+b},_setAmountValue:function(a){this.currentAmount!==a&&(this.currentAmount=a,this.shaper.curve=c(a))},connectTo:function(a){"AudioDestinationNode"!==a.constructor.name&&"GainNode"!==a.constructor.name&&(a=a.getAudioNode()),this.connectedTo=a,this.shaper.connect(a)},destroy:function(){this.connectedTo&&this.shaper&&(this.shaper.disconnect(),this.connectedTo=null)}},d}angular.module("chesireApp").factory("DistortionClass",a),a.$inject=["Audiocontext","MotionParamsHelper"]}(),function(){function a(a,b){var c=function(a){a&&this.init(a)};return c.prototype={init:function(b){this.options=b,this.delay=a.createDelay(),this.feedback=a.createGain(),this.filter=a.createBiquadFilter(),this.filter.frequency.value=this.options.cutoff,this.delay.connect(this.feedback),this.feedback.connect(this.filter),this.filter.connect(this.delay),this.endPoint=a.createGain(),this.endPoint.gain.value=1,this.startPoint=a.createGain(),this.startPoint.gain.value=1,this.startPoint.connect(this.delay),this.startPoint.connect(this.endPoint),this.delay.connect(this.endPoint)},getAudioNode:function(){return this.startPoint},updateSound:function(a){this._updateFeedback(a),this._updateDelay(a)},_updateFeedback:function(a){var c=this.options.feedback;this.options.controls&&this.options.controls.feedback&&this.options.controls.feedback.enabled&&(c=b.getParamValue(this.options.controls.feedback,a)),this._setFeedbackValue(c)},_updateDelay:function(a){var c=this.options.delay;this.options.controls&&this.options.controls.delay&&this.options.controls.delay.enabled&&(c=b.getParamValue(this.options.controls.delay,a),c=this._adjustValue(c,this.options.minDelay,this.options.maxDelay)),this._setDelayValue(c)},_adjustValue:function(a,b,c){return b=parseFloat(b),c=parseFloat(c),a*(c-b)+b},_setFeedbackValue:function(a){this.feedback.gain.value!==a&&(this.feedback.gain.value=a)},_setDelayValue:function(a){this.delay.delayTime.value!==a&&(this.delay.delayTime.value=a)},connectTo:function(a){"AudioDestinationNode"!==a.constructor.name&&"GainNode"!==a.constructor.name&&(a=a.getAudioNode()),this.connectedTo=a,this.endPoint.connect(a)},destroy:function(){this.connectedTo&&this.endPoint&&(this.endPoint.disconnect(),this.connectedTo=null),this.delay&&this.delay.disconnect(),this.feedback&&this.feedback.disconnect(),this.filter&&this.filter.disconnect(),this.startPoint&&this.startPoint.disconnect()}},c}angular.module("chesireApp").factory("DelayClass",a),a.$inject=["Audiocontext","MotionParamsHelper"]}(),function(){function a(a){var b=function(a,b){this.init(a,b)};return b.prototype={init:function(b,c){this.destroy(),this.synthElements=[b],c=c||[];for(var d=0;d<c.length;d++)c[d].enabled&&this.synthElements.push(a.createSynthElement(c[d]));for(d=0;d<this.synthElements.length-1;d++)this.synthElements[d].connectTo(this.synthElements[d+1])},updateSound:function(a){for(var b=1;b<this.synthElements.length;b++)this.synthElements[b].updateSound&&this.synthElements[b].updateSound(a)},connectTo:function(a){"AudioDestinationNode"!==a.constructor.name&&"GainNode"!==a.constructor.name&&(a=a.getAudioNode()),this.connectedTo=a,_.last(this.synthElements).connectTo(a)},destroy:function(){if(this.synthElements)for(var a=1;a<this.synthElements.length;a++)this.synthElements[a].destroy();this.synthElements=null,this.connectedTo=null}},b}angular.module("chesireApp").factory("SynthElementsSetClass",a),a.$inject=["SynthElementFactory"]}(),function(){function a(){return{templateUrl:"scripts/gesture-selector/gesture-selector.html",restrict:"E",controller:"GestureSelectorController",controllerAs:"vm",bindToController:!0,scope:{gestureObject:"=",changeCallback:"&"}}}angular.module("chesireApp").directive("gestureSelector",a)}(),function(){function a(a,b){var c=this;c.availableGestures=b}angular.module("chesireApp").controller("GestureSelectorController",a),a.$inject=["$scope","MotionParamsList"]}(),function(){function a(){return{templateUrl:"scripts/gesture-selector/response-function.html",restrict:"E",scope:{responseFunctionInfo:"=",changeCallback:"&"},controller:"ResponseFunctionController",controllerAs:"vm",bindToController:!0}}angular.module("chesireApp").directive("responseFunction",a)}(),function(){function a(a,b){function c(){j.availableResponseFunctions=b,j.responseFunctionInfo&&(j.selectedResponseFunction=b[j.responseFunctionInfo.name],e())}function d(){j.responseFunctionInfo.name!==j.selectedResponseFunction.name&&(j.responseFunctionInfo.name=j.selectedResponseFunction.name,e(),h())}function e(){j.responseFunctionValues=[];var a,b,c=1/i;j.responseFunctionIncrement=c;for(var d=0;i>d;d++)b=d*c,a=f(b,j.responseFunctionInfo),j.responseFunctionValues.push({x:b,y:a})}function f(a,b){var c=0,d=1;angular.isUndefined(b.TOTAL_MIN)||(c=b.TOTAL_MIN),angular.isUndefined(b.TOTAL_MAX)||(d=b.TOTAL_MAX);var e=d-c;return j.selectedResponseFunction.getResponse(a,j.responseFunctionInfo)/e}function g(){e(),h()}function h(){angular.isFunction(j.changeCallback)&&a(j.changeCallback)}var i=20,j=this;j.responseFunctionChanged=d,j.responseFunctionParamsChanged=g,c()}angular.module("chesireApp").controller("ResponseFunctionController",a),a.$inject=["$timeout","ResponseFunctions"]}(),angular.module("chesireApp").factory("ResponseFunctions",function(){function a(a,b){var c=b.maxX-b.minX,d=a;a<=b.minX?d=0:a>=b.maxX?d=1:c>0&&(d=(a-b.minX)/c);var e=b.minY+d*(b.maxY-b.minY);return b.inverse&&(e=b.maxY-d*(b.maxY-b.minY)),e<b.minY&&(e=b.minY),e>b.maxY&&(e=b.maxY),e}var b={min:{name:"Min Y",value:0},max:{name:"Max Y",value:1},minX:{name:"Min X",value:0},maxX:{name:"Max X",value:1},inverse:{name:"Inverse",value:!1}},c={name:"linear",params:b,getResponse:function(c,d){var e={maxY:d.max||b.max.value,minY:d.min||b.min.value,maxX:d.maxX||b.maxX.value,minX:d.minX||b.minX.value,inverse:d.inverse||b.inverse.value};return a(c,e)}},d={step:{name:"Step",value:.5},inverse:{name:"Inverse",value:!1},stepOn:{name:"StepOn",value:1},stepOff:{name:"StepOff",value:0}},e={name:"step",params:d,getResponse:function(a,b){var c,e=b.step||d.step.value,f=b.inverse||d.inverse.value,g=b.stepOn||d.stepOn.value,h=b.stepOff||d.stepOff.value;return f?(c=g,a>e&&(c=h)):(c=h,a>e&&(c=g)),c}},f={minY:{name:"Min Y",value:0},maxY:{name:"Max Y",value:1},minX:{name:"Min X",value:0},maxX:{name:"Max X",value:1},center:{name:"Center",value:.5},inverse:{name:"Inverse",value:!1}},g={name:"middle",params:f,getResponse:function(b,c){var d=c.center||f.center.value,e=c.maxX||f.maxX.value,g=c.minX||f.minX.value,h=c.inverse||f.inverse.value,i={minY:c.minY||f.minY.value,maxY:c.maxY||f.maxY.value};return d>=b?(i.minX=Math.min(g,d),i.maxX=d,i.inverse=h):(i.minX=d,i.maxX=Math.max(e,d),i.inverse=!h),a(b,i)}};return{linear:c,step:e,middle:g}}),function(){function a(){return{templateUrl:"scripts/gesture-selector/response-function-param.html",restrict:"E",scope:{paramParentObject:"=",paramKey:"=",paramInfo:"=",changeCallback:"&"},controller:"ResponseFunctionParamController",controllerAs:"vm",bindToController:!0}}angular.module("chesireApp").directive("responseFunctionParam",a)}(),function(){function a(a){function b(){d.selectedValue=d.paramParentObject[d.paramKey]||d.paramInfo.value,d.isBoolean=_.isBoolean(d.paramInfo.value),d.isNumber=_.isNumber(d.paramInfo.value)}function c(){a(function(){var a=d.selectedValue;d.isNumber&&(a=parseFloat(a)),d.paramParentObject[d.paramKey]=a,angular.isFunction(d.changeCallback)&&d.changeCallback()})}var d=this;d.selectedValueChanged=c,b()}angular.module("chesireApp").controller("ResponseFunctionParamController",a),a.$inject=["$timeout"]}(),function(){function a(a,b,c,d,e){function f(){i().then(g)}function g(a,c){a.$$isSynth||(a=d.create(a)),v=a,j(),n(v,c),b.notifyLastUsedSynthChanged(v)}function h(a){var b=e.getSynthByName(a);b&&g(b)}function i(){var c=a.defer();return v?c.resolve(v):b.getLastUsedSynth().then(function(a){v=a,j(),c.resolve(v)}),c.promise}function j(){angular.forEach(v.midi.components,k),angular.forEach(v.midi.controls,k),angular.forEach(v.audio.components,k),angular.forEach(v.audio.oscillators,k),angular.forEach(v.audio.noises,k),angular.forEach(v.audio.controls,k)}function k(a){a&&!a.uniqueId&&(a.uniqueId=c.getUniqueId())}function l(a){w.push(a),a(v)}function m(a){w=_.without(w,a)}function n(a,b){angular.forEach(w,function(c){c(a,b)})}function o(a){for(var c=0;c<v.getActiveComponents().length;c++)if(v.getActiveComponents()[c].uniqueId===a.uniqueId){v.getActiveComponents()[c]=a;break}n(v),b.notifyLastUsedSynthChanged(v)}function p(){n(v),b.notifyLastUsedSynthChanged(v)}function q(a){a.uniqueId||(a.uniqueId=c.getUniqueId());for(var d=0;d<v.getActiveControls().length;d++)if(v.getActiveControls()[d].uniqueId===a.uniqueId){v.getActiveControls()[d]=a;break}n(v),b.notifyLastUsedSynthChanged(v)}function r(a){v&&v.audio&&v.audio.removeOscillator(a)}function s(a){v&&v.audio&&v.audio.removeNoise(a)}function t(a){v&&v.audio&&v.audio.removeComponent(a)}function u(a){v.removeControl(a),n(v),b.notifyLastUsedSynthChanged(v)}var v=null,w=[],x={init:f,setSynthOptions:g,tryToUseSynth:h,getSynthOptions:i,subscribeToChangesInSynthOptions:l,unsubscribeToChangesInSynthOptions:m,notifyComponentChanged:o,notifyControlChanged:q,notifyControlRemoved:u,notifyOscillatorChanged:p,removeOscillator:r,removeNoise:s,removeComponent:t};return x}angular.module("chesireApp").factory("SynthOptions",a),a.$inject=["$q","LastUsedSettingsStore","IdGenerator","SynthoptionsModel","SynthStore"]}(),function(){function a(a,b){function c(){var c=a.defer();return m=b.get("synths")||[],c.resolve(m),k(m),c.promise}function d(a){for(var b=0;b<m.length;b++)if(m[b].name===a)return m[b];return null}function e(c){var d=a.defer();if(c&&c.name){var e=b.get("synths");e=e?angular.fromJson(e):[];var f=h(c,e);f>-1?e[f]=c:e.push(c),b.set("synths",e),m=e,d.promise.then(k),d.resolve(e)}else d.reject("Error saving synth, bad config");return d.promise}function f(c){var d=a.defer(),e=b.get("synths"),f=g(c,e);return e.length>1?(e=_.without(e,f),m=e,b.set("synths",e),d.promise.then(function(a){k(a,!0)}),d.resolve(e)):d.reject("Cannot delete the last synth"),d.promise}function g(a,b){var c=h(a,b);return c>-1?b[c]:!1}function h(a,b){for(var c=0;c<b.length;c++)if(b[c].name===a.name)return c;return-1}function i(a){n.push(a),a(m)}function j(a){n=_.without(n,a)}function k(a,b){angular.forEach(n,function(c){c(a,b)})}function l(a){for(var c={name:a},d=b.get("synths")||[];g(c,d);)c.name+=" (1)";return c.name}var m=null,n=[],o={getSynths:c,saveSynth:e,getSynthByName:d,deleteSynth:f,getUniqueName:l,subscribeToChangeInAllSynths:i,unsubscribeToChangeInAllSynths:j};return o}angular.module("chesireApp").factory("SynthStore",a),a.$inject=["$q","localStorageService"]}(),angular.module("chesireApp").directive("control",function(){return{templateUrl:"scripts/synth-options/control.html",restrict:"E",scope:{controlInfo:"="},controller:"ControlCtrl"}}),angular.module("chesireApp").controller("ControlCtrl",["$scope","MidiControlMessages","SynthOptions","CurrentMidiOutput",function(a,b,c,d){var e=function(){a.controlListExpanded=!1,a.midiControlMessages=b,a.$watch("controlInfo.number",f),a.$watch("currentControlMessage.number",h),a.$watch("controlInfo.param",g),a.$watch("controlInfo.responseFunction",_.throttle(g,500),!0)},f=function(c){a.currentControlMessage=_.findWhere(b,{number:c})},g=function(b){b&&(a.controlInfo.responseFunction.min=parseFloat(a.controlInfo.responseFunction.min),a.controlInfo.responseFunction.max=parseFloat(a.controlInfo.responseFunction.max),c.notifyControlChanged(a.controlInfo))},h=function(b,d){b!==d&&(a.controlInfo.number=b,c.notifyControlChanged(a.controlInfo))};a.toggleControlList=function(){a.controlListExpanded=!a.controlListExpanded},a.selectControl=function(b){a.controlInfo.number=b.number,a.controlListExpanded=!1,c.notifyControlChanged(a.controlInfo)},a.removeControl=function(){c.notifyControlRemoved(a.controlInfo)},a.pingControl=function(){d.getCurrentOutput().pingControl(a.controlInfo.number)},e()}]),function(){angular.module("chesireApp").constant("outputModes",[{name:"Audio",value:"audio"},{name:"MIDI",value:"midi"}])}(),angular.module("chesireApp").constant("DefaultEmptyControl",{number:1,param:"y",responseFunction:{inverse:!1,min:0,max:0,name:"linear"}}),function(){function a(){return{restrict:"E",controller:"SynthoptionsMidiController",controllerAs:"vm",bindToController:!0,templateUrl:"scripts/synth-options/synthoptions-midi/synthoptions-midi.tpl.html",scope:{synthoptions:"="}}}angular.module("chesireApp").directive("synthoptionsMidi",a)}(),function(){function a(a){var b=this;b.addControl=function(){b.synthoptions.getActiveControls().push(angular.copy(a))}}angular.module("chesireApp").controller("SynthoptionsMidiController",a),a.$inject=["DefaultEmptyControl"]}(),angular.module("chesireApp").directive("midiOutputSelector",function(){return{templateUrl:"scripts/synth-options/midi-output-selector/midi-output-selector.html",restrict:"E",scope:{},controller:"MidiOutputSelectorCtrl"}}),angular.module("chesireApp").controller("MidiOutputSelectorCtrl",["$scope","MidiApiMediator","CurrentMidiOutput",function(a,b,c){var d=function(){a.loading=!0,c.whenReady().then(function(){b.then(function(b){a.midiOutputs=b.outputs(),a.loading=!1}),e(c.getCurrentOutput()),a.$watch(function(){return c.getCurrentOutput()},e),a.$watch("selectedMidiOutput.id",f)})},e=function(b){a.selectedMidiOutput=b},f=function(b){var d=c.getCurrentOutput();d.id!==b&&c.setCurrentOutput(a.selectedMidiOutput)};d()}]),function(){function a(){return{restrict:"E",controller:"SynthoptionsAudioController",controllerAs:"vm",bindToController:!0,templateUrl:"scripts/synth-options/synthoptions-audio/synthoptions-audio.tpl.html"}}angular.module("chesireApp").directive("synthoptionsAudio",a)}(),function(){function a(a,b,c,d){function e(){b.subscribeToChangesInSynthOptions(f),a.$on("$destroy",j)}function f(a){k!==a&&(l.synthoptions=a,k=l.synthoptions,l.components=l.synthoptions.getActiveComponents(),l.audioSynthOptions=l.synthoptions.audio,l.componentsList.setActiveItem(null))}function g(a){var c=l.audioSynthOptions.addComponent(a);l.componentsList.setActiveItem(c),b.notifyOscillatorChanged()}function h(){var a=l.audioSynthOptions.addOscillator();l.componentsList.setActiveItem(a),b.notifyOscillatorChanged()}function i(){var a=l.audioSynthOptions.addNoise();l.componentsList.setActiveItem(a),b.notifyOscillatorChanged()}function j(){b.unsubscribeToChangesInSynthOptions(f)}var k=null,l=this;l.addComponent=g,l.addOscillator=h,l.addNoise=i,l.availableComponents=c,l.componentsList=d,e()}angular.module("chesireApp").controller("SynthoptionsAudioController",a),a.$inject=["$scope","SynthOptions","availableComponents","componentsList"]}(),function(){angular.module("chesireApp").component("oscillatorAudioOptions",{controller:"OscillatorAudioOptionsController as vm",bindings:{},templateUrl:"scripts/synth-options/oscillator-audio-options/oscillator-audio-options.tpl.html"})}(),function(){function a(a,b,c,d){function e(){c.subscribeToChangesInSynthOptions(f),m.transitionTypes=d,b.$on("$destroy",l)}function f(a){a&&(m.synthOptions=a.audio,m.mainVolumeInfo=a.audio.controls.gain,m.noiseActive?m.activeSoundSource=m.synthOptions.noise:m.activeSoundSource=m.synthOptions.oscillators[m.lastSoundSourceIndex])}function g(a,b){m.activeSoundSource=a,m.lastSoundSourceIndex=b,m.noiseActive=!1}function h(a){m.noiseActive=!0,m.activeSoundSource=a}function i(){c.notifyOscillatorChanged()}function j(){a(function(){c.notifyOscillatorChanged()})}function k(){a(function(){c.notifyOscillatorChanged()})}function l(){c.unsubscribeToChangesInSynthOptions(f)}var m=this;m.lastSoundSourceIndex=0,m.noiseActive=!1,m.mainParamsInSynthChanged=i,m.activateSoundSource=g,m.oscillatorToggled=j,m.activateNoise=h,m.noiseGeneratorToggled=k,e()}angular.module("chesireApp").controller("OscillatorAudioOptionsController",a),a.$inject=["$timeout","$scope","SynthOptions","oscillatorTransitionTypes"]}(),function(){function a(){return{restrict:"E",templateUrl:"scripts/synth-options/components-list/components-list.tpl.html",scope:{},controller:"ComponentsListController",controllerAs:"vm",bindToController:!0}}angular.module("chesireApp").directive("componentsList",a)}(),function(){function a(a,b,c,d){function e(){c.subscribeToChangesInSynthOptions(f),a.$on("$destroy",j)}function f(a){a&&(k.components=a.getActiveComponents(),k.audioSynthOptions=a.audio)}function g(a){b(function(){c.notifyComponentChanged(a)})}function h(a,b,d){var e=a["json/component"].componentInfo;k.audioSynthOptions.moveComponentAfterComponent(e,d),c.notifyOscillatorChanged(),k.componentsList.setActiveItem(e)}function i(a){var b=a["json/component"].componentInfo;k.audioSynthOptions.moveComponentToBeginning(b),k.componentsList.setActiveItem(b)}function j(){c.unsubscribeToChangesInSynthOptions(f)}var k=this;k.componentsList=d,k.componentToggled=g,k.componentDroppedOverComponent=h,k.componentDroppedOverMerger=i,e()}angular.module("chesireApp").controller("ComponentsListController",a),a.$inject=["$scope","$timeout","SynthOptions","componentsList"]}(),function(){function a(){function a(a){c=a}function b(){return c}var c=null,d={setActiveItem:a,getActiveItem:b};return d}angular.module("chesireApp").factory("componentsList",a)}(),function(){angular.module("chesireApp").component("soundSourceSelector",{controller:"SoundSourceSelector as vm",templateUrl:"scripts/synth-options/sound-source-selector/sound-source-selector.tpl.html",bindings:{component:"="}})}(),function(){function a(a,b,c,d){function e(){d.subscribeToChangesInSynthOptions(f),a.$on("$destroy",j)}function f(a){a&&(k.audioSynthOptions=a.audio)}function g(a){b(function(){d.notifyComponentChanged(a)})}function h(a,b,c){var e=a["json/component"].componentInfo;k.audioSynthOptions.moveComponentAfterSoundSourceComponent(e,b,c),d.notifyOscillatorChanged(),k.componentsList.setActiveItem(e)}function i(a,b,c){var e=a["json/component"].componentInfo;k.audioSynthOptions.moveComponentAfterSoundSource(e,c),d.notifyOscillatorChanged(),k.componentsList.setActiveItem(e)}function j(){d.unsubscribeToChangesInSynthOptions(f)}var k=this;k.componentsList=c,k.componentToggled=g,k.componentDroppedOverSubComponent=h,k.componentDroppedOverComponent=i,e()}angular.module("chesireApp").controller("SoundSourceSelector",a),a.$inject=["$scope","$timeout","componentsList","SynthOptions"]}(),angular.module("chesireApp").directive("threeparticles",function(){return{restrict:"E",controller:"ThreeparticlesCtrl",scope:{},link:function(a,b){a.init(b)}}}),angular.module("chesireApp").controller("ThreeparticlesCtrl",["$scope","$timeout","$q","windowResize","Three","Leapmotion","Colorpalette","ScaleOptions","SpaceConverter","HandModel","BoundariesModel","PointerModel","SoundMeshModel","VisualizationKeyHelper","Camera","ChordsHelperModel","playerBoundaries",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(){B&&(E(B),s(C))}function s(b){n.createKeyRanges(b.getCurrentPart()),y&&y.destroy(),z&&z.destroy(),z=new p(a.scene)}function t(){var b=f.getFrameInfo().frame;if(b){if(b.hands.length){var c=f.getRelativePositions(b,b.hands),d=i.getConvertedPosition(c);v.update(b.hands[0],b),x.update(d),z.update(c.x)}a.renderer.render(a.scene,A.getCamera())}}var u=c.defer(),v=null,w=null,x=null,y=null,z=null,A=null,B=null,C=null;a.init=function(c){B=c,b(function(){E(c),a.frameInfo=f.getFrameInfo(),f.subscribeToFrameChange(t),a.renderer.render(a.scene,A.getCamera()),u.resolve(!0)}),h.subscribeToChangesInScaleOptions(D),d.observer.subscribe(r)};var D=function(a){a&&(C=a,u.promise.then(function(){s(a)}))},E=function(b){b.html(""),b.addClass("chesirecanvas");var c=b[0].offsetHeight,d=b[0].offsetWidth;a.scene=new e.Scene,x=new l(a.scene),v=new j(a.scene),w=new k(a.scene),A=new o(a.scene,{screenHeight:c,screenWidth:d}),a.pointLight=new e.PointLight(16777215),a.pointLight.position.set(10,150,130),a.scene.add(a.pointLight),a.renderer=new e.WebGLRenderer,a.renderer.setClearColor(g.hex.BACKGROUND,1),a.renderer.setSize(d,c),b.append(a.renderer.domElement),q.setCamera(A.getCamera()),q.setRenderer(a.renderer)}}]),angular.module("chesireApp").factory("SpaceConverter",function(){var a={width:221,height:221,depth:154},b={xMin:-(a.width/2),xMax:a.width/2,yMin:0,yMax:a.height,zMin:-(a.depth/2),zMax:a.depth/2},c=function(){
return b},d=function(a){return{x:a.x*(b.xMax-b.xMin)+b.xMin,y:a.y*(b.yMax-b.yMin)+b.yMin,z:a.z*(b.zMax-b.zMin)+b.zMin}},e=function(){return a},f=function(){return{x:(b.xMax-b.xMin)/2+b.xMin,y:(b.yMax-b.yMin)/2+b.yMin,z:(b.zMax-b.zMin)/2+b.zMin}};return{getBoxSize:e,getBoxLimits:c,getBoxCenter:f,getConvertedPosition:d}}),angular.module("chesireApp").factory("HandModel",["Three","Colorpalette","SpaceConverter","Leapmotion",function(a,b,c,d){var e,f=.5,g=["pinky","indexFinger","ringFinger","middleFinger"],h=8,i=6,j=5,k=5,l=8,m=function(a){this._scene=a,this._createHand()};return m.prototype._createHand=function(){this._handGeometry=this._createGeometry();var c=new a.MeshLambertMaterial({color:b.hex.HAND,transparent:!0,opacity:f}),d=new a.Mesh(this._handGeometry,c);this._scene.add(d)},m.prototype._createGeometry=function(){var b=new a.Geometry;e=0;for(var c=0;c<g.length;c++){this[g[c]]={verticesStart:e};for(var d=0;h>d;d++)b.vertices.push(new a.Vector3(1,1,1));this._createFacesForFinger(b,e),e+=h}return this._createThumb(b),this._createPalm(b),b.computeFaceNormals(),b},m.prototype._createThumb=function(b){for(var c=0;i>c;c++)b.vertices.push(new a.Vector3(1,1,1));this.thumb={verticesStart:e},b.faces.push(new a.Face3(e+0,e+2,e+1)),b.faces.push(new a.Face3(e+1,e+2,e+3)),b.faces.push(new a.Face3(e+2,e+4,e+3)),b.faces.push(new a.Face3(e+3,e+4,e+5)),b.faces.push(new a.Face3(e+0,e+1,e+2)),b.faces.push(new a.Face3(e+1,e+3,e+2)),b.faces.push(new a.Face3(e+2,e+3,e+4)),b.faces.push(new a.Face3(e+3,e+5,e+4)),e+=i},m.prototype._createPalm=function(b){for(var c=0;j>c;c++)b.vertices.push(new a.Vector3(1,1,1));this.palm={verticesStart:e},b.faces.push(new a.Face3(e+0,e+1,e+3)),b.faces.push(new a.Face3(e+0,e+2,e+3)),b.faces.push(new a.Face3(e+2,e+4,e+3)),b.faces.push(new a.Face3(e+0,e+3,e+1)),b.faces.push(new a.Face3(e+0,e+3,e+2)),b.faces.push(new a.Face3(e+2,e+3,e+4)),e+=j},m.prototype._createFacesForFinger=function(b,c){b.faces.push(new a.Face3(c+0,c+2,c+1)),b.faces.push(new a.Face3(c+1,c+2,c+3)),b.faces.push(new a.Face3(c+2,c+4,c+3)),b.faces.push(new a.Face3(c+3,c+4,c+5)),b.faces.push(new a.Face3(c+4,c+6,c+5)),b.faces.push(new a.Face3(c+5,c+6,c+7)),b.faces.push(new a.Face3(c+0,c+1,c+2)),b.faces.push(new a.Face3(c+1,c+3,c+2)),b.faces.push(new a.Face3(c+2,c+3,c+4)),b.faces.push(new a.Face3(c+3,c+5,c+4)),b.faces.push(new a.Face3(c+4,c+5,c+6)),b.faces.push(new a.Face3(c+5,c+7,c+6))},m.prototype.update=function(a,b){this._lastFrame=b;for(var c=0;c<g.length;c++)this._updateVerticesForFinger(g[c],a[g[c]]);this._updateVerticesForThumb(a.thumb),this._updateVerticesForPalm(a),this._handGeometry.computeFaceNormals(),this._handGeometry.normalsNeedUpdate=!0,this._handGeometry.verticesNeedUpdate=!0},m.prototype._updateVerticesForFinger=function(a,b){var c=this[a].verticesStart;this._updateFingerVertice(this._handGeometry.vertices[c+0],b.positions[1],!0),this._updateFingerVertice(this._handGeometry.vertices[c+1],b.positions[1],!1),this._updateFingerVertice(this._handGeometry.vertices[c+2],b.positions[2],!0),this._updateFingerVertice(this._handGeometry.vertices[c+3],b.positions[2],!1),this._updateFingerVertice(this._handGeometry.vertices[c+4],b.positions[3],!0),this._updateFingerVertice(this._handGeometry.vertices[c+5],b.positions[3],!1),this._updateFingerVertice(this._handGeometry.vertices[c+6],b.positions[4],!0),this._updateFingerVertice(this._handGeometry.vertices[c+7],b.positions[4],!1)},m.prototype._updateVerticesForThumb=function(a){var b=this.thumb.verticesStart;this._updateThumbVertice(this._handGeometry.vertices[b+0],a.positions[2],!0),this._updateThumbVertice(this._handGeometry.vertices[b+1],a.positions[2],!1),this._updateThumbVertice(this._handGeometry.vertices[b+2],a.positions[3],!0),this._updateThumbVertice(this._handGeometry.vertices[b+3],a.positions[3],!1),this._updateThumbVertice(this._handGeometry.vertices[b+4],a.positions[4],!0),this._updateThumbVertice(this._handGeometry.vertices[b+5],a.positions[4],!1)},m.prototype._updateVerticesForPalm=function(a){var b=this.palm.verticesStart;this._updatePalmVertice(this._handGeometry.vertices[b+0],a.pinky.bones[0].prevJoint),this._updateThumbVertice(this._handGeometry.vertices[b+1],a.pinky.bones[0].nextJoint),this._updateThumbVertice(this._handGeometry.vertices[b+2],a.indexFinger.bones[0].prevJoint),this._updateThumbVertice(this._handGeometry.vertices[b+3],a.indexFinger.bones[0].nextJoint),this._updateThumbVertice(this._handGeometry.vertices[b+4],a.thumb.bones[2].prevJoint)},m.prototype._updatePalmVertice=function(a,b){this._updateVertice(a,b)},m.prototype._updateFingerVertice=function(a,b,c){var d=k;c&&(d=-d),this._updateVertice(a,[b[0]+d,b[1],b[2]])},m.prototype._updateThumbVertice=function(a,b,c){var d=l;c&&(d=-d),this._updateVertice(a,[b[0]+d,b[1],b[2]])},m.prototype._updateVertice=function(a,b){var e=d.getRelativePositionXYZ(b,this._lastFrame),f=c.getConvertedPosition(e);a.x=f.x,a.y=f.y,a.z=f.z},m}]),angular.module("chesireApp").factory("BoundariesModel",["Three","Colorpalette","SpaceConverter","playerBoundaries",function(a,b,c,d){var e=function(a){this._scene=a,this._sceneDimensions=c.getBoxLimits(),this._createBoundaries()};return e.prototype._createBoundaries=function(){var c=new a.Geometry,e=new a.MeshLambertMaterial({color:b.hex.BOUNDARIES,transparent:!0,opacity:.15}),f=this._sceneDimensions.yMax;c.vertices.push(new a.Vector3(this._sceneDimensions.xMin,this._sceneDimensions.yMin,this._sceneDimensions.zMin)),c.vertices.push(new a.Vector3(this._sceneDimensions.xMin,this._sceneDimensions.yMin,this._sceneDimensions.zMax)),c.vertices.push(new a.Vector3(this._sceneDimensions.xMin,f,this._sceneDimensions.zMin)),c.vertices.push(new a.Vector3(this._sceneDimensions.xMin,f,this._sceneDimensions.zMax)),c.vertices.push(new a.Vector3(this._sceneDimensions.xMax,this._sceneDimensions.yMin,this._sceneDimensions.zMin)),c.vertices.push(new a.Vector3(this._sceneDimensions.xMax,this._sceneDimensions.yMin,this._sceneDimensions.zMax)),c.vertices.push(new a.Vector3(this._sceneDimensions.xMax,f,this._sceneDimensions.zMin)),c.vertices.push(new a.Vector3(this._sceneDimensions.xMax,f,this._sceneDimensions.zMax));var g=new a.Face3(0,2,1),h=new a.Face3(1,2,3),i=new a.Face3(0,4,2),j=new a.Face3(2,4,6),k=new a.Face3(7,6,4),l=new a.Face3(7,4,5),m=new a.Face3(2,3,6),n=new a.Face3(3,7,6),o=new a.Face3(2,6,3),p=new a.Face3(3,6,7),q=new a.Face3(0,1,4),r=new a.Face3(0,4,1),s=new a.Face3(4,1,5),t=new a.Face3(4,5,1);c.faces.push(g),c.faces.push(h),c.faces.push(i),c.faces.push(j),c.faces.push(k),c.faces.push(l),c.faces.push(m),c.faces.push(n),c.faces.push(o),c.faces.push(p),c.faces.push(q),c.faces.push(r),c.faces.push(s),c.faces.push(t),c.computeFaceNormals();var u=new a.Mesh(c,e);this._scene.add(u),d.setBoundariesObject(u)},e}]),angular.module("chesireApp").factory("PointerModel",["Three","Colorpalette",function(a,b){var c=6,d=3,e=function(a){this._scene=a,this._createPointer()};return e.prototype._createPointer=function(){var d=new a.BoxGeometry(c,c,c),e=new a.MeshLambertMaterial({color:b.hex.POINTER,transparent:!0,opacity:.75});this.pointerElement=new a.Mesh(d,e),this.pointerElement.position.set(-1.5,0,4),this._scene.add(this.pointerElement)},e.prototype.update=function(a){this.pointerElement.position.set(a.x,a.y+d,a.z)},e}]),angular.module("chesireApp").service("SoundMeshModel",["Three","Colorpalette","SpaceConverter","VisualizationKeyHelper",function(a,b,c,d){var e=c.getBoxSize().width/2,f=c.getBoxSize().depth/2,g=50,h=.05,i=function(a){this._scene=a,this._sceneDimensions=c.getBoxLimits(),this._createSoundMesh()};return i.prototype._createSoundMesh=function(){this._soundMeshGeometry=new a.Geometry,this._soundMeshGeometry.dynamic=!0;var c,g,h,i,j,k,l,m=(this._sceneDimensions.xMax-this._sceneDimensions.xMin)/e,n=(this._sceneDimensions.zMax-this._sceneDimensions.zMin)/f,o=new a.MeshLambertMaterial({color:b.hex.PARTICLES,vertexColors:a.FaceColors}),p=0;for(c=0;e>c;c++)for(g=0;f>g;g++){h=c*m+this._sceneDimensions.xMin,i=0,j=g*n+this._sceneDimensions.zMin,k=(c+1)*m+this._sceneDimensions.xMin,l=(g+1)*n+this._sceneDimensions.zMin,this._soundMeshGeometry.vertices.push(new a.Vector3(h,i,j)),this._soundMeshGeometry.vertices.push(new a.Vector3(h,i,l)),this._soundMeshGeometry.vertices.push(new a.Vector3(k,i,j)),this._soundMeshGeometry.vertices.push(new a.Vector3(k,i,l));var q=new a.Face3(p+1,p+2,p),r=new a.Face3(p+1,p+3,p+2),s=new a.Face3(p,p+2,p+1),t=new a.Face3(p+2,p+3,p+1);d.isParticleInKey(h)?(q.color.setHex(b.hex.PARTICLES_NOTE),r.color.setHex(b.hex.PARTICLES_NOTE)):(q.color.setHex(b.hex.PARTICLES),r.color.setHex(b.hex.PARTICLES)),s.color.setHex(b.hex.PARTICLES_BACK),t.color.setHex(b.hex.PARTICLES_BACK),this._soundMeshGeometry.faces.push(q),this._soundMeshGeometry.faces.push(r),this._soundMeshGeometry.faces.push(s),this._soundMeshGeometry.faces.push(t),p+=4}this.destroy(),this._soundMeshGeometry.computeFaceNormals(),this._currentMesh=new a.Mesh(this._soundMeshGeometry,o),this._scene.add(this._currentMesh)},i.prototype.destroy=function(){this._currentMesh&&(this._scene.remove(this._currentMesh),this._currentMesh=null)},i.prototype.update=function(a){for(var b=this._soundMeshGeometry.vertices.length-1;b>=0;b--)this._soundMeshGeometry.vertices[b].y=this._getYToApplyFromTwoPoints(a,this._soundMeshGeometry.vertices[b]);this._soundMeshGeometry.computeFaceNormals(),this._soundMeshGeometry.normalsNeedUpdate=!0,this._soundMeshGeometry.verticesNeedUpdate=!0},i.prototype._getYToApplyFromTwoPoints=function(a,b,c){var d=Math.sqrt((a.x-b.x)*(a.x-b.x)+(a.z-b.z)*(a.z-b.z)),e=0;if(g>d){var f=(g-d)/20*(g-d)/20;e=f*a.y*h}return c||(e+=this._getOscillatorYForDistance(d)),e},i.prototype._getOscillatorYForDistance=function(a){var b=0;g>a&&(b=(g-a)/g);var c=d.getCurrentFrequency()*a/700;return b*Math.cos(c)*10*d.getCurrentGain()},i}]),angular.module("chesireApp").factory("VisualizationKeyHelper",["SpaceConverter","CurrentSynth","MultiNotesHelper",function(a,b,c){var d=null,e=10,f=null,g=null,h=function(){g=b.getCurrentSynth(),b.subscribeToChangesInCurrentSynth(i)},i=function(){g=b.getCurrentSynth(),f=!1,g&&g.synthElements&&(f=g.synthElements[0])},j=function(a){for(var b=0;b<d.length;b++)if(a>=d[b].start&&a<d[b].end)return!0;return!1},k=function(){return f.oscillatorCollection.getNodes()[0].oscillator.frequency.value},l=function(){return f.gainController.gain.value},m=function(){var b=c.getChordsPosition();d=[];for(var f=a.getBoxSize(),g=a.getBoxLimits(),h=0;h<b.length;h++){var i=f.width*b[h].middle+g.xMin;d.push({start:i-e/2,middle:i,end:i+e/2})}},n=function(){return d},o=function(a){return c.getChordsRelevanceFromX(a)};return h(),{createKeyRanges:m,isParticleInKey:j,getKeyRanges:n,getCurrentFrequency:k,getCurrentGain:l,getKeyRangesVolume:o}}]),angular.module("chesireApp").factory("Camera",["Three","SpaceConverter",function(a,b){var c=50,d=425,e=function(a,b){this._scene=a,this._options=b,this._createCamera()};return e.prototype.getCamera=function(){return this.camera},e.prototype._createCamera=function(){var e=b.getBoxCenter();this.camera=new a.PerspectiveCamera(45,this._options.screenWidth/this._options.screenHeight,.1,1e3),this.camera.position.x=e.x,this.camera.position.y=e.y+c,this.camera.position.z=d,this.camera.lookAt(new a.Vector3(e.x,e.y,0))},e}]),angular.module("chesireApp").factory("ChordsHelperModel",["Three","Colorpalette","SpaceConverter","VisualizationKeyHelper",function(a,b,c,d){var e=.05,f=.3,g=function(a){this._scene=a,this._sceneDimensions=c.getBoxLimits(),this._createChordsHelper()};return g.prototype.update=function(a){for(var b=d.getKeyRangesVolume(a),c=0;c<b.length;c++)this._updateChordWithVolume(c,b[c])},g.prototype._updateChordWithVolume=function(a,b){if(this._chordsMesh[a]&&this._chordsMesh[a].material){var c=e+(f-e)*b;this._chordsMesh[a].material.opacity=c}},g.prototype._createChordsHelper=function(){this._createChordsGeometry(),this._createMesh()},g.prototype.destroy=function(){if(this._chordsMesh){for(var a=0;a<this._chordsMesh.length;a++)this._scene.remove(this._chordsMesh[a]);this._chordsMesh=[]}},g.prototype._createMesh=function(){this._chordsMesh=[];for(var b=0;b<this._chordsMeshGeometry.length;b++)this._chordsMeshGeometry[b].computeFaceNormals(),this._chordsMesh.push(new a.Mesh(this._chordsMeshGeometry[b],this._getMaterial())),this._scene.add(this._chordsMesh[b])},g.prototype._getMaterial=function(){return new a.MeshLambertMaterial({color:b.hex.PARTICLES_NOTE,transparent:!0,opacity:e})},g.prototype._createChordsGeometry=function(){this._chordsMeshGeometry=[];for(var a=d.getKeyRanges(),b=0;b<a.length;b++)this._chordsMeshGeometry[b]=this._createGeometryForChord(a[b])},g.prototype._createGeometryForChord=function(b){var c=new a.Geometry;return c.vertices.push(new a.Vector3(b.start,this._sceneDimensions.yMin,this._sceneDimensions.zMin)),c.vertices.push(new a.Vector3(b.start,this._sceneDimensions.yMax,this._sceneDimensions.zMin)),c.vertices.push(new a.Vector3(b.start,this._sceneDimensions.yMin,this._sceneDimensions.zMax)),c.vertices.push(new a.Vector3(b.start,this._sceneDimensions.yMax,this._sceneDimensions.zMax)),c.vertices.push(new a.Vector3(b.end,this._sceneDimensions.yMin,this._sceneDimensions.zMin)),c.vertices.push(new a.Vector3(b.end,this._sceneDimensions.yMax,this._sceneDimensions.zMin)),c.vertices.push(new a.Vector3(b.end,this._sceneDimensions.yMin,this._sceneDimensions.zMax)),c.vertices.push(new a.Vector3(b.end,this._sceneDimensions.yMax,this._sceneDimensions.zMax)),c.faces.push(new a.Face3(1,2,0)),c.faces.push(new a.Face3(1,3,2)),c.faces.push(new a.Face3(0,2,1)),c.faces.push(new a.Face3(1,2,3)),c.faces.push(new a.Face3(5,6,4)),c.faces.push(new a.Face3(5,7,6)),c.faces.push(new a.Face3(4,6,5)),c.faces.push(new a.Face3(5,6,7)),c.faces.push(new a.Face3(2,3,6)),c.faces.push(new a.Face3(2,6,3)),c.faces.push(new a.Face3(3,7,6)),c.faces.push(new a.Face3(3,6,7)),c},g}]),function(){function a(a){function b(){a.all([o.promise,p.promise,q.promise]).then(i)}function c(a){n.push(a),a(r)}function d(a){n=_.without(n,a)}function e(){angular.forEach(n,function(a){a(r)})}function f(a){k=a,o.resolve(k)}function g(a){l=a,p.resolve(l)}function h(a){m=a,q.resolve(m)}function i(){m.geometry.computeBoundingBox();var a=m.geometry.boundingBox.min,b=m.geometry.boundingBox.max;r={min:j(a,k,l),max:j(b,k,l)},e()}function j(a,b,c){var d=.5*c.context.canvas.width,e=.5*c.context.canvas.height;return a.project(b),a.x=a.x*d+d,a.y=-(a.y*e)+e,{x:a.x,y:a.y}}var k,l,m,n=[],o=a.defer(),p=a.defer(),q=a.defer(),r=null,s={subscribeToChange:c,unsubscribeToChange:d,setCamera:f,setRenderer:g,setBoundariesObject:h};return b(),s}angular.module("chesireApp").factory("playerBoundaries",a),a.$inject=["$q"]}(),angular.module("chesireApp").constant("MotionParamsList",["x","y","z","handVelocity","handDirectionX","handDirectionY","handDirectionZ","fingerVelocity","handAperture","fingerDirectionY","closeToChord","closeToChordY","closeToChordYInverse"]),angular.module("chesireApp").factory("MotionParamsHelper",["ResponseFunctions",function(a){var b=function(b,c){var d=a[b.responseFunction.name],e=c[b.param];return d.getResponse(e,b.responseFunction)};return{getParamValue:b}}]),angular.module("chesireApp").constant("DefaultScale",{name:"Default",chords:[{notes:[{name:"A4",freq:440,midi:69}]},{notes:[{name:"A4",freq:440,midi:69}]}]}),angular.module("chesireApp").factory("DefaultSynth",["availableOscillators",function(a){return{name:"Default synth",components:[{type:"oscillator",oscillatorType:a[1],snapDistance:.35,controls:{gain:{param:"y",responseFunction:{name:"linear",min:0,max:1,inverse:!0}}}}],controls:[{number:7,param:"handDirectionY",responseFunction:{name:"linear",min:0,max:1,inverse:!0}}]}}]),angular.module("chesireApp").factory("ScalesHelper",["NoteList",function(a){var b=a,c=function(a,b){var c=!0,d={},e={};return angular.forEach(a.notes,function(a){d[a.name]=!0}),angular.forEach(b.notes,function(a){e[a.name]=!0}),angular.forEach(d,function(a,b){return e[b]?void 0:(c=!1,!1)}),angular.forEach(e,function(a,b){return d[b]?void 0:(c=!1,!1)}),c},d=function(a,b){if(!a||!b)return!1;var d=!0;if(a.length===b.length){for(var e=0;e<a.length;e++)if(!c(a[e],b[e])){d=!1;break}}else d=!1;return d},e=function(){return{name:"No name",notes:[]}};return{getAllNotes:function(){return b},isSameChord:c,isSameSetOfChords:d,getEmptyChord:e}}]),angular.module("chesireApp").constant("NoteList",[{name:"C3",freq:130.81,midi:48},{name:"C#3",freq:138.59,midi:49},{name:"D3",freq:146.83,midi:50},{name:"D#3",freq:155.56,midi:51},{name:"E3",freq:164.81,midi:52},{name:"F3",freq:174.61,midi:53},{name:"F#3",freq:185,midi:54},{name:"G3",freq:196,midi:55},{name:"G#3",freq:207.65,midi:56},{name:"A3",freq:220,midi:57},{name:"A#3",freq:233.08,midi:58},{name:"B3",freq:246.94,midi:59},{name:"C4",freq:261.63,midi:60},{name:"C#4",freq:277.18,midi:61},{name:"D4",freq:293.66,midi:62},{name:"D#4",freq:311.13,midi:63},{name:"E4",freq:329.63,midi:64},{name:"F4",freq:349.23,midi:65},{name:"F#4",freq:369.99,midi:66},{name:"G4",freq:392,midi:67},{name:"G#4",freq:415.3,midi:68},{name:"A4",freq:440,midi:69},{name:"A#4",freq:466.16,midi:70},{name:"B4",freq:493.88,midi:71},{name:"C5",freq:523.25,midi:72},{name:"C#5",freq:554.37,midi:73},{name:"D5",freq:587.33,midi:74},{name:"D#5",freq:622.25,midi:75},{name:"E5",freq:659.25,midi:76},{name:"F5",freq:698.46,midi:77},{name:"F#5",freq:739.99,midi:78},{name:"G5",freq:783.99,midi:79},{name:"G#5",freq:830.61,midi:80},{name:"A5",freq:880,midi:81},{name:"A#5",freq:932.33,midi:82},{name:"B5",freq:987.77,midi:83},{name:"C6",freq:1046.5,midi:84},{name:"C#6",freq:1108.73,midi:85},{name:"D6",freq:1174.66,midi:86},{name:"D#6",freq:1244.51,midi:87},{name:"E6",freq:1318.51,midi:88},{name:"F6",freq:1396.91,midi:89},{name:"F#6",freq:1479.98,midi:90},{name:"G6",freq:1567.98,midi:91},{name:"G#6",freq:1661.22,midi:92},{name:"A6",freq:1760,midi:93},{name:"A#6",freq:1864.66,midi:94},{name:"B6",freq:1975.53,midi:95},{name:"C7",freq:2093,midi:96},{name:"C#7",freq:2217.46,midi:97},{name:"D7",freq:2349.32,midi:98}]),function(){function a(a){function b(){l.pinky=a.getDetector("pinky"),l.thumb=a.getDetector("thumb"),l.indexFinger=a.getDetector("indexFinger"),l.ringFinger=a.getDetector("ringFinger"),l.middleFinger=a.getDetector("middleFinger")}function c(a,b,c,e){return angular.forEach(l,function(f){var h=f.updateAndGetStatus(c.fingersPulsationInfo[f.id],b,e),i=d(b.chord,a,f.id);h.justStartedPulsating?(k=b.index,g(i)):h.isPulsating?k!==b.index&&(g(i),f.reset()):g(i)}),a=h(a,b.chord)}function d(a,b,c){var d="#"+a.length,g=null;return g=j[d]?j[d]:e(a.length),f(a,g,b,c)}function e(a){if(!a)return[];for(var b=[],c=0;a>c;c++){var d,e=Math.floor(5*(c/a));switch(e){case 0:d="thumb";break;case 1:d="indexFinger";break;case 2:d="middleFinger";break;case 3:d="ringFinger";break;case 4:d="pinky"}b.push(d)}return b}function f(a,b,c,d){for(var e=[],f=0;f<b.length;f++)if(d===b[f])for(var g=0;g<c.length;g++)if(c[g].name===a[f].name){e.push(c[g]);break}return e}function g(a){for(var b=0;b<a.length;b++)a[b].gain=0;return a}function h(a,b){if(b)for(var c=0;c<a.length;c++)i(a[c],b)||(a[c].gain=0);return a}function i(a,b){if(a&&b)for(var c=0;c<b.length;c++)if(b[c].name===a.name)return!0;return!1}var j={"#1":["middleFinger"],"#2":["indexFinger","middleFinger"],"#3":["indexFinger","middleFinger","ringFinger"],"#4":["indexFinger","middleFinger","ringFinger","pinky"],"#5":["thumb","indexFinger","middleFinger","ringFinger","pinky"]},k=null,l={},m={applyNotePulsation:c};return b(),m}angular.module("chesireApp").factory("pulsateDetector",a),a.$inject=["pulsateFingerDetectorFactory"]}(),function(){function a(){function a(a){return new b(a)}var c={getDetector:a};return c}function b(a){this.init(a)}function c(a){return a.yVelocity-a.palmVelocity[1]}angular.module("chesireApp").factory("pulsateFingerDetectorFactory",a);var d=40,e={"default":{PULSATION_ON_THRESHOLD:-100,PULSATION_OFF_THRESHOLD:250}};b.prototype.init=function(a){this.id=a,this.params=e[a]||e["default"],this.reset()},b.prototype.reset=function(){this.pulsating=!1,this.movHistory=[]},b.prototype.updateAndGetStatus=function(a,b,c){var d=!1;return a.palmVelocity=c.hands[0].palmVelocity,this._addInfoToHistory(a),this._pulseStarted()?(d=!0,this.pulsating=!0):this._fingerIsGoingOff()&&(this.pulsating=!1),{justStartedPulsating:d,isPulsating:this.pulsating}},b.prototype.updateAndDetectOff=function(a,b,c){return a.palmVelocity=c.hands[0].palmVelocity,this._addInfoToHistory(a),this._fingerIsGoingOff()},b.prototype._addInfoToHistory=function(a){this.movHistory.push(a),this.movHistory.length>=d&&this.movHistory.shift()},b.prototype._pulseStarted=function(){var a,b,d,e=_.last(this.movHistory);if(e.yVelocity<0)return!1;for(var f=this.movHistory.length-2;f>=0;f--){if(a=this.movHistory[f],b=c(a)<this.params.PULSATION_ON_THRESHOLD,d=Math.abs(a.yVelocity)>Math.abs(a.xVelocity)&&Math.abs(a.yVelocity)>Math.abs(a.zVelocity),b&&d)return this._removeHistoryButLast(),!0;if(a.yVelocity>0)return this._removeHistoryButLast(),!1}return!1},b.prototype._removeHistoryButLast=function(){this.movHistory=[_.last(this.movHistory)]},b.prototype._fingerIsGoingOff=function(){var a=_.last(this.movHistory),b=a.yVelocity>this.params.PULSATION_OFF_THRESHOLD,c=Math.abs(a.yVelocity)>Math.abs(a.xVelocity)&&Math.abs(a.yVelocity)>Math.abs(a.zVelocity);return b&&c}}(),angular.module("chesireApp").factory("MultiNotesHelper",["SynthOptions","ScaleOptions",function(a,b){function c(a){for(var b=0;b<a.length;b++)a[b].unnormalizedGain=a[b].gain,a[b].gain=a[b].gain/e}function d(a){for(var b=0,c=0;c<a.length;c++)b+=a[c].gain;if(b>0)for(c=0;c<a.length;c++)a[c].unnormalizedGain=a[c].gain,a[c].gain=a[c].gain/b}var e,f=null,g=null,h=null,i=null,j=null,k=.05,l=.95,m=function(){a.getSynthOptions().then(function(b){i=b,a.subscribeToChangesInSynthOptions(n)}),b.getScaleOptions().then(function(a){j=a,b.subscribeToChangesInScaleOptions(o)})},n=function(a){i=a,q(j,i)},o=function(a){j=a,q(j,i)},p=function(){angular.forEach(f,function(a){a.gain=0})},q=function(a,b){if(a&&b){var c=a.getCurrentPart();f=[],h=c,e=h.getBiggerChordSize(),"glissando"===b.audio.transitionType?r(c):"volume"===b.audio.transitionType&&s(c),p()}},r=function(a){var b=0,c=!1;angular.forEach(a.chords,function(a,d){b<a.notes.length&&(b=a.notes.length,c=d)});for(var d=0;b>d;d++)f.push(a.chords[c].notes[d])},s=function(a){g={};var b=0;angular.forEach(a.chords,function(a){angular.forEach(a.notes,function(a){angular.isNumber(g[a.name])||(g[a.name]=b,f.push(a),b++)})})},t=function(a,b){return b>a?0:a>=b&&1-b>a?(a-b)/(1-2*b):1},u=function(a,b){var c=b.generalSoundSource.options.transitionType,d=a.x,e=null;return"glissando"===c?e=z(d):"volume"===c&&(e=w(d)),y(e),e},v=function(a,b){return f||q(a,b),f},w=function(a){var b,c=x(a),d={};p();for(var e=0;e<c.firstChord.length;e++)b=g[c.firstChord[e].name],f[b].freqToPlay=f[b].freq,f[b].gain=1-c.distanceInBetween,d[c.firstChord[e].name]=!0;for(e=0;e<c.secondChord.length;e++)b=g[c.secondChord[e].name],f[b].freqToPlay=f[b].freq,d[c.secondChord[e].name]?f[b].gain=1:f[b].gain=c.distanceInBetween;return f},x=function(a){var b=A(a,h.chords.length),c=Math.floor(b);c>=h.chords.length-1&&(c-=1);var d=b-c;d=t(d,i.audio.snapDistance);var e=h.chords[c].notes,f=h.chords[c+1].notes;return{firstChord:e,firstChordIndex:c,secondChord:f,secondChordIndex:c+1,distanceInBetween:d}},y=function(a){e?c(a):d(a)},z=function(a){var b,c,d=x(a);p();for(var e=0;e<f.length;e++)d.firstChord[e]&&d.firstChord[e].freq&&d.secondChord[e]&&d.secondChord[e].freq?(b=d.firstChord[e].freq,c=d.secondChord[e].freq,f[e].freqToPlay=b+(c-b)*d.distanceInBetween,f[e].gain=1):d.firstChord[e]&&d.firstChord[e].freq?(f[e].gain=1-d.distanceInBetween,f[e].freqToPlay=d.firstChord[e].freq):d.secondChord[e]&&d.secondChord[e].freq?(f[e].gain=d.distanceInBetween,f[e].freqToPlay=d.secondChord[e].freq):f[e].gain=0;return f},A=function(a,b){var c;return c=k>=a?0:a>=l?b-1:(b-1)*(a-k)/(l-k)},B=function(a){var b=A(a,h.chords.length),c=Math.floor(b);c>=h.chords.length-1&&(c-=1);var d=b-c;d=t(d,i.audio.snapDistance);for(var e=[],f=0;f<h.chords.length;f++){var g=0;f===c?g=1-d:f===c+1&&(g=d),e.push(g)}return e},C=function(){var a=[];if(h.chords.length>1)for(var b=(l-k)/(h.chords.length-1),c=0;c<h.chords.length;c++)a.push({middle:b*c+k});return a};return m(),{changeNotes:q,getNotesInfo:u,getNotesDefinition:v,getChordsRelevanceFromX:B,getChordsPosition:C}}]),function(){function a(a){function b(){var b=_.findIndex(a,function(a){return 220===a.freq}),c=a.slice(b,b+12);return _.map(c,function(a){return{name:a.name.substring(0,a.name.length-1),value:a}})}var c={get:b};return c}angular.module("chesireApp").factory("startingNotes",a),a.$inject=["NoteList"]}(),function(){angular.module("chesireApp").constant("chordMoods",[{name:"Major",value:{name:"Major",intervals:[!0,!1,!1,!1,!0,!1,!1,!0,!1,!1,!1,!1]}},{name:"Minor",value:{name:"Minor",intervals:[!0,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!1]}},{name:"7",value:{name:"7",intervals:[!0,!1,!1,!1,!0,!1,!1,!0,!1,!1,!0,!1]}},{name:"m7",value:{name:"m7",intervals:[!0,!1,!1,!0,!1,!1,!1,!0,!1,!1,!0,!1]}},{name:"maj7",value:{name:"maj7",intervals:[!0,!1,!1,!1,!0,!1,!1,!0,!1,!1,!1,!0]}},{name:"6",value:{name:"6",intervals:[!0,!1,!1,!1,!0,!1,!1,!0,!1,!0,!1,!1]}},{name:"m6",value:{name:"6",intervals:[!0,!1,!1,!0,!1,!1,!1,!0,!1,!0,!1,!1]}}])}(),function(){function a(){return{templateUrl:"scripts/switch-two-values/switch-two-values.html",restrict:"E",scope:{values:"=",bindModel:"=ngModel",changeCallback:"&"},controller:"SwitchTwoValuesController",controllerAs:"vm",bindToController:!0}}angular.module("chesireApp").directive("switchTwoValues",a)}(),function(){function a(a){function b(){d.bindModel||(d.bindModel=d.values[0].value)}function c(b){d.bindModel!==b&&(d.bindModel=b,angular.isFunction(d.changeCallback)&&a(d.changeCallback))}var d=this;d.selectValue=c,b()}angular.module("chesireApp").controller("SwitchTwoValuesController",a),a.$inject=["$timeout"]}(),function(){angular.module("chesireApp").constant("oscillatorTransitionTypes",[{name:"Glissando",value:"glissando"},{name:"Volume",value:"volume"}]).constant("oscillatorMidiControlModes",[{name:"Soft",value:"soft"},{name:"Pulsate chord",value:"pulsate_chord"},{name:"Pulsate notes",value:"pulsate"}])}(),function(){function a(a,b,c,d,e,f){function g(){n.transitionTypes=c,n.availableOscillators=d}function h(){o(n.oscillatorConfig)}function i(){n.oscillatorConfig.controls.gain.enabled=!n.oscillatorConfig.controls.gain.enabled,h()}function j(){b(function(){k(n.oscillatorConfig)})}function k(){e.notifyOscillatorChanged()}function l(){p()}function m(a){e.removeOscillator(a),e.notifyOscillatorChanged(),f.setActiveItem(null)}var n=this,o=_.throttle(e.notifyOscillatorChanged,500),p=_.throttle(k,500);n.oscillatorOptionsChanged=l,n.notifyOscillatorOptionsChangedThrottled=p,n.gainControllerInfoChanged=h,n.fmToggle=j,n.toggleGainControl=i,n.removeOscillator=m,g()}angular.module("chesireApp").controller("OscillatorController",a),a.$inject=["$scope","$timeout","oscillatorTransitionTypes","availableOscillators","SynthOptions","componentsList"]}(),function(){angular.module("chesireApp").component("oscillator",{templateUrl:"scripts/oscillator/oscillator.html",controller:"OscillatorController as vm",bindings:{oscillatorConfig:"="}})}(),function(){function a(){return{templateUrl:"scripts/oscillator/oscillator-snap.html",restrict:"E",scope:{componentInfo:"=",changeCallback:"&"},controller:"OscillatorSnapController",controllerAs:"vm",bindToController:!0}}angular.module("chesireApp").directive("oscillatorSnap",a)}(),function(){function a(a){function b(){a(c.changeCallback)}var c=this;c.valueChanged=b}angular.module("chesireApp").controller("OscillatorSnapController",a),a.$inject=["$timeout"]}(),function(){function a(){return{restrict:"E",templateUrl:"scripts/oscillator/oscillator-wave-selector/oscillator-wave-selector.tpl.html",controller:"OscillatorWaveSelectorController",controllerAs:"vm",bindToController:!0,scope:{config:"=",changeCallback:"&"}}}angular.module("chesireApp").directive("oscillatorWaveSelector",a)}(),function(){function a(a,b){function c(){a.$watch("vm.config",d)}function d(a){if(a){g.realPeriodicTableValues=[];for(var b=0;b<a.realPeriodicTable.length;b++)g.realPeriodicTableValues.push({value:a.realPeriodicTable[b]+""});for(g.imaginaryPeriodicTableValues=[],b=0;b<a.imaginaryPeriodicTable.length;b++)g.imaginaryPeriodicTableValues.push({value:a.imaginaryPeriodicTable[b]+""})}}function e(a){b(function(){g.config.realPeriodicTable[a]=parseFloat(g.realPeriodicTableValues[a].value),g.changeCallback()})}function f(a){b(function(){g.config.imaginaryPeriodicTable[a]=parseFloat(g.imaginaryPeriodicTableValues[a].value),g.changeCallback()})}var g=this;g.realValueChanged=e,g.imaginaryValueChanged=f,c()}angular.module("chesireApp").controller("OscillatorWaveSelectorController",a),a.$inject=["$scope","$timeout"]}(),function(){function a(a,b){function c(c){a.removeNoise(c),a.notifyOscillatorChanged(),b.setActiveItem(null)}function d(){f.noiseConfig.controls.gain.enabled=!f.noiseConfig.controls.gain.enabled,e()}function e(){g(f.noiseConfig)}var f=this,g=_.throttle(a.notifyOscillatorChanged,500);f.toggleGainControl=d,f.gainControllerInfoChanged=e,f.removeNoise=c}angular.module("chesireApp").controller("NoiseGeneratorController",a),a.$inject=["SynthOptions","componentsList"]}(),function(){angular.module("chesireApp").component("noiseGenerator",{bindings:{noiseConfig:"="},templateUrl:"scripts/noise-generator/noise-generator.tpl.html",controller:"NoiseGeneratorController as vm"})}(),function(){function a(){return{restrict:"E",templateUrl:"scripts/oscillator/oscillator-fm/oscillator-fm.tpl.html",scope:{component:"=",changeCallback:"&"},controller:"OscillatorFmController",controllerAs:"vm",bindToController:!0}}angular.module("chesireApp").directive("oscillatorFm",a)}(),function(){function a(){function a(){angular.isFunction(d.changeCallback)&&d.changeCallback()}function b(){d.component.controls.depth.enabled=!d.component.controls.depth.enabled,a()}function c(){d.component.preModulator.enabled=!d.component.preModulator.enabled,a()}var d=this;d.componentChanged=a,d.toggleDepthControl=b,d.togglePreModulator=c}angular.module("chesireApp").controller("OscillatorFmController",a)}(),function(){function a(a,b,c,d,e){function f(){k.componentInfo=a.componentInfo,delete a.componentInfo}function g(){d.notifyComponentChanged(k.componentInfo)}function h(){k.componentInfo.controls.rate.enabled=!k.componentInfo.controls.rate.enabled,k.notifyOptionsChangedThrottled()}function i(){k.componentInfo.controls.depth.enabled=!k.componentInfo.controls.depth.enabled,k.notifyOptionsChangedThrottled()}function j(){d.removeComponent(k.componentInfo),d.notifyOscillatorChanged(),e.setActiveItem(null)}var k=this,l=_.throttle(g,500);k.availableOscillators=c,k.notifyOptionsChangedThrottled=l,k.toggleRate=h,k.toggleDepth=i,k.removeComponent=j,f()}angular.module("chesireApp").controller("TremoloController",a),a.$inject=["$scope","$timeout","availableSimpleOscillators","SynthOptions","componentsList"]}(),function(){function a(){return{templateUrl:"scripts/tremolo/tremolo.tpl.html",restrict:"E",controller:"TremoloController",controllerAs:"vm"}}angular.module("chesireApp").directive("tremolo",a)}(),function(){function a(a,b,c,d){function e(){l.componentInfo=a.componentInfo,delete a.componentInfo}function f(){j()}function g(){l.componentInfo.controls.freq.enabled=!l.componentInfo.controls.freq.enabled,j()}function h(){l.componentInfo.controls.q.enabled=!l.componentInfo.controls.q.enabled,j()}function i(){l.componentInfo.controls.gain.enabled=!l.componentInfo.controls.gain.enabled,j()}function j(){c.notifyComponentChanged(l.componentInfo)}function k(){c.removeComponent(l.componentInfo),c.notifyOscillatorChanged(),d.setActiveItem(null)}var l=this;l.FREQ_STEP=5,l.Q_STEP=.1,l.availableEqTypes=b,l.eqTypeChanged=f,l.toggleFrequency=g,l.toggleQ=h,l.toggleGain=i,l.notifyOptionsChanged=j,l.removeComponent=k,e()}angular.module("chesireApp").controller("EqualizerController",a),
a.$inject=["$scope","availableEqTypes","SynthOptions","componentsList"]}(),function(){function a(){return{restrict:"E",templateUrl:"scripts/equalizer/equalizer.tpl.html",controller:"EqualizerController",controllerAs:"vm"}}angular.module("chesireApp").directive("equalizer",a)}(),function(){function a(a,b,c){function d(){h.componentInfo=a.componentInfo,delete a.componentInfo}function e(){h.componentInfo.controls.amount.enabled=!h.componentInfo.controls.amount.enabled,f()}function f(){b.notifyComponentChanged(h.componentInfo)}function g(){b.removeComponent(h.componentInfo),b.notifyOscillatorChanged(),c.setActiveItem(null)}var h=this;h.toggleAmount=e,h.notifyOptionsChanged=f,h.removeComponent=g,d()}angular.module("chesireApp").controller("DistortionController",a),a.$inject=["$scope","SynthOptions","componentsList"]}(),function(){function a(){return{restrict:"E",templateUrl:"scripts/distortion/distortion.tpl.html",controller:"DistortionController",controllerAs:"vm"}}angular.module("chesireApp").directive("distortion",a)}(),function(){function a(a,b,c){function d(){i.componentInfo=a.componentInfo,delete a.componentInfo}function e(){i.componentInfo.controls.delay.enabled=!i.componentInfo.controls.delay.enabled,g()}function f(){i.componentInfo.controls.feedback.enabled=!i.componentInfo.controls.feedback.enabled,g()}function g(){b.notifyComponentChanged(i.componentInfo)}function h(){b.removeComponent(i.componentInfo),b.notifyOscillatorChanged(),c.setActiveItem(null)}var i=this;i.DELAY_STEP=.01,i.toggleDelay=e,i.toggleFeedback=f,i.notifyOptionsChanged=g,i.removeComponent=h,d()}angular.module("chesireApp").controller("DelayController",a),a.$inject=["$scope","SynthOptions","componentsList"]}(),function(){function a(){return{restrict:"E",templateUrl:"scripts/delay/delay.tpl.html",controller:"DelayController",controllerAs:"vm"}}angular.module("chesireApp").directive("delay",a)}(),function(){function a(a){var b=this;b.soundMuter=a}angular.module("chesireApp").controller("SoundMuterController",a),a.$inject=["soundMuter"]}(),function(){angular.module("chesireApp").component("soundMuter",{templateUrl:"scripts/sound-muter/sound-muter.tpl.html",controller:"SoundMuterController as vm"})}(),function(){function a(a,b,c){function d(){l=!0,k=!1,m=!1,b.on("TOGGLE_MUTE",f),c.subscribeToFrameChange(g)}function e(){return k||l||m}function f(){k=!k}function g(b){if(b&&b.frame){var c=h(b.frame),d=i(b.frame);(l!==c||m!==d)&&(l=c,m=d,a(function(){l=c,m=d}))}else l=!0}function h(a){return a&&a.hands&&a.hands.length?!1:!0}function i(a){return a.hands.length>0&&a.hands[0].grabStrength>=n?!0:!1}function j(){return k?"space":l?"noHands":m?"fist":!1}var k,l,m,n=.9,o={init:d,isMuted:e,getMuteType:j};return o}angular.module("chesireApp").factory("soundMuter",a),a.$inject=["$timeout","hotKeys","Leapmotion"]}(),angular.module("chesireApp").directive("midigenerator",function(){return{restrict:"E",templateUrl:"scripts/midi/midi-generator.html",scope:{},controller:"MidigeneratorCtrl"}}),angular.module("chesireApp").controller("MidigeneratorCtrl",["$scope","$timeout","$window","$q","MidiApiMediator","Leapmotion","MultiNotesHelper","SynthOptions","MotionParamsHelper","CurrentMidiOutput",function(a,b,c,d,e,f,g,h,i,j){function k(){h.unsubscribeToChangesInSynthOptions(q)}var l=null,m={},n=!1,o=1,p=function(){var b=h.getSynthOptions();d.all([e,b]).then(function(b){var c=b[0];a.midiOutputs=c.outputs(),j.setCurrentOutput(a.midiOutputs[0]),h.subscribeToChangesInSynthOptions(q),a.$on("$destroy",k),f.subscribeToFrameChange(r)})},q=function(a){a&&(j.getCurrentOutput().resetEverything(),l=a,l.isMidiOutput()?n=!0:(w(),n=!1))},r=function(a){if(n){var b=s(a.frame);t(b,a.frame)}},s=function(a){var b=[];if(a&&a.hands&&a.hands.length){var c=f.getRelativePositions(a,a.hands),d=l.midi;b=g.getNotesInfo(c,d,a)}else w();return b},t=function(a,b){var c=[],d=[],e=[];angular.forEach(a,function(a){a.gain?m[a.name]?e.push(a):(c.push(a),m[a.name]=a):m[a.name]&&(d.push(a),m[a.name]=!1)}),j.getCurrentOutput().notesOff(d),j.getCurrentOutput().notesOn(c),j.getCurrentOutput().keyPressureChanges(e),u(b),v(b)},u=function(a){if(a&&!_.isEmpty(a.hands)){var b=f.getRelativePositions(a,a.hands),c=o,d=l.midi;d.controls&&d.controls.gain&&(c=i.getParamValue(d.controls.gain,b)),j.getCurrentOutput().updateMainVolume(c)}},v=function(a){if(a&&!_.isEmpty(a.hands)){var b=f.getRelativePositions(a,a.hands);angular.forEach(l.getActiveControls(),function(a){var c=i.getParamValue(a,b);j.getCurrentOutput().updateControl(a,c)})}},w=function(){_.isEmpty(m)||(j.getCurrentOutput().allOff(_.toArray(m)),m={})};p()}]),angular.module("chesireApp").factory("MidiApiMediator",["$q","MidiAccess",function(a,b){var c=a.defer(),d=function(){navigator.requestMIDIAccess?navigator.requestMIDIAccess({sysex:!1}).then(function(a){c.resolve(new b(a))},e):e()},e=function(){throw"No MIDI support in your browser."};return d(),c.promise}]).factory("MidiAccess",["MidiOutput",function(a){var b=function(a){if(!a)throw"Error creating MidiAccess object: we need the JazzMidi object";this.nativeMidiAccess=a};return b.prototype.outputs=function(){var b=[];return this.nativeMidiAccess.outputs.forEach(function(c){b.push(new a(this,c))}),b},b}]).service("MidiOutput",["MidiMessagesHelper",function(a){var b=null,c=function(a,c){this.id=c.id,this.name=c.name,b=c},d=function(a){b.send(a)};return c.prototype.send=d,c.prototype.notesOff=function(b){angular.forEach(b,function(b){b&&d(a.getNoteOff(b))})},c.prototype.notesOn=function(b){angular.forEach(b,function(b){d(a.getNoteOn(b))})},c.prototype.keyPressureChanges=function(b){angular.forEach(b,function(b){d(a.getKeyPressureChange(b))})},c.prototype.allOff=function(b){angular.forEach(b,function(b){b&&d(a.getNoteOff(b))})},c.prototype.updateMainVolume=function(b){d(a.getMainVolume(b))},c.prototype.updateControl=function(b,c){d(a.getControl(b,c))},c.prototype.resetEverything=function(){d(a.getResetControls()),d(a.getResetNotes())},c.prototype.pingControl=function(b){d(a.getPingControl(b))},c}]),angular.module("chesireApp").factory("MidiMessagesHelper",function(){var a=0,b=function(a){return parseInt(Math.floor(127*a),10)},c=function(){return 144+a},d=function(){return 128+a},e=function(){return 160+a},f=function(){return 176+a},g=function(a){var d=c(),e=b(a.unnormalizedGain);return 0>=e&&(e=1),[d,a.midi,e]},h=function(a){var c=e();return[c,a.midi,b(a.unnormalizedGain)]},i=function(a){var b=d();return[b,a.midi,0]},j=function(){return[123]},k=function(a){var c=f();return[c,7,b(a)]},l=function(a){var b=0,c=1,d=a.midi,e=45,f=50,g=50;return[240,127,0,8,2,b,c,d,e,f,g,247]},m=function(a,c){return[f(),a.number,b(c)]},n=function(){var a=f();return[a,121,0]},o=function(){var a=f();return[a,123,0]},p=function(a){return[f(),a,80]};return{getNoteOn:g,getNoteOff:i,getKeyPressureChange:h,getAllNotesOff:j,getMainVolume:k,getNoteTune:l,getControl:m,getResetControls:n,getResetNotes:o,getPingControl:p}}),angular.module("chesireApp").directive("testmidi",function(){return{restrict:"E",templateUrl:"scripts/midi/testmidi.html",scope:{},controller:["$scope","$q","SynthOptions","MidiApiMediator","MidiMessagesHelper",function(a,b,c,d,e){var f=null,g=c.getSynthOptions();b.all([d,g]).then(function(b){var d=b[0],e=b[1];a.midiOutputs=d.outputs(),a.selectedMidiOutput=a.midiOutputs[0],h(e),c.subscribeToChangesInSynthOptions(h)});var h=function(a){f=a};a.start=function(){var b={midi:69,unnormalizedGain:0},c=e.getNoteOn(b);a.selectedMidiOutput.send(c)},a.start2=function(){var b={midi:75,unnormalizedGain:.2},c=e.getNoteOn(b);a.selectedMidiOutput.send(c)},a.middle=function(b){var c={midi:69,unnormalizedGain:parseFloat(b)},d=e.getKeyPressureChange(c);a.selectedMidiOutput.send(d)},a.end=function(){var b={midi:69},c=e.getNoteOff(b);a.selectedMidiOutput.send(c)},a.end2=function(){var b={midi:75},c=e.getNoteOff(b);a.selectedMidiOutput.send(c)},a.tune=function(){var b={midi:69},c=e.getNoteTune(b);a.selectedMidiOutput.send(c)},a.control=function(){var b={midi:69},c=e.getControl(b);a.selectedMidiOutput.send(c)}}]}}),angular.module("chesireApp").constant("MidiControlMessages",[{name:"Bank Select",number:0},{name:"Modulation Wheel or Lever",number:1},{name:"Breath Controller",number:2},{name:"Undefined (3)",number:3},{name:"Foot Controller",number:4},{name:"Portamento Time",number:5},{name:"Data Entry MSB",number:6},{name:"Channel Volume (formerly Main Volume)",number:7},{name:"Balance",number:8},{name:"Undefined (9)",number:9},{name:"Pan",number:10},{name:"Expression Controller",number:11},{name:"Effect Control 1",number:12},{name:"Effect Control 2",number:13},{name:"Undefined (14)",number:14},{name:"Undefined (15)",number:15},{name:"General Purpose Controller 1",number:16},{name:"General Purpose Controller 2",number:17},{name:"General Purpose Controller 3",number:18},{name:"General Purpose Controller 4",number:19},{name:"Undefined (20)",number:20},{name:"Undefined (21)",number:21},{name:"Undefined (22)",number:22},{name:"Undefined (23)",number:23},{name:"Undefined (24)",number:24},{name:"Undefined (25)",number:25},{name:"Undefined (26)",number:26},{name:"Undefined (27)",number:27},{name:"Undefined (28)",number:28},{name:"Undefined (29)",number:29},{name:"Undefined (30)",number:30},{name:"Undefined (31)",number:31},{name:"Damper Pedal on/off (Sustain)",number:64},{name:"Portamento On/Off",number:65},{name:"Sostenuto On/Off",number:66},{name:"Soft Pedal On/Off",number:67},{name:"Legato Footswitch",number:68},{name:"Hold 2",number:69},{name:"Sound Controller 1 (default: Sound Variation)",number:70},{name:"Sound Controller 2 (default: Timbre/Harmonic Intens.)",number:71},{name:"Sound Controller 3 (default: Release Time)",number:72},{name:"Sound Controller 4 (default: Attack Time)",number:73},{name:"Sound Controller 5 (default: Brightness)",number:74},{name:"Sound Controller 6 (default: Decay Time)",number:75},{name:"Sound Controller 7 (default: Vibrato Rate)",number:76},{name:"Sound Controller 8 (default: Vibrato Depth)",number:77},{name:"Sound Controller 9 (default: Vibrato Delay)",number:78},{name:"Sound Controller 10 (default undefined)",number:79}]),angular.module("chesireApp").factory("CurrentMidiOutput",["$q",function(a){var b=null,c=a.defer(),d=!1,e=function(){if(b)return b;throw"MIDIOUTPUT: Error, trying to access current midi output when there is none"},f=function(a){b=a,!d&&a&&(d=!0,c.resolve(a))},g=function(){return c.promise};return{getCurrentOutput:e,setCurrentOutput:f,whenReady:g}}]),function(){function a(){return{templateUrl:"scripts/controls-hud/controls-hud.html",restrict:"E",scope:{},controller:"ControlsHudController",controllerAs:"vm"}}angular.module("chesireApp").directive("controlsHud",a)}(),function(){function a(a,b,c){function d(){b.subscribeToChangesInSynthOptions(e),a.$on("$destroy",g)}function e(a){h.controls=a.getActiveControls(),h.volumeControl=a.audio.controls.gain}function f(a){return _.findWhere(c,{number:a.number})}function g(){b.unsubscribeToChangesInSynthOptions(e)}var h=this;h.getMidiParamFromOptions=f,d()}angular.module("chesireApp").controller("ControlsHudController",a),a.$inject=["$scope","SynthOptions","MidiControlMessages"]}(),function(){function a(a){function b(b,c){var d=angular.element(c[0].querySelector(".js-single-control-hud-value-inner")),e=angular.element(c[0].querySelector(".js-single-control-hud-text"));b.vm.updateOutputValue=function(b){e.html(b),a(function(){var a="translate3d("+(b-100)+"%, 0, 0)";d.css({"-webkit-transform":a,"-moz-transform":a,msTransform:a,transform:a})})}}return{templateUrl:"scripts/controls-hud/single-control-hud.html",restrict:"E",scope:{controlInfo:"=",relatedParam:"@"},controller:"SingleControlHudController",controllerAs:"vm",bindToController:!0,link:b}}angular.module("chesireApp").directive("singleControlHud",a),a.$inject=["requestanimationframe"]}(),function(){function a(a,b,c){function d(){b.subscribeToFrameChange(e),a.$on("$destroy",f)}function e(a){var d=a.frame;if(d&&!_.isEmpty(d.hands)){var e=b.getRelativePositions(d,d.hands);g.outputValue=Math.round(100*c.getParamValue(g.controlInfo,e)),g.updateOutputValue(g.outputValue)}}function f(){b.unsubscribeToFrameChange(e)}var g=this;d()}angular.module("chesireApp").controller("SingleControlHudController",a),a.$inject=["$scope","Leapmotion","MotionParamsHelper"]}(),function(){function a(){return{restrict:"E",templateUrl:"scripts/helper-visuals/helper-visuals.html",scope:{},controller:"HelperVisualsController",controllerAs:"vm"}}angular.module("chesireApp").directive("helperVisuals",a)}(),function(){function a(a){function b(){a.subscribeToFrameChange(c)}function c(b){var c=b.frame;if(c&&!_.isEmpty(c.hands)){var e=a.getRelativePositions(c,c.hands);d("pulsateX",e.fingersPulsationInfo.indexFinger.xVelocity),d("pulsateY",e.fingersPulsationInfo.indexFinger.yVelocity),d("pulsateZ",e.fingersPulsationInfo.indexFinger.zVelocity)}}function d(a,b){f.motionsTracked[a]=f.motionsTracked[a]||{name:a};var c=f.motionsTracked[a];c.actualValue=b,c.allValues=c.allValues||[],c.allValues.push(b),c.allValues.length>=e&&c.allValues.shift();for(var d=c.allValues[0],g=c.allValues[0],h=0;h<c.allValues.length;h++)c.allValues[h]<g&&(g=c.allValues[h]),c.allValues[h]>d&&(d=c.allValues[h]);c.min=g,c.max=d}var e=100,f=this;b(),f.motionsTracked={}}angular.module("chesireApp").controller("HelperVisualsController",a),a.$inject=["Leapmotion"]}(),function(){function a(a,b,c,d){function e(e,g){g=g||f,b.getSynthOptions().then(function(b){if(b.isAudioOutput()){var f=c.getCurrentSynth();f.playNote(e,g)}else if(b.isMidiOutput()){var h=angular.extend({},e,{unnormalizedGain:1});d.getCurrentOutput().notesOn([h]),a(function(){d.getCurrentOutput().notesOff([h])},g)}})}var f=1e3,g={playNote:e};return g}angular.module("chesireApp").factory("soundPlayer",a),a.$inject=["$timeout","SynthOptions","CurrentSynth","CurrentMidiOutput"]}(),function(){function a(){return{restrict:"E",templateUrl:"scripts/neural-trainer/neural-trainer.html",scope:{},controller:"NeuralTrainerController",controllerAs:"vm"}}angular.module("chesireApp").directive("neuralTrainer",a)}(),function(){function a(a,b){function c(){var a=b.get("lastNeuralNetwork");a&&(p.neuralNetwork=Network.fromJSON(a),p.stringNetwork=a)}function d(){p.show=!p.show}function e(){p.recording=!0,a.subscribeToFrameDeviceChange(j),q=[],r=[],p.neuralNetwork=null,s=s||angular.element(document.body),s.on("keyup",l)}function f(){p.recording=!1,a.unsubscribeToFrameDeviceChange(j),s.off("keyup",l),m()}function g(){p.testing=!0,a.subscribeToFrameDeviceChange(i)}function h(){p.testing=!1,p.isActive=!1,a.unsubscribeToFrameDeviceChange(i)}function i(a){var b=k(a);p.output=p.neuralNetwork.activate(b.params)[0],p.output>.5&&console.log(p.output)}function j(a){var b=k(a);q.push(b)}function k(b){var c=(new Date).getTime(),d=!1;b.frame.hands&&b.frame.hands[0]&&(d=a.getRelativePositions(b.frame,b.frame.hands));var e={time:c,params:[d?d.fingersPulsationInfo.middleFinger.xVelocity:0,d?d.fingersPulsationInfo.middleFinger.yVelocity:0,d?d.fingersPulsationInfo.middleFinger.zVelocity:0,d?d.fingersDirectionInfo.middleFinger.xDirection:0,d?d.fingersDirectionInfo.middleFinger.yDirection:0,d?d.fingersDirectionInfo.middleFinger.zDirection:0]};return e}function l(){r.push({time:(new Date).getTime()})}function m(){for(var a=[],c=0;c<q.length;c++)q[c].output=n(q[c]),a.push({input:q[c].params,output:[q[c].output]});console.log("Started Training!"),p.neuralNetwork=new Architect.LSTM(6,8,8,1);var d=new Trainer(p.neuralNetwork);d.train(a,{iterations:2e4,error:.005,log:1e3}),console.log("Finished Training!"),p.stringNetwork=p.neuralNetwork.toJSON(),b.set("lastNeuralNetwork",p.stringNetwork)}function n(a){for(var b=0;b<r.length;b++){var c=Math.abs(r[b].time-a.time);if(o>c)return 1}return 0}var o=15,p=this,q=[],r=[],s=null;p.toggleShow=d,p.startRecording=e,p.stopRecording=f,p.startTesting=g,p.stopTesting=h,p.show=!1,p.recording=!1,c()}angular.module("chesireApp").controller("NeuralTrainerController",a),a.$inject=["Leapmotion","localStorageService"]}(),function(){function a(){function a(){var a='{"neurons":[{"trace":{"elegibility":{},"extended":{}},"state":0,"old":0,"activation":0,"bias":0,"layer":"input","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":0,"old":0,"activation":0,"bias":0,"layer":"input","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":0,"old":0,"activation":0,"bias":0,"layer":"input","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":0,"old":0,"activation":0,"bias":0,"layer":"input","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":0,"old":0,"activation":0,"bias":0,"layer":"input","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":0,"old":0,"activation":0,"bias":0,"layer":"input","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":-0.7513478942900643,"old":-0.7513478942900643,"activation":0.3205276723665051,"bias":1.0020319224747458,"layer":"0","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":2.943314468538296,"old":2.943314468538296,"activation":0.9499465587079093,"bias":1.0175059893600835,"layer":"0","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":-1.9692446930868517,"old":-1.9692446930868517,"activation":0.12247003736445652,"bias":0.8545279850663053,"layer":"0","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":10.12088000521589,"old":10.12088000521589,"activation":0.9999597709117266,"bias":0.9936340133717487,"layer":"0","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":-244.67226801925707,"old":-244.67226801925707,"activation":5.497739078603891e-107,"bias":1.2888597500111545,"layer":"0","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":4.586939673966887,"old":4.586939673966887,"activation":0.9899186907987825,"bias":1.036268717744226,"layer":"0","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":0.8632815705815764,"old":0.8632815705815764,"activation":0.7033458122105133,"bias":1.0326699471743397,"layer":"0","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":13.109133419401324,"old":13.109133419401324,"activation":0.9999979733683849,"bias":9.890239234633697,"layer":"0","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":53.08353350406816,"old":53.08353350406816,"activation":1,"bias":1.0092844251968816,"layer":"1","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":5.329081538780999,"old":5.329081538780999,"activation":0.9951748735809955,"bias":1.1128179496409722,"layer":"1","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":2.558837713828838,"old":2.558837713828838,"activation":0.9281650011725442,"bias":1.1101445351461534,"layer":"1","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":13.781449869845842,"old":13.781449869845842,"activation":0.9999989653536749,"bias":1.0174526184361237,"layer":"1","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":15.052479720355299,"old":15.052479720355299,"activation":0.9999997097374592,"bias":3.0310222466502075,"layer":"1","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":2.591689141704494,"old":2.591689141704494,"activation":0.9303247878819201,"bias":1.1278973701928285,"layer":"1","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":1.4336413854156906,"old":1.4336413854156906,"activation":0.8074680518106467,"bias":0.9240748710366624,"layer":"1","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":4.447291176725959,"old":4.447291176725959,"activation":0.9884252975714154,"bias":1.218381045157724,"layer":"1","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":122245.5501757721,"old":122230.78501097602,"activation":1,"bias":14.765164796089968,"layer":"2","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":1834.0806560345618,"old":1823.9215402931777,"activation":1,"bias":18.95976775164394,"layer":"2","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":1401.4496222553053,"old":1401.4967801338228,"activation":1,"bias":100.6293616790788,"layer":"2","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":2406.429240794507,"old":2387.9194819333866,"activation":1,"bias":18.512229513237504,"layer":"2","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":457412.31191701395,"old":457376.61333793204,"activation":1,"bias":35.83133837982871,"layer":"2","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":233.7762579833542,"old":233.77479318701418,"activation":1,"bias":16.2897730995055,"layer":"2","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":28.978440094023824,"old":28.978440094017994,"activation":0.99999999999974,"bias":5.5792755267955805,"layer":"2","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":1071.142396094601,"old":1095.3301536611036,"activation":1,"bias":-11.509636976819468,"layer":"2","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":11.687649732039391,"old":11.687649732039391,"activation":0.9999916031853208,"bias":2.4332480092040916,"layer":"3","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":5.4556273277491725,"old":5.4556273277491725,"activation":0.9957459781407595,"bias":1.657689182659368,"layer":"3","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":-7.491824451504888,"old":-7.491824451504888,"activation":0.0005573139006988736,"bias":-0.7931299900143001,"layer":"3","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":10.613587218103026,"old":10.613587218103026,"activation":0.9999754208441546,"bias":2.2748077566405587,"layer":"3","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":17.372785072649556,"old":17.372785072649556,"activation":0.9999999714835607,"bias":2.916355304733626,"layer":"3","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":21.08959669824253,"old":21.08959669824253,"activation":0.9999999993067266,"bias":3.6812734027722054,"layer":"3","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":8.977478544452794,"old":8.977478544452794,"activation":0.9998737952231559,"bias":1.9044131956080745,"layer":"3","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":70.88459264118079,"old":70.88459264118079,"activation":1,"bias":8.924837068337995,"layer":"3","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":-10.640490779739073,"old":-10.640490779739073,"activation":0.000023926720601429836,"bias":1.0748823643626446,"layer":"4","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":13.587016413128834,"old":13.587016413128834,"activation":0.9999987432954124,"bias":1.0020262510595501,"layer":"4","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":-579.0403883427348,"old":-579.0403883427348,"activation":3.357024753826584e-252,"bias":1.902083897556634,"layer":"4","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":-4.745772292344981,"old":-4.745772292344981,"activation":0.008613512263627448,"bias":2.4530460850788876,"layer":"4","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":0.538000849121,"old":0.538000849121,"activation":0.6313472418653056,"bias":0.9618555950704818,"layer":"4","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":-3.2704164741386235,"old":-3.2704164741386235,"activation":0.03660014032447504,"bias":1.0185355906976825,"layer":"4","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":-3035.670729014858,"old":-3035.670729014858,"activation":0,"bias":5.181499125668227,"layer":"4","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":-0.2653184134230887,"old":-0.2653184134230887,"activation":0.4340567767305366,"bias":1.0144917435281262,"layer":"4","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":0.8813941133032088,"old":0.8813941133032088,"activation":0.707111032301015,"bias":0.9933068799673465,"layer":"5","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":-5.17644148490691,"old":-5.17644148490691,"activation":0.005616347913292655,"bias":0.2435662451212498,"layer":"5","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":9.001145705643665,"old":9.001145705643665,"activation":0.9998767466995055,"bias":1.0409991245537231,"layer":"5","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":34.53604838874713,"old":34.53604838874713,"activation":0.9999999999999989,"bias":1.0186299362156652,"layer":"5","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":2.7627344053316616,"old":2.7627344053316616,"activation":0.940628525115296,"bias":1.0266688126298296,"layer":"5","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":2.3498262130857888,"old":2.3498262130857888,"activation":0.912920413059267,"bias":1.0828123624540589,"layer":"5","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":2.425368050915193,"old":2.425368050915193,"activation":0.9187414016975616,"bias":1.0900435362110559,"layer":"5","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":151.48117717246504,"old":151.48117717246504,"activation":1,"bias":1.0545797605810023,"layer":"5","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":69.62001745420939,"old":69.62001745420939,"activation":1,"bias":20.390440920222,"layer":"6","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":21.75971435456492,"old":21.75971435456492,"activation":0.9999999996452877,"bias":17.866871761559523,"layer":"6","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":10453.8428456103,"old":10483.216655305378,"activation":1,"bias":-28.081718642514435,"layer":"6","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":133197.8423992016,"old":133146.2811781658,"activation":1,"bias":51.627538751173404,"layer":"6","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":565.5925172078797,"old":569.4276725536442,"activation":1,"bias":17.32383433495094,"layer":"6","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":76.18567264549156,"old":76.1940085524169,"activation":1,"bias":6.556124370208285,"layer":"6","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":152.25535652571526,"old":152.25610601966136,"activation":1,"bias":12.371368264199056,"layer":"6","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":1883.3780650309786,"old":1868.8460201497792,"activation":1,"bias":7.711659895466425,"layer":"6","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":44.48131228838476,"old":44.48131228838476,"activation":1,"bias":4.7998076769148845,"layer":"7","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":94.20071800868588,"old":94.20071800868588,"activation":1,"bias":7.8737402179453575,"layer":"7","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":124.98055685193992,"old":124.98055685193992,"activation":1,"bias":10.43577378714442,"layer":"7","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":547.6636751292124,"old":547.6636751292124,"activation":1,"bias":61.58262788636131,"layer":"7","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":48.53940638302853,"old":48.53940638302853,"activation":1,"bias":3.9508875527203697,"layer":"7","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":67.33793252186149,"old":67.33793252186149,"activation":1,"bias":5.394393298749872,"layer":"7","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":14.810447993912401,"old":14.810447993912401,"activation":0.99999963025356,"bias":1.9666952877298958,"layer":"7","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":25.41501402805339,"old":25.41501402805339,"activation":0.9999999999908293,"bias":3.791702109330663,"layer":"7","squash":"LOGISTIC"},{"trace":{"elegibility":{},"extended":{}},"state":-102027.78384918594,"old":-102027.78384918594,"activation":0,"bias":2405.6720174368797,"layer":"output","squash":"LOGISTIC"}],"connections":[{"from":"0","to":"22","weight":452.5791423218088,"gater":"6"},{"from":"0","to":"23","weight":12.274394091823362,"gater":"7"},{"from":"0","to":"24","weight":19.891494196095977,"gater":"8"},{"from":"0","to":"25","weight":-36.24922894491013,"gater":"9"},{"from":"0","to":"26","weight":34.371151840371056,"gater":"10"},{"from":"0","to":"27","weight":-0.6521738094306938,"gater":"11"},{"from":"0","to":"28","weight":13.299247456436293,"gater":"12"},{"from":"0","to":"29","weight":8.832446070803309,"gater":"13"},{"from":"0","to":"6","weight":15.84293515600388,"gater":null},{"from":"0","to":"7","weight":-15.162002663609627,"gater":null},{"from":"0","to":"8","weight":7.9885252235534345,"gater":null},{"from":"0","to":"9","weight":-225.57503589180857,"gater":null},{"from":"0","to":"10","weight":-908.7940438290134,"gater":null},{"from":"0","to":"11","weight":-84.43725636311876,"gater":null},{"from":"0","to":"12","weight":-0.6754482952710654,"gater":null},{"from":"0","to":"13","weight":2.7931181374448735,"gater":null},{"from":"0","to":"14","weight":-114.53341617770589,"gater":null},{"from":"0","to":"15","weight":-8.166793769109237,"gater":null},{"from":"0","to":"16","weight":-7.158656853436401,"gater":null},{"from":"0","to":"17","weight":-24.504338517129465,"gater":null},{"from":"0","to":"18","weight":36.071993687227554,"gater":null},{"from":"0","to":"19","weight":-2.1552580795877696,"gater":null},{"from":"0","to":"20","weight":-5.750105005242353,"gater":null},{"from":"0","to":"21","weight":-21.87368097861477,"gater":null},{"from":"0","to":"30","weight":-39.26453981268983,"gater":null},{"from":"0","to":"31","weight":82.84471870220393,"gater":null},{"from":"0","to":"32","weight":161.34299741388526,"gater":null},{"from":"0","to":"33","weight":235.87113135139057,"gater":null},{"from":"0","to":"34","weight":-129.017968322522,"gater":null},{"from":"0","to":"35","weight":-253.1851998142736,"gater":null},{"from":"0","to":"36","weight":-392.0092208766641,"gater":null},{"from":"0","to":"37","weight":780.9834153428245,"gater":null},{"from":"0","to":"54","weight":399.5342430995433,"gater":"38"},{"from":"0","to":"55","weight":-80.31609475861849,"gater":"39"},{"from":"0","to":"56","weight":50.78294996308306,"gater":"40"},{"from":"0","to":"57","weight":240.68245631593018,"gater":"41"},{"from":"0","to":"58","weight":277.7314058018269,"gater":"42"},{"from":"0","to":"59","weight":60.33282863637939,"gater":"43"},{"from":"0","to":"60","weight":13.795015755968192,"gater":"44"},{"from":"0","to":"61","weight":-171.33515299456872,"gater":"45"},{"from":"0","to":"38","weight":252.2282042519542,"gater":null},{"from":"0","to":"39","weight":-59.38683807390844,"gater":null},{"from":"0","to":"40","weight":1661.5525118875241,"gater":null},{"from":"0","to":"41","weight":10.3441455041167,"gater":null},{"from":"0","to":"42","weight":5.367070422720577,"gater":null},{"from":"0","to":"43","weight":-63.57185149519993,"gater":null},{"from":"0","to":"44","weight":-6658.166441509272,"gater":null},{"from":"0","to":"45","weight":-33.65455307662963,"gater":null},{"from":"0","to":"46","weight":-4.04093195755059,"gater":null},{"from":"0","to":"47","weight":-89.72558200405699,"gater":null},{"from":"0","to":"48","weight":-73.28273019536087,"gater":null},{"from":"0","to":"49","weight":-187.52047994950357,"gater":null},{"from":"0","to":"50","weight":-5.2407288774785385,"gater":null},{"from":"0","to":"51","weight":3.017093801855952,"gater":null},{"from":"0","to":"52","weight":12.224595233231774,"gater":null},{"from":"0","to":"53","weight":-1712.2879575015254,"gater":null},{"from":"0","to":"62","weight":-1157.6930479723271,"gater":null},{"from":"0","to":"63","weight":-50.11400720320048,"gater":null},{"from":"0","to":"64","weight":924.9763755981908,"gater":null},{"from":"0","to":"65","weight":-266.3505582351915,"gater":null},{"from":"0","to":"66","weight":353.4177690489814,"gater":null},{"from":"0","to":"67","weight":-761.5841502575034,"gater":null},{"from":"0","to":"68","weight":52.04456434187792,"gater":null},{"from":"0","to":"69","weight":-673.955585492525,"gater":null},{"from":"0","to":"70","weight":70.4386914224277,"gater":null},{"from":"1","to":"22","weight":729.0772445200196,"gater":"6"},{"from":"1","to":"23","weight":10.598330004846677,"gater":"7"},{"from":"1","to":"24","weight":-18.600260951076816,"gater":"8"},{"from":"1","to":"25","weight":25.365691210090052,"gater":"9"},{"from":"1","to":"26","weight":30.41200335491344,"gater":"10"},{"from":"1","to":"27","weight":0.9900607859904333,"gater":"11"},{"from":"1","to":"28","weight":46.5648083574791,"gater":"12"},{"from":"1","to":"29","weight":-37.7336106368921,"gater":"13"},{"from":"1","to":"6","weight":-6.241017074887811,"gater":null},{"from":"1","to":"7","weight":-17.313767882346248,"gater":null},{"from":"1","to":"8","weight":0.14220761724468575,"gater":null},{"from":"1","to":"9","weight":58.126963593198994,"gater":null},{"from":"1","to":"10","weight":-15260.866933922747,"gater":null},{"from":"1","to":"11","weight":105.10327021256585,"gater":null},{"from":"1","to":"12","weight":-2.594048078771746,"gater":null},{"from":"1","to":"13","weight":1.6405972836172444,"gater":null},{"from":"1","to":"14","weight":28.652320997983,"gater":null},{"from":"1","to":"15","weight":-1.7228957376172722,"gater":null},{"from":"1","to":"16","weight":0.9051272752498183,"gater":null},{"from":"1","to":"17","weight":-32.90108036803548,"gater":null},{"from":"1","to":"18","weight":-89.72811188255226,"gater":null},{"from":"1","to":"19","weight":-0.30295038433430854,"gater":null},{"from":"1","to":"20","weight":3.4044130479492862,"gater":null},{"from":"1","to":"21","weight":-36.97034197567705,"gater":null},{"from":"1","to":"30","weight":242.68842644080507,"gater":null},{"from":"1","to":"31","weight":16.36905027175975,"gater":null},{"from":"1","to":"32","weight":231.84383873569783,"gater":null},{"from":"1","to":"33","weight":-3.8954994274675467,"gater":null},{"from":"1","to":"34","weight":-149.24684666513,"gater":null},{"from":"1","to":"35","weight":170.38328974086343,"gater":null},{"from":"1","to":"36","weight":-349.08667363417754,"gater":null},{"from":"1","to":"37","weight":227.44505879112484,"gater":null},{"from":"1","to":"54","weight":384.5714998937172,"gater":"38"},{"from":"1","to":"55","weight":-4.309628035343384,"gater":"39"},{"from":"1","to":"56","weight":68.6170184426177,"gater":"40"},{"from":"1","to":"57","weight":-201.25589086654492,"gater":"41"},{"from":"1","to":"58","weight":-404.89105968951054,"gater":"42"},{"from":"1","to":"59","weight":101.56653000781208,"gater":"43"},{"from":"1","to":"60","weight":91.15269647160154,"gater":"44"},{"from":"1","to":"61","weight":30.314207249734306,"gater":"45"},{"from":"1","to":"38","weight":-24.793366558768554,"gater":null},{"from":"1","to":"39","weight":-275.3074742386637,"gater":null},{"from":"1","to":"40","weight":718.3147484401243,"gater":null},{"from":"1","to":"41","weight":6.566635221515072,"gater":null},{"from":"1","to":"42","weight":2.791383313736402,"gater":null},{"from":"1","to":"43","weight":62.20428564548687,"gater":null},{"from":"1","to":"44","weight":-5568.590208937552,"gater":null},{"from":"1","to":"45","weight":-73.61178029117202,"gater":null},{"from":"1","to":"46","weight":-4.882473088459811,"gater":null},{"from":"1","to":"47","weight":-40.49609278444896,"gater":null},{"from":"1","to":"48","weight":29.459067323849435,"gater":null},{"from":"1","to":"49","weight":287.7023268926277,"gater":null},{"from":"1","to":"50","weight":-2.185515119737537,"gater":null},{"from":"1","to":"51","weight":-2.9155841759012646,"gater":null},{"from":"1","to":"52","weight":-9.862302482573519,"gater":null},{"from":"1","to":"53","weight":2885.9130792327583,"gater":null},{"from":"1","to":"62","weight":111.88566181450562,"gater":null},{"from":"1","to":"63","weight":711.3054949645783,"gater":null},{"from":"1","to":"64","weight":1564.4386039196063,"gater":null},{"from":"1","to":"65","weight":-7536.6293981041845,"gater":null},{"from":"1","to":"66","weight":186.6135827523427,"gater":null},{"from":"1","to":"67","weight":754.9339432029115,"gater":null},{"from":"1","to":"68","weight":-29.87654487785696,"gater":null},{"from":"1","to":"69","weight":174.2597527491871,"gater":null},{"from":"1","to":"70","weight":47.097812523413666,"gater":null},{"from":"2","to":"22","weight":15.770621591585039,"gater":"6"},{"from":"2","to":"23","weight":-0.19218086261866402,"gater":"7"},{"from":"2","to":"24","weight":-8.292469341329554,"gater":"8"},{"from":"2","to":"25","weight":2.3808294829860057,"gater":"9"},{"from":"2","to":"26","weight":26.48809297279859,"gater":"10"},{"from":"2","to":"27","weight":0.10271554847443151,"gater":"11"},{"from":"2","to":"28","weight":32.436455918976414,"gater":"12"},{"from":"2","to":"29","weight":35.34243457136904,"gater":"13"},{"from":"2","to":"6","weight":0.45565490989928975,"gater":null},{"from":"2","to":"7","weight":-1.465586221664855,"gater":null},{"from":"2","to":"8","weight":0.22574486297159266,"gater":null},{"from":"2","to":"9","weight":4.190252874824539,"gater":null},{"from":"2","to":"10","weight":-1883.1494311356269,"gater":null},{"from":"2","to":"11","weight":-13.349611167283388,"gater":null},{"from":"2","to":"12","weight":-0.6120946051741892,"gater":null},{"from":"2","to":"13","weight":-0.7351447686190442,"gater":null},{"from":"2","to":"14","weight":-20.334157263671756,"gater":null},{"from":"2","to":"15","weight":-0.5384478522499487,"gater":null},{"from":"2","to":"16","weight":-0.2607572584214204,"gater":null},{"from":"2","to":"17","weight":2.927344921093856,"gater":null},{"from":"2","to":"18","weight":23.473726152173146,"gater":null},{"from":"2","to":"19","weight":0.1529054578914394,"gater":null},{"from":"2","to":"20","weight":-1.9484720595879435,"gater":null},{"from":"2","to":"21","weight":0.83812113113164,"gater":null},{"from":"2","to":"30","weight":22.394133678200333,"gater":null},{"from":"2","to":"31","weight":-10.58486232978001,"gater":null},{"from":"2","to":"32","weight":-32.38975716838944,"gater":null},{"from":"2","to":"33","weight":-17.169231995498716,"gater":null},{"from":"2","to":"34","weight":-69.5463034142916,"gater":null},{"from":"2","to":"35","weight":-2.3980014528461364,"gater":null},{"from":"2","to":"36","weight":-51.231946481083874,"gater":null},{"from":"2","to":"37","weight":383.3600499871006,"gater":null},{"from":"2","to":"54","weight":5.168781848196091,"gater":"38"},{"from":"2","to":"55","weight":-12.398454341757606,"gater":"39"},{"from":"2","to":"56","weight":-36.846391073538854,"gater":"40"},{"from":"2","to":"57","weight":74.5516842230845,"gater":"41"},{"from":"2","to":"58","weight":216.1149219729119,"gater":"42"},{"from":"2","to":"59","weight":2.4630232715460862,"gater":"43"},{"from":"2","to":"60","weight":-39.15017754737927,"gater":"44"},{"from":"2","to":"61","weight":29.88025769949574,"gater":"45"},{"from":"2","to":"38","weight":10.867544879439917,"gater":null},{"from":"2","to":"39","weight":-32.89423820936547,"gater":null},{"from":"2","to":"40","weight":718.4787021325888,"gater":null},{"from":"2","to":"41","weight":-23.931111420707765,"gater":null},{"from":"2","to":"42","weight":0.015190322016715796,"gater":null},{"from":"2","to":"43","weight":4.638512280829161,"gater":null},{"from":"2","to":"44","weight":3688.551421572911,"gater":null},{"from":"2","to":"45","weight":-6.363053532945403,"gater":null},{"from":"2","to":"46","weight":-0.6478791369779234,"gater":null},{"from":"2","to":"47","weight":-2.921679390094109,"gater":null},{"from":"2","to":"48","weight":7.645066704393785,"gater":null},{"from":"2","to":"49","weight":21.96734572169181,"gater":null},{"from":"2","to":"50","weight":0.08058896964574191,"gater":null},{"from":"2","to":"51","weight":-0.30352725408634634,"gater":null},{"from":"2","to":"52","weight":1.2907037679012279,"gater":null},{"from":"2","to":"53","weight":-1039.4001258898884,"gater":null},{"from":"2","to":"62","weight":7.383636785505505,"gater":null},{"from":"2","to":"63","weight":-42.101032380740094,"gater":null},{"from":"2","to":"64","weight":718.507383117969,"gater":null},{"from":"2","to":"65","weight":-594.0275007768234,"gater":null},{"from":"2","to":"66","weight":137.76296761024963,"gater":null},{"from":"2","to":"67","weight":13.725824281437111,"gater":null},{"from":"2","to":"68","weight":11.77696149879943,"gater":null},{"from":"2","to":"69","weight":123.36588380945791,"gater":null},{"from":"2","to":"70","weight":66.09610135970536,"gater":null},{"from":"3","to":"22","weight":-0.8930323257414624,"gater":"6"},{"from":"3","to":"23","weight":-0.0881543094423983,"gater":"7"},{"from":"3","to":"24","weight":0.06310091410168972,"gater":"8"},{"from":"3","to":"25","weight":0.04877531056604957,"gater":"9"},{"from":"3","to":"26","weight":0.6248322549613644,"gater":"10"},{"from":"3","to":"27","weight":0.0813581251655192,"gater":"11"},{"from":"3","to":"28","weight":0.1478953741639946,"gater":"12"},{"from":"3","to":"29","weight":4.26107162146295,"gater":"13"},{"from":"3","to":"6","weight":0.09661921430852546,"gater":null},{"from":"3","to":"7","weight":-0.06702252136149295,"gater":null},{"from":"3","to":"8","weight":0.02284696397796136,"gater":null},{"from":"3","to":"9","weight":-0.23173418856631836,"gater":null},{"from":"3","to":"10","weight":23.323456819862898,"gater":null},{"from":"3","to":"11","weight":-0.09535995709826242,"gater":null},{"from":"3","to":"12","weight":-0.015513384514056063,"gater":null},{"from":"3","to":"13","weight":-0.23218745963786902,"gater":null},{"from":"3","to":"14","weight":-0.4096929504137383,"gater":null},{"from":"3","to":"15","weight":0.05270408850205894,"gater":null},{"from":"3","to":"16","weight":0.0729691766952958,"gater":null},{"from":"3","to":"17","weight":-0.1512965817685321,"gater":null},{"from":"3","to":"18","weight":0.4123023605424794,"gater":null},{"from":"3","to":"19","weight":-0.06263971830713244,"gater":null},{"from":"3","to":"20","weight":-0.03291520697072121,"gater":null},{"from":"3","to":"21","weight":0.21566654703447433,"gater":null},{"from":"3","to":"30","weight":-0.5263543359244488,"gater":null},{"from":"3","to":"31","weight":-0.03914904437619833,"gater":null},{"from":"3","to":"32","weight":0.6099033546182987,"gater":null},{"from":"3","to":"33","weight":-0.3375830073104507,"gater":null},{"from":"3","to":"34","weight":-0.11347891301172715,"gater":null},{"from":"3","to":"35","weight":-0.27681117041201314,"gater":null},{"from":"3","to":"36","weight":-0.12276548240308106,"gater":null},{"from":"3","to":"37","weight":-1.3755288182877448,"gater":null},{"from":"3","to":"54","weight":-1.2522482921677969,"gater":"38"},{"from":"3","to":"55","weight":-0.04704308722044563,"gater":"39"},{"from":"3","to":"56","weight":-0.2987466918531651,"gater":"40"},{"from":"3","to":"57","weight":-0.20630007494893188,"gater":"41"},{"from":"3","to":"58","weight":0.46453851533636614,"gater":"42"},{"from":"3","to":"59","weight":-0.09364568898666752,"gater":"43"},{"from":"3","to":"60","weight":-1.6791690348957848,"gater":"44"},{"from":"3","to":"61","weight":-0.7603475618637289,"gater":"45"},{"from":"3","to":"38","weight":0.17425782791005845,"gater":null},{"from":"3","to":"39","weight":-0.3201314487621514,"gater":null},{"from":"3","to":"40","weight":7.396282036048858,"gater":null},{"from":"3","to":"41","weight":0.23693149744455735,"gater":null},{"from":"3","to":"42","weight":0.08027023071832252,"gater":null},{"from":"3","to":"43","weight":-0.08325593365941891,"gater":null},{"from":"3","to":"44","weight":84.61319520535771,"gater":null},{"from":"3","to":"45","weight":-0.025955899463591097,"gater":null},{"from":"3","to":"46","weight":0.00953353979482141,"gater":null},{"from":"3","to":"47","weight":0.2686683591806052,"gater":null},{"from":"3","to":"48","weight":-0.03813406687247798,"gater":null},{"from":"3","to":"49","weight":-0.7128609459836626,"gater":null},{"from":"3","to":"50","weight":-0.026167042254202976,"gater":null},{"from":"3","to":"51","weight":-0.06570298499458656,"gater":null},{"from":"3","to":"52","weight":-0.02182638731018712,"gater":null},{"from":"3","to":"53","weight":0.4693525722994041,"gater":null},{"from":"3","to":"62","weight":-0.046956589220959806,"gater":null},{"from":"3","to":"63","weight":-0.5979057657657408,"gater":null},{"from":"3","to":"64","weight":-1.2044544884545478,"gater":null},{"from":"3","to":"65","weight":1.9666581466212392,"gater":null},{"from":"3","to":"66","weight":-1.353197305483012,"gater":null},{"from":"3","to":"67","weight":-0.46849950647909777,"gater":null},{"from":"3","to":"68","weight":-0.2901319359863438,"gater":null},{"from":"3","to":"69","weight":-0.633723850436766,"gater":null},{"from":"3","to":"70","weight":-7525.950600321149,"gater":null},{"from":"4","to":"22","weight":-0.47031844329188677,"gater":"6"},{"from":"4","to":"23","weight":-0.1109142693781813,"gater":"7"},{"from":"4","to":"24","weight":-0.23034795921662876,"gater":"8"},{"from":"4","to":"25","weight":-0.0895823928415475,"gater":"9"},{"from":"4","to":"26","weight":0.4521888796187301,"gater":"10"},{"from":"4","to":"27","weight":0.05051951896419667,"gater":"11"},{"from":"4","to":"28","weight":0.22056043739620682,"gater":"12"},{"from":"4","to":"29","weight":7.6743380412952265,"gater":"13"},{"from":"4","to":"6","weight":0.0841558024289778,"gater":null},{"from":"4","to":"7","weight":-0.041465452807960296,"gater":null},{"from":"4","to":"8","weight":0.028980901684591245,"gater":null},{"from":"4","to":"9","weight":0.004392633732183349,"gater":null},{"from":"4","to":"10","weight":2.9284242219679557,"gater":null},{"from":"4","to":"11","weight":-0.1564463460531499,"gater":null},{"from":"4","to":"12","weight":-0.0853752036371695,"gater":null},{"from":"4","to":"13","weight":-0.3935358738750099,"gater":null},{"from":"4","to":"14","weight":-0.9928077869353937,"gater":null},{"from":"4","to":"15","weight":-0.055371847541895704,"gater":null},{"from":"4","to":"16","weight":-0.0927577774485984,"gater":null},{"from":"4","to":"17","weight":-0.2923457800084563,"gater":null},{"from":"4","to":"18","weight":-0.6646466263922524,"gater":null},{"from":"4","to":"19","weight":-0.11377053835909576,"gater":null},{"from":"4","to":"20","weight":-0.08476349451624626,"gater":null},{"from":"4","to":"21","weight":-0.1151036916417314,"gater":null},{"from":"4","to":"30","weight":-0.2127369819655061,"gater":null},{"from":"4","to":"31","weight":-0.11736892656981757,"gater":null},{"from":"4","to":"32","weight":1.3457203676076828,"gater":null},{"from":"4","to":"33","weight":-0.24623742140615779,"gater":null},{"from":"4","to":"34","weight":-0.36170848438134257,"gater":null},{"from":"4","to":"35","weight":-0.645637949081079,"gater":null},{"from":"4","to":"36","weight":-0.14093009973292353,"gater":null},{"from":"4","to":"37","weight":-2.0976076330797913,"gater":null},{"from":"4","to":"54","weight":-1.5238720453006296,"gater":"38"},{"from":"4","to":"55","weight":0.05881664149339968,"gater":"39"},{"from":"4","to":"56","weight":-0.11134551213882994,"gater":"40"},{"from":"4","to":"57","weight":1.4327248969827306,"gater":"41"},{"from":"4","to":"58","weight":-0.8785557879649333,"gater":"42"},{"from":"4","to":"59","weight":-0.004947284349684707,"gater":"43"},{"from":"4","to":"60","weight":-0.8973882738654054,"gater":"44"},{"from":"4","to":"61","weight":-0.47424145939042095,"gater":"45"},{"from":"4","to":"38","weight":0.2088530109709991,"gater":null},{"from":"4","to":"39","weight":-0.22985330455133746,"gater":null},{"from":"4","to":"40","weight":0.4568666181395855,"gater":null},{"from":"4","to":"41","weight":0.06323214115030502,"gater":null},{"from":"4","to":"42","weight":0.07890946897465174,"gater":null},{"from":"4","to":"43","weight":-0.08339287905770693,"gater":null},{"from":"4","to":"44","weight":43.37162883260945,"gater":null},{"from":"4","to":"45","weight":0.12274396453976019,"gater":null},{"from":"4","to":"46","weight":0.045015910770137224,"gater":null},{"from":"4","to":"47","weight":0.3186004027851013,"gater":null},{"from":"4","to":"48","weight":0.026555597368461952,"gater":null},{"from":"4","to":"49","weight":-0.24472372670159298,"gater":null},{"from":"4","to":"50","weight":-0.10774107371563275,"gater":null},{"from":"4","to":"51","weight":0.00467792950574715,"gater":null},{"from":"4","to":"52","weight":0.06936655186093924,"gater":null},{"from":"4","to":"53","weight":-6.426889518098624,"gater":null},{"from":"4","to":"62","weight":-0.46354854778556365,"gater":null},{"from":"4","to":"63","weight":-1.4824237242376068,"gater":null},{"from":"4","to":"64","weight":-1.5367049586180663,"gater":null},{"from":"4","to":"65","weight":-32.986420879968925,"gater":null},{"from":"4","to":"66","weight":0.39281417316572087,"gater":null},{"from":"4","to":"67","weight":-1.2259548488030885,"gater":null},{"from":"4","to":"68","weight":-0.09784719929808601,"gater":null},{"from":"4","to":"69","weight":-0.26805478277147393,"gater":null},{"from":"4","to":"70","weight":-39965.52540812746,"gater":null},{"from":"5","to":"22","weight":-2.408575956032561,"gater":"6"},{"from":"5","to":"23","weight":-0.34115969386640005,"gater":"7"},{"from":"5","to":"24","weight":-0.8232006393366884,"gater":"8"},{"from":"5","to":"25","weight":-0.31824843889171117,"gater":"9"},{"from":"5","to":"26","weight":1.20149690564266,"gater":"10"},{"from":"5","to":"27","weight":-0.20705402922545066,"gater":"11"},{"from":"5","to":"28","weight":0.3684112254987866,"gater":"12"},{"from":"5","to":"29","weight":13.05077207643947,"gater":"13"},{"from":"5","to":"6","weight":0.3063763740300776,"gater":null},{"from":"5","to":"7","weight":-0.4044670366031581,"gater":null},{"from":"5","to":"8","weight":0.5407806389806123,"gater":null},{"from":"5","to":"9","weight":-1.1703306633799808,"gater":null},{"from":"5","to":"10","weight":50.62003188997232,"gater":null},{"from":"5","to":"11","weight":-0.4561583738867138,"gater":null},{"from":"5","to":"12","weight":0.06435315988233611,"gater":null},{"from":"5","to":"13","weight":-0.5883235635998316,"gater":null},{"from":"5","to":"14","weight":-9.203935931400194,"gater":null},{"from":"5","to":"15","weight":-0.7845303519496089,"gater":null},{"from":"5","to":"16","weight":-0.11711256871641802,"gater":null},{"from":"5","to":"17","weight":-2.771442948752738,"gater":null},{"from":"5","to":"18","weight":-1.9429685981522578,"gater":null},{"from":"5","to":"19","weight":-0.21012727185953053,"gater":null},{"from":"5","to":"20","weight":-0.08207666405434438,"gater":null},{"from":"5","to":"21","weight":-0.4304754966934019,"gater":null},{"from":"5","to":"30","weight":-1.2140011308472265,"gater":null},{"from":"5","to":"31","weight":-0.5187254500125018,"gater":null},{"from":"5","to":"32","weight":1.3033318626572927,"gater":null},{"from":"5","to":"33","weight":-1.1106368441875518,"gater":null},{"from":"5","to":"34","weight":-1.772166974340993,"gater":null},{"from":"5","to":"35","weight":-2.6461022593494725,"gater":null},{"from":"5","to":"36","weight":-0.7801511382415213,"gater":null},{"from":"5","to":"37","weight":-7.335617656862486,"gater":null},{"from":"5","to":"54","weight":-3.195212123384545,"gater":"38"},{"from":"5","to":"55","weight":-0.537479554193994,"gater":"39"},{"from":"5","to":"56","weight":-0.4291517961857293,"gater":"40"},{"from":"5","to":"57","weight":2.1989263767111114,"gater":"41"},{"from":"5","to":"58","weight":-3.7866155321529504,"gater":"42"},{"from":"5","to":"59","weight":-0.38532687672827715,"gater":"43"},{"from":"5","to":"60","weight":-4.082741715205401,"gater":"44"},{"from":"5","to":"61","weight":-2.0272380395740592,"gater":"45"},{"from":"5","to":"38","weight":0.7429452627250449,"gater":null},{"from":"5","to":"39","weight":-1.0694659941627196,"gater":null},{"from":"5","to":"40","weight":46.003655843955386,"gater":null},{"from":"5","to":"41","weight":0.5633109597792555,"gater":null},{"from":"5","to":"42","weight":0.07203128427263653,"gater":null},{"from":"5","to":"43","weight":0.3154397261229537,"gater":null},{"from":"5","to":"44","weight":196.75474286074757,"gater":null},{"from":"5","to":"45","weight":0.10645727982068535,"gater":null},{"from":"5","to":"46","weight":-0.020835520317139363,"gater":null},{"from":"5","to":"47","weight":0.5251583064875891,"gater":null},{"from":"5","to":"48","weight":-0.5582716284724927,"gater":null},{"from":"5","to":"49","weight":-3.452522965487684,"gater":null},{"from":"5","to":"50","weight":-0.16234763923575246,"gater":null},{"from":"5","to":"51","weight":-0.1051710448065096,"gater":null},{"from":"5","to":"52","weight":-0.1566120235691483,"gater":null},{"from":"5","to":"53","weight":-13.585589434895935,"gater":null},{"from":"5","to":"62","weight":-3.7377001959900724,"gater":null},{"from":"5","to":"63","weight":-6.505410685432551,"gater":null},{"from":"5","to":"64","weight":-9.255102074557763,"gater":null},{"from":"5","to":"65","weight":-50.5470822230679,"gater":null},{"from":"5","to":"66","weight":-2.8784978055135557,"gater":null},{"from":"5","to":"67","weight":-4.14990361555121,"gater":null},{"from":"5","to":"68","weight":-0.9618365097896617,"gater":null},{"from":"5","to":"69","weight":-2.6232459040523337,"gater":null},{"from":"5","to":"70","weight":13644.686409696697,"gater":null},{"from":"22","to":"70","weight":-11072.756992378629,"gater":"30"},{"from":"22","to":"6","weight":-0.15113494516291023,"gater":null},{"from":"22","to":"7","weight":0.2852625429384955,"gater":null},{"from":"22","to":"8","weight":-0.6550823170767685,"gater":null},{"from":"22","to":"9","weight":1.2815612756546786,"gater":null},{"from":"22","to":"10","weight":-55.614473629991735,"gater":null},{"from":"22","to":"11","weight":0.5205714042152778,"gater":null},{"from":"22","to":"12","weight":-0.011756135335769162,"gater":null},{"from":"22","to":"13","weight":0.03612641298453519,"gater":null},{"from":"22","to":"14","weight":9.216598957707246,"gater":null},{"from":"22","to":"15","weight":0.8658290404900081,"gater":null},{"from":"22","to":"16","weight":0.1932673767906559,"gater":null},{"from":"22","to":"17","weight":2.7699694119657914,"gater":null},{"from":"22","to":"18","weight":-0.07391473665966637,"gater":null},{"from":"22","to":"19","weight":0.21708410340369386,"gater":null},{"from":"22","to":"20","weight":0.12632843460136345,"gater":null},{"from":"22","to":"21","weight":0.6254820082821532,"gater":null},{"from":"22","to":"30","weight":1.4160593239657562,"gater":null},{"from":"22","to":"31","weight":0.3546551981607288,"gater":null},{"from":"22","to":"32","weight":0.29819288284390966,"gater":null},{"from":"22","to":"33","weight":1.2265577412359592,"gater":null},{"from":"22","to":"34","weight":1.8074552736074758,"gater":null},{"from":"22","to":"35","weight":2.3114778103161178,"gater":null},{"from":"22","to":"36","weight":0.7648073127480535,"gater":null},{"from":"22","to":"37","weight":7.866972974046415,"gater":null},{"from":"22","to":"54","weight":0.4731270939036749,"gater":"38"},{"from":"22","to":"55","weight":0.6982360031232545,"gater":"39"},{"from":"22","to":"56","weight":0.1508821272492322,"gater":"40"},{"from":"22","to":"57","weight":0.802069357345585,"gater":"41"},{"from":"22","to":"58","weight":0.0348004545987425,"gater":"42"},{"from":"22","to":"59","weight":0.15267291990365503,"gater":"43"},{"from":"22","to":"60","weight":2.9254885549810608,"gater":"44"},{"from":"22","to":"61","weight":2.2502357464462626,"gater":"45"},{"from":"22","to":"38","weight":-0.8294348592154002,"gater":null},{"from":"22","to":"39","weight":1.113495845121441,"gater":null},{"from":"22","to":"40","weight":-39.109577781277,"gater":null},{"from":"22","to":"41","weight":-0.04439865471844219,"gater":null},{"from":"22","to":"42","weight":-0.01736098315896528,"gater":null},{"from":"22","to":"43","weight":0.3064823462397599,"gater":null},{"from":"22","to":"44","weight":-0.4351376522484925,"gater":null},{"from":"22","to":"45","weight":0.03747643910189695,"gater":null},{"from":"22","to":"46","weight":0.029878728018940724,"gater":null},{"from":"22","to":"47","weight":-0.596252706314637,"gater":null},{"from":"22","to":"48","weight":0.17363300542703808,"gater":null},{"from":"22","to":"49","weight":0.6918202462191015,"gater":null},{"from":"22","to":"50","weight":0.16242763820742162,"gater":null},{"from":"22","to":"51","weight":0.15037430549665132,"gater":null},{"from":"22","to":"52","weight":0.0458354116328296,"gater":null},{"from":"22","to":"53","weight":0.0779081483996425,"gater":null},{"from":"22","to":"62","weight":1.0599445399126988,"gater":null},{"from":"22","to":"63","weight":0.6566487140380495,"gater":null},{"from":"22","to":"64","weight":9.349059610802984,"gater":null},{"from":"22","to":"65","weight":0.999340430692357,"gater":null},{"from":"22","to":"66","weight":3.645519485363769,"gater":null},{"from":"22","to":"67","weight":3.9323454605735915,"gater":null},{"from":"22","to":"68","weight":0.9955100947191957,"gater":null},{"from":"22","to":"69","weight":-0.2469711061157701,"gater":null},{"from":"22","to":"22","weight":1,"gater":"14"},{"from":"23","to":"70","weight":-17195.1468579886,"gater":"31"},{"from":"23","to":"6","weight":-0.33241184142294344,"gater":null},{"from":"23","to":"7","weight":0.3024281980862672,"gater":null},{"from":"23","to":"8","weight":-0.5815298800735622,"gater":null},{"from":"23","to":"9","weight":1.2000504862974668,"gater":null},{"from":"23","to":"10","weight":-34.213126118741066,"gater":null},{"from":"23","to":"11","weight":0.5406961621020495,"gater":null},{"from":"23","to":"12","weight":0.039894178947480465,"gater":null},{"from":"23","to":"13","weight":0.0949736385651806,"gater":null},{"from":"23","to":"14","weight":8.525316437810714,"gater":null},{"from":"23","to":"15","weight":0.8496530423259347,"gater":null},{"from":"23","to":"16","weight":0.23518084857679467,"gater":null},{"from":"23","to":"17","weight":2.726250231862349,"gater":null},{"from":"23","to":"18","weight":2.0470038993501833,"gater":null},{"from":"23","to":"19","weight":0.24665073274148017,"gater":null},{"from":"23","to":"20","weight":0.08351394057668726,"gater":null},{"from":"23","to":"21","weight":0.5684426984791967,"gater":null},{"from":"23","to":"30","weight":1.334199944299256,"gater":null},{"from":"23","to":"31","weight":0.5561460244509935,"gater":null},{"from":"23","to":"32","weight":0.27069292315260635,"gater":null},{"from":"23","to":"33","weight":1.1735398839043751,"gater":null},{"from":"23","to":"34","weight":1.9764427056922569,"gater":null},{"from":"23","to":"35","weight":1.858938747421619,"gater":null},{"from":"23","to":"36","weight":0.9011823361771071,"gater":null},{"from":"23","to":"37","weight":7.9306588031719345,"gater":null},{"from":"23","to":"54","weight":3.4778287910158507,"gater":"38"},{"from":"23","to":"55","weight":0.572883188608345,"gater":"39"},{"from":"23","to":"56","weight":-0.019309650642905872,"gater":"40"},{"from":"23","to":"57","weight":0.9250236880691358,"gater":"41"},{"from":"23","to":"58","weight":0.5681903589035704,"gater":"42"},{"from":"23","to":"59","weight":0.32212659894155904,"gater":"43"},{"from":"23","to":"60","weight":1.8184464191360807,"gater":"44"},{"from":"23","to":"61","weight":0.0034153204832493714,"gater":"45"},{"from":"23","to":"38","weight":-0.8588538704451123,"gater":null},{"from":"23","to":"39","weight":0.7983298558748162,"gater":null},{"from":"23","to":"40","weight":-39.05571113132766,"gater":null},{"from":"23","to":"41","weight":-0.5914315212157254,"gater":null},{"from":"23","to":"42","weight":-0.06991813780954313,"gater":null},{"from":"23","to":"43","weight":-0.48257683736129825,"gater":null},{"from":"23","to":"44","weight":-218.69360576749514,"gater":null},{"from":"23","to":"45","weight":-0.12397982948289846,"gater":null},{"from":"23","to":"46","weight":0.04484320084913053,"gater":null},{"from":"23","to":"47","weight":-0.5851134982648193,"gater":null},{"from":"23","to":"48","weight":0.51291398238872,"gater":null},{"from":"23","to":"49","weight":0.6943775461970434,"gater":null},{"from":"23","to":"50","weight":0.15291519611384816,"gater":null},{"from":"23","to":"51","weight":0.10839293807924558,"gater":null},{"from":"23","to":"52","weight":0.05064385663613883,"gater":null},{"from":"23","to":"53","weight":-0.04992188064841201,"gater":null},{"from":"23","to":"62","weight":1.1413849796246553,"gater":null},{"from":"23","to":"63","weight":5.639890163488763,"gater":null},{"from":"23","to":"64","weight":9.412922765592631,"gater":null},{"from":"23","to":"65","weight":0.6085287048642786,"gater":null},{"from":"23","to":"66","weight":3.5281875647709655,"gater":null},{"from":"23","to":"67","weight":3.86679348720315,"gater":null},{"from":"23","to":"68","weight":0.9210974535858613,"gater":null},{"from":"23","to":"69","weight":-0.09391357460829948,"gater":null},{"from":"23","to":"23","weight":1,"gater":"15"},{"from":"24","to":"70","weight":-7033.905052869011,"gater":"32"},{"from":"24","to":"6","weight":-0.3120298941817089,"gater":null},{"from":"24","to":"7","weight":0.2922096588691665,"gater":null},{"from":"24","to":"8","weight":-0.45109862836569603,"gater":null},{"from":"24","to":"9","weight":1.1903095619056943,"gater":null},{"from":"24","to":"10","weight":-0.019447436725712235,"gater":null},{"from":"24","to":"11","weight":0.5080639959566301,"gater":null},{"from":"24","to":"12","weight":-0.0898234452554145,"gater":null},{"from":"24","to":"13","weight":0.8112976960998667,"gater":null},{"from":"24","to":"14","weight":8.356495297165402,"gater":null},{"from":"24","to":"15","weight":0.7081586398203863,"gater":null},{"from":"24","to":"16","weight":0.2431008146366787,"gater":null},{"from":"24","to":"17","weight":2.154257809007026,"gater":null},{"from":"24","to":"18","weight":2.0471566814559106,"gater":null},{"from":"24","to":"19","weight":0.2976764429313148,"gater":null},{"from":"24","to":"20","weight":0.08031571209637413,"gater":null},{"from":"24","to":"21","weight":0.4818735240585511,"gater":null},{"from":"24","to":"30","weight":0.367292495048069,"gater":null},{"from":"24","to":"31","weight":0.6492335416955902,"gater":null},{"from":"24","to":"32","weight":-1.9246549752600532,"gater":null},{"from":"24","to":"33","weight":0.66908081106102,"gater":null},{"from":"24","to":"34","weight":1.9593464366545241,"gater":null},{"from":"24","to":"35","weight":0.7576011707167813,"gater":null},{"from":"24","to":"36","weight":0.9200214099160801,"gater":null},{"from":"24","to":"37","weight":7.813527674419682,"gater":null},{"from":"24","to":"54","weight":3.78071528567852,"gater":"38"},{"from":"24","to":"55","weight":0.6261230890879109,"gater":"39"},{"from":"24","to":"56","weight":0.4654669690683662,"gater":"40"},{"from":"24","to":"57","weight":-2.7381860306934893,"gater":"41"},{"from":"24","to":"58","weight":4.179332964734553,"gater":"42"},{"from":"24","to":"59","weight":0.022693767451209282,"gater":"43"},{"from":"24","to":"60","weight":4.600991236031075,"gater":"44"},{"from":"24","to":"61","weight":2.3144282741870694,"gater":"45"},{"from":"24","to":"38","weight":-0.8986683722319613,"gater":null},{"from":"24","to":"39","weight":0.7829408455050543,"gater":null},{"from":"24","to":"40","weight":8.013697354116845,"gater":null},{"from":"24","to":"41","weight":-0.7350844372223245,"gater":null},{"from":"24","to":"42","weight":-0.13925643479668043,"gater":null},{"from":"24","to":"43","weight":-0.2729671407868113,"gater":null},{"from":"24","to":"44","weight":-218.63191472306326,"gater":null},{"from":"24","to":"45","weight":0.0728836454560896,"gater":null},{"from":"24","to":"46","weight":-0.040228028639938275,"gater":null},{"from":"24","to":"47","weight":-0.6111569515845071,"gater":null},{"from":"24","to":"48","weight":0.23405729850219753,"gater":null},{"from":"24","to":"49","weight":0.6144001659989002,"gater":null},{"from":"24","to":"50","weight":0.196975028024557,"gater":null},{"from":"24","to":"51","weight":0.027059290521508465,"gater":null},{"from":"24","to":"52","weight":0.0975676854927485,"gater":null},{"from":"24","to":"53","weight":14.973901364229091,"gater":null},{"from":"24","to":"62","weight":2.7139803698566007,"gater":null},{"from":"24","to":"63","weight":1.016400551449393,"gater":null},{"from":"24","to":"64","weight":0.9293087253139696,"gater":null},{"from":"24","to":"65","weight":58.82809085219065,"gater":null},{"from":"24","to":"66","weight":2.8387780048286992,"gater":null},{"from":"24","to":"67","weight":0.21501759456703287,"gater":null},{"from":"24","to":"68","weight":0.8398495915497648,"gater":null},{"from":"24","to":"69","weight":2.441806236158485,"gater":null},{"from":"24","to":"24","weight":1,"gater":"16"},{"from":"25","to":"70","weight":-4988.0893144019055,"gater":"33"},{"from":"25","to":"6","weight":-0.09177912632587323,"gater":null},{"from":"25","to":"7","weight":0.3222195969182954,"gater":null},{"from":"25","to":"8","weight":-0.2538149369299282,"gater":null},{"from":"25","to":"9","weight":1.1857535647576063,"gater":null},{"from":"25","to":"10","weight":-55.69458013377443,"gater":null},{"from":"25","to":"11","weight":0.5413350327330506,"gater":null},{"from":"25","to":"12","weight":-0.14097756892413862,"gater":null},{"from":"25","to":"13","weight":0.6672603594848249,"gater":null},{"from":"25","to":"14","weight":5.582419663204184,"gater":null},{"from":"25","to":"15","weight":0.5465215525510114,"gater":null},{"from":"25","to":"16","weight":0.24249988993982288,"gater":null},{"from":"25","to":"17","weight":2.3091307664235,"gater":null},{"from":"25","to":"18","weight":1.9780899692348946,"gater":null},{"from":"25","to":"19","weight":0.13263503157181616,"gater":null},{"from":"25","to":"20","weight":0.02656113966832845,"gater":null},{"from":"25","to":"21","weight":0.5862044667288232,"gater":null},{"from":"25","to":"30","weight":1.291388785145794,"gater":null},{"from":"25","to":"31","weight":0.5895273827966162,"gater":null},{"from":"25","to":"32","weight":-1.8235028132356041,"gater":null},{"from":"25","to":"33","weight":1.15005753889984,"gater":null},{"from":"25","to":"34","weight":1.7823630779968496,"gater":null},{"from":"25","to":"35","weight":2.6120337225600605,"gater":null},{"from":"25","to":"36","weight":0.9247507564616444,"gater":null},{"from":"25","to":"37","weight":7.8098057229657245,"gater":null},{"from":"25","to":"54","weight":3.41293565182875,"gater":"38"},{"from":"25","to":"55","weight":0.6767364809026389,"gater":"39"},{"from":"25","to":"56","weight":0.00739397802922577,"gater":"40"},{"from":"25","to":"57","weight":-2.6303530839768476,"gater":"41"},{"from":"25","to":"58","weight":3.6087423456560757,"gater":"42"},{"from":"25","to":"59","weight":0.42586299861111143,"gater":"43"},{"from":"25","to":"60","weight":4.492556603886059,"gater":"44"},{"from":"25","to":"61","weight":2.3899166343400617,"gater":"45"},{"from":"25","to":"38","weight":-0.7907812294352152,"gater":null},{"from":"25","to":"39","weight":0.4685201822444027,"gater":null},{"from":"25","to":"40","weight":-39.08538541070445,"gater":null},{"from":"25","to":"41","weight":-0.7584836963140192,"gater":null},{"from":"25","to":"42","weight":0.05395240490489972,"gater":null},{"from":"25","to":"43","weight":-0.3581345737243877,"gater":null},{"from":"25","to":"44","weight":-218.50548576482856,"gater":null},{"from":"25","to":"45","weight":-0.05693473940146067,"gater":null},{"from":"25","to":"46","weight":0.02301410088253578,"gater":null},{"from":"25","to":"47","weight":-0.5651006963979921,"gater":null},{"from":"25","to":"48","weight":0.6810460533199821,"gater":null},{"from":"25","to":"49","weight":3.363452215985831,"gater":null},{"from":"25","to":"50","weight":0.02080609942744146,"gater":null},{"from":"25","to":"51","weight":0.2117017664901456,"gater":null},{"from":"25","to":"52","weight":0.03146174068358315,"gater":null},{"from":"25","to":"53","weight":15.101677540307888,"gater":null},{"from":"25","to":"62","weight":3.9637246643239767,"gater":null},{"from":"25","to":"63","weight":6.782093200626329,"gater":null},{"from":"25","to":"64","weight":9.37810731980921,"gater":null},{"from":"25","to":"65","weight":60.52289169928466,"gater":null},{"from":"25","to":"66","weight":2.99058895542487,"gater":null},{"from":"25","to":"67","weight":3.8275951676583313,"gater":null},{"from":"25","to":"68","weight":0.9608876032774886,"gater":null},{"from":"25","to":"69","weight":2.6838857836677295,"gater":null},{"from":"25","to":"25","weight":1,"gater":"17"},{"from":"26","to":"70","weight":-46.216440942367925,"gater":"34"},{"from":"26","to":"6","weight":-0.2751457168656755,"gater":null},{"from":"26","to":"7","weight":0.008874703884042344,"gater":null},{"from":"26","to":"8","weight":0.023907317715149482,"gater":null},{"from":"26","to":"9","weight":0.8834407068264577,"gater":null},{"from":"26","to":"10","weight":0.07255378753015033,"gater":null},{"from":"26","to":"11","weight":0.5220473541733687,"gater":null},{"from":"26","to":"12","weight":0.006619268722573495,"gater":null},{"from":"26","to":"13","weight":0.05115104903450177,"gater":null},{"from":"26","to":"14","weight":4.2808209441000225,"gater":null},{"from":"26","to":"15","weight":0.08443536965650385,"gater":null},{"from":"26","to":"16","weight":0.1199937294139613,"gater":null},{"from":"26","to":"17","weight":-0.06943246643547606,"gater":null},{"from":"26","to":"18","weight":2.063480469946631,"gater":null},{"from":"26","to":"19","weight":0.2143400233659949,"gater":null},{"from":"26","to":"20","weight":0.039819542972178816,"gater":null},{"from":"26","to":"21","weight":0.5697074036259389,"gater":null},{"from":"26","to":"30","weight":1.2643507156523692,"gater":null},{"from":"26","to":"31","weight":0.4641247495736699,"gater":null},{"from":"26","to":"32","weight":0.07241639032309456,"gater":null},{"from":"26","to":"33","weight":1.1601573409633243,"gater":null},{"from":"26","to":"34","weight":1.815014051599854,"gater":null},{"from":"26","to":"35","weight":2.4950088383417035,"gater":null},{"from":"26","to":"36","weight":0.9325018275790614,"gater":null},{"from":"26","to":"37","weight":7.838971437398548,"gater":null},{"from":"26","to":"54","weight":3.778111753642883,"gater":"38"},{"from":"26","to":"55","weight":0.03584332507494714,"gater":"39"},{"from":"26","to":"56","weight":0.47166339593868545,"gater":"40"},{"from":"26","to":"57","weight":-2.5904777505671936,"gater":"41"},{"from":"26","to":"58","weight":3.972322786498488,"gater":"42"},{"from":"26","to":"59","weight":0.37988238741647407,"gater":"43"},{"from":"26","to":"60","weight":4.55351783257425,"gater":"44"},{"from":"26","to":"61","weight":2.0881901551038267,"gater":"45"},{"from":"26","to":"38","weight":-0.9087923613452271,"gater":null},{"from":"26","to":"39","weight":0.730468687466883,"gater":null},{"from":"26","to":"40","weight":-38.98250803378423,"gater":null},{"from":"26","to":"41","weight":-0.6275544013638226,"gater":null},{"from":"26","to":"42","weight":-0.04259606764052658,"gater":null},{"from":"26","to":"43","weight":-0.1890020738249768,"gater":null},{"from":"26","to":"44","weight":-218.60254207859174,"gater":null},{"from":"26","to":"45","weight":-0.18675962423812406,"gater":null},{"from":"26","to":"46","weight":0.014551033855758582,"gater":null},{"from":"26","to":"47","weight":-0.5898621062710018,"gater":null},{"from":"26","to":"48","weight":0.571454279920398,"gater":null},{"from":"26","to":"49","weight":2.9189669552442723,"gater":null},{"from":"26","to":"50","weight":0.039228547380127966,"gater":null},{"from":"26","to":"51","weight":0.054600822146723474,"gater":null},{"from":"26","to":"52","weight":0.20338094322419362,"gater":null},{"from":"26","to":"53","weight":15.046054193153934,"gater":null},{"from":"26","to":"62","weight":1.024354205643861,"gater":null},{"from":"26","to":"63","weight":6.269566418384388,"gater":null},{"from":"26","to":"64","weight":8.426088676057073,"gater":null},{"from":"26","to":"65","weight":0.670635532310069,"gater":null},{"from":"26","to":"66","weight":-0.5227658378520419,"gater":null},{"from":"26","to":"67","weight":4.223095383601063,"gater":null},{"from":"26","to":"68","weight":0.9295720378831188,"gater":null},{"from":"26","to":"69","weight":3.0013709266313544,"gater":null},{"from":"26","to":"26","weight":1,"gater":"18"},{"from":"27","to":"70","weight":4195.065590913817,"gater":"35"},{"from":"27","to":"6","weight":-0.2623542220793184,"gater":null},{"from":"27","to":"7","weight":0.3655964921591777,"gater":null},{"from":"27","to":"8","weight":-0.3865590249725082,"gater":null},{"from":"27","to":"9","weight":1.180614863116095,"gater":null},{"from":"27","to":"10","weight":-55.665925101979646,"gater":null},{"from":"27","to":"11","weight":0.5105535864592953,"gater":null},{"from":"27","to":"12","weight":0.012828642239636777,"gater":null},{"from":"27","to":"13","weight":0.768351153335849,"gater":null},{"from":"27","to":"14","weight":6.84792895680784,"gater":null},{"from":"27","to":"15","weight":0.5361734394539375,"gater":null},{"from":"27","to":"16","weight":0.255837651063839,"gater":null},{"from":"27","to":"17","weight":1.6444202427303511,"gater":null},{"from":"27","to":"18","weight":1.953128240555519,"gater":null},{"from":"27","to":"19","weight":0.26774213615217585,"gater":null},{"from":"27","to":"20","weight":0.07036448922409962,"gater":null},{"from":"27","to":"21","weight":0.011450479516570395,"gater":null},{"from":"27","to":"30","weight":1.3248938561410704,"gater":null},{"from":"27","to":"31","weight":0.4499455699050937,"gater":null},{"from":"27","to":"32","weight":-1.8383759331264673,"gater":null},{"from":"27","to":"33","weight":1.214199116932027,"gater":null},{"from":"27","to":"34","weight":1.8251064978372573,"gater":null},{"from":"27","to":"35","weight":2.6592948090454462,"gater":null},{"from":"27","to":"36","weight":0.9021058009587678,"gater":null},{"from":"27","to":"37","weight":7.852031963365261,"gater":null},{"from":"27","to":"54","weight":3.4011047902691116,"gater":"38"},{"from":"27","to":"55","weight":0.568531486780023,"gater":"39"},{"from":"27","to":"56","weight":0.5405190738441216,"gater":"40"},{"from":"27","to":"57","weight":-2.6433980932349526,"gater":"41"},{"from":"27","to":"58","weight":3.5908934980587506,"gater":"42"},{"from":"27","to":"59","weight":0.25664149118680823,"gater":"43"},{"from":"27","to":"60","weight":4.584362119790947,"gater":"44"},{"from":"27","to":"61","weight":2.370284874456492,"gater":"45"},{"from":"27","to":"38","weight":-0.8132621851699421,"gater":null},{"from":"27","to":"39","weight":0.8550480169188195,"gater":null},{"from":"27","to":"40","weight":-39.060517643158306,"gater":null},{"from":"27","to":"41","weight":-0.6335198822915445,"gater":null},{"from":"27","to":"42","weight":-0.10980519909455534,"gater":null},{"from":"27","to":"43","weight":-0.37560661907035164,"gater":null},{"from":"27","to":"44","weight":-218.58687974603598,"gater":null},{"from":"27","to":"45","weight":-0.1692095234986698,"gater":null},{"from":"27","to":"46","weight":-0.0587755293494243,"gater":null},{"from":"27","to":"47","weight":-0.6886375643824143,"gater":null},{"from":"27","to":"48","weight":0.6533150986020311,"gater":null},{"from":"27","to":"49","weight":3.3432709921474895,"gater":null},{"from":"27","to":"50","weight":0.09079677730010934,"gater":null},{"from":"27","to":"51","weight":0.0319062980687117,"gater":null},{"from":"27","to":"52","weight":0.011272760150034504,"gater":null},{"from":"27","to":"53","weight":15.064558151683494,"gater":null},{"from":"27","to":"62","weight":3.784393950943664,"gater":null},{"from":"27","to":"63","weight":6.762677366185928,"gater":null},{"from":"27","to":"64","weight":9.32028165656219,"gater":null},{"from":"27","to":"65","weight":60.507760142916204,"gater":null},{"from":"27","to":"66","weight":2.9434643101553566,"gater":null},{"from":"27","to":"67","weight":4.2413689749608094,"gater":null},{"from":"27","to":"68","weight":0.9279432661840754,"gater":null},{"from":"27","to":"69","weight":2.6961759691085625,"gater":null},{"from":"27","to":"27","weight":1,"gater":"19"},{"from":"28","to":"70","weight":-1499.9958155499905,"gater":"36"},{"from":"28","to":"6","weight":0.05437532353607084,"gater":null},{"from":"28","to":"7","weight":-0.020406896029927325,"gater":null},{"from":"28","to":"8","weight":0.0775773730900415,"gater":null},{"from":"28","to":"9","weight":1.070428086889928,"gater":null},{"from":"28","to":"10","weight":0.09663512069595499,"gater":null},{"from":"28","to":"11","weight":-0.0017409040574159363,"gater":null},{"from":"28","to":"12","weight":0.011486929807392307,"gater":null},{"from":"28","to":"13","weight":0.04257769190719538,"gater":null},{"from":"28","to":"14","weight":-0.05867615784209938,"gater":null},{"from":"28","to":"15","weight":-0.08004403737470976,"gater":null},{"from":"28","to":"16","weight":0.036218067579075405,"gater":null},{"from":"28","to":"17","weight":-0.07978202192782387,"gater":null},{"from":"28","to":"18","weight":0.04034888682934407,"gater":null},{"from":"28","to":"19","weight":-0.026809415510526353,"gater":null},{"from":"28","to":"20","weight":0.09792512163560571,"gater":null},{"from":"28","to":"21","weight":-0.09228785190897608,"gater":null},{"from":"28","to":"30","weight":1.0264881977267448,"gater":null},{"from":"28","to":"31","weight":0.14588008958801046,"gater":null},{"from":"28","to":"32","weight":0.05186115756105745,"gater":null},{"from":"28","to":"33","weight":0.5275149723571777,"gater":null},{"from":"28","to":"34","weight":1.4385058769836705,"gater":null},{"from":"28","to":"35","weight":2.1169566671791262,"gater":null},{"from":"28","to":"36","weight":0.945350681018117,"gater":null},{"from":"28","to":"37","weight":7.007135833680909,"gater":null},{"from":"28","to":"54","weight":2.0122510619265275,"gater":"38"},{"from":"28","to":"55","weight":0.0792559562487735,"gater":"39"},{"from":"28","to":"56","weight":0.03978871930100444,"gater":"40"},{"from":"28","to":"57","weight":0.3577419862150824,"gater":"41"},{"from":"28","to":"58","weight":0.1006271616216274,"gater":"42"},{"from":"28","to":"59","weight":0.3179683998204302,"gater":"43"},{"from":"28","to":"60","weight":0.9421685940452644,"gater":"44"},{"from":"28","to":"61","weight":1.9958716716326392,"gater":"45"},{"from":"28","to":"38","weight":-0.1211924222670646,"gater":null},{"from":"28","to":"39","weight":-0.05756812479890772,"gater":null},{"from":"28","to":"40","weight":-38.420149108930545,"gater":null},{"from":"28","to":"41","weight":-0.6376797010519037,"gater":null},{"from":"28","to":"42","weight":-0.0025819348865801033,"gater":null},{"from":"28","to":"43","weight":0.21382809066376393,"gater":null},{"from":"28","to":"44","weight":-125.59993854513554,"gater":null},{"from":"28","to":"45","weight":-0.06481665856233326,"gater":null},{"from":"28","to":"46","weight":-0.023249979880301513,"gater":null},{"from":"28","to":"47","weight":-0.8000408482639815,"gater":null},{"from":"28","to":"48","weight":0.01504400675415024,"gater":null},{"from":"28","to":"49","weight":-0.021717753848091586,"gater":null},{"from":"28","to":"50","weight":0.11856647163969108,"gater":null},{"from":"28","to":"51","weight":0.053691668464793965,"gater":null},{"from":"28","to":"52","weight":0.013682435037837982,"gater":null},{"from":"28","to":"53","weight":-0.05232665112665281,"gater":null},{"from":"28","to":"62","weight":1.243465621025187,"gater":null},{"from":"28","to":"63","weight":0.4676474098393486,"gater":null},{"from":"28","to":"64","weight":9.24308508435259,"gater":null},{"from":"28","to":"65","weight":0.03535004257287679,"gater":null},{"from":"28","to":"66","weight":3.1374669741371646,"gater":null},{"from":"28","to":"67","weight":4.15584578083103,"gater":null},{"from":"28","to":"68","weight":0.2635928295380751,"gater":null},{"from":"28","to":"69","weight":0.39306981611064784,"gater":null},{"from":"28","to":"28","weight":1,"gater":"20"},{"from":"29","to":"70","weight":-7135.450434617634,"gater":"37"},{"from":"29","to":"6","weight":-0.382899394262437,"gater":null},{"from":"29","to":"7","weight":0.3696241823526902,"gater":null},{"from":"29","to":"8","weight":-0.5971725815398646,"gater":null},{"from":"29","to":"9","weight":1.1350874463964924,"gater":null},{"from":"29","to":"10","weight":-44.92276425628173,"gater":null},{"from":"29","to":"11","weight":0.4091443246404045,"gater":null},{"from":"29","to":"12","weight":0.0023397532054790153,"gater":null},{"from":"29","to":"13","weight":0.7471561833556852,"gater":null},{"from":"29","to":"14","weight":9.323344979917955,"gater":null},{"from":"29","to":"15","weight":0.7055365422169353,"gater":null},{"from":"29","to":"16","weight":0.12259480068186615,"gater":null},{"from":"29","to":"17","weight":1.3091832777839796,"gater":null},{"from":"29","to":"18","weight":1.9661640629922847,"gater":null},{"from":"29","to":"19","weight":0.11447271685570914,"gater":null},{"from":"29","to":"20","weight":-0.015261866395583653,"gater":null},{"from":"29","to":"21","weight":0.47803740278595336,"gater":null},{"from":"29","to":"30","weight":1.2297284048565071,"gater":null},{"from":"29","to":"31","weight":0.5884255889191401,"gater":null},{"from":"29","to":"32","weight":-1.805324093749118,"gater":null},{"from":"29","to":"33","weight":1.217672056108881,"gater":null},{"from":"29","to":"34","weight":1.8521958475444158,"gater":null},{"from":"29","to":"35","weight":2.5970115298900214,"gater":null},{"from":"29","to":"36","weight":0.782345223986134,"gater":null},{"from":"29","to":"37","weight":7.840651163796141,"gater":null},{"from":"29","to":"54","weight":0.31544463746931384,"gater":"38"},{"from":"29","to":"55","weight":0.513027675447496,"gater":"39"},{"from":"29","to":"56","weight":0.025459148680834254,"gater":"40"},{"from":"29","to":"57","weight":0.818314720809292,"gater":"41"},{"from":"29","to":"58","weight":3.979661328801458,"gater":"42"},{"from":"29","to":"59","weight":0.04789582848438641,"gater":"43"},{"from":"29","to":"60","weight":3.359005010900304,"gater":"44"},{"from":"29","to":"61","weight":2.3007744807570147,"gater":"45"},{"from":"29","to":"38","weight":-0.8886880410817138,"gater":null},{"from":"29","to":"39","weight":0.8730236173354966,"gater":null},{"from":"29","to":"40","weight":-39.0598614090697,"gater":null},{"from":"29","to":"41","weight":0.0034104834164556137,"gater":null},{"from":"29","to":"42","weight":-0.04503199874643433,"gater":null},{"from":"29","to":"43","weight":-0.788323239544781,"gater":null},{"from":"29","to":"44","weight":-74.72267037391987,"gater":null},{"from":"29","to":"45","weight":0.14456985482422485,"gater":null},{"from":"29","to":"46","weight":0.043212674458098455,"gater":null},{"from":"29","to":"47","weight":-0.5264518138100123,"gater":null},{"from":"29","to":"48","weight":0.5669455473366377,"gater":null},{"from":"29","to":"49","weight":0.6362448334305615,"gater":null},{"from":"29","to":"50","weight":0.10232387477431008,"gater":null},{"from":"29","to":"51","weight":0.0012506054561899193,"gater":null},{"from":"29","to":"52","weight":0.015448884537953206,"gater":null},{"from":"29","to":"53","weight":0.07701494597176957,"gater":null},{"from":"29","to":"62","weight":3.752881933594567,"gater":null},{"from":"29","to":"63","weight":6.6623084451702335,"gater":null},{"from":"29","to":"64","weight":1.022779431027167,"gater":null},{"from":"29","to":"65","weight":60.40390222580244,"gater":null},{"from":"29","to":"66","weight":2.862144576989949,"gater":null},{"from":"29","to":"67","weight":3.9510743640425665,"gater":null},{"from":"29","to":"68","weight":0.8468800396801924,"gater":null},{"from":"29","to":"69","weight":-0.026828098237644923,"gater":null},{"from":"29","to":"29","weight":1,"gater":"21"},{"from":"54","to":"70","weight":-9111.91347131209,"gater":"62"},{"from":"54","to":"38","weight":-0.0393279429183348,"gater":null},{"from":"54","to":"39","weight":0.6339748800520391,"gater":null},{"from":"54","to":"40","weight":-38.97537037413558,"gater":null},{"from":"54","to":"41","weight":-0.5729300776053498,"gater":null},{"from":"54","to":"42","weight":-0.039641244605629324,"gater":null},{"from":"54","to":"43","weight":-0.6148961460470618,"gater":null},{"from":"54","to":"44","weight":-217.12041738095198,"gater":null},{"from":"54","to":"45","weight":-0.18095974487579597,"gater":null},{"from":"54","to":"46","weight":-0.0006536250219977453,"gater":null},{"from":"54","to":"47","weight":0.018743142560202604,"gater":null},{"from":"54","to":"48","weight":0.5425558056323071,"gater":null},{"from":"54","to":"49","weight":2.86218348896136,"gater":null},{"from":"54","to":"50","weight":0.1262904890739785,"gater":null},{"from":"54","to":"51","weight":-0.041228007872442705,"gater":null},{"from":"54","to":"52","weight":0.0950622988265092,"gater":null},{"from":"54","to":"53","weight":15.096341701850115,"gater":null},{"from":"54","to":"62","weight":3.8570404733201773,"gater":null},{"from":"54","to":"63","weight":6.663708487770898,"gater":null},{"from":"54","to":"64","weight":9.348183957287072,"gater":null},{"from":"54","to":"65","weight":0.5724733506034116,"gater":null},{"from":"54","to":"66","weight":2.9252886039491117,"gater":null},{"from":"54","to":"67","weight":4.0739973680251715,"gater":null},{"from":"54","to":"68","weight":0.7330527830921203,"gater":null},{"from":"54","to":"69","weight":2.6353190249982155,"gater":null},{"from":"54","to":"54","weight":1,"gater":"46"},{"from":"55","to":"70","weight":-3657.660204643267,"gater":"63"},{"from":"55","to":"38","weight":-0.7020153645071499,"gater":null},{"from":"55","to":"39","weight":1.0436049136396262,"gater":null},{"from":"55","to":"40","weight":-43.02734211246885,"gater":null},{"from":"55","to":"41","weight":-0.659419107612233,"gater":null},{"from":"55","to":"42","weight":0.050202108460340816,"gater":null},{"from":"55","to":"43","weight":0.250500071887386,"gater":null},{"from":"55","to":"44","weight":-218.49223892596217,"gater":null},{"from":"55","to":"45","weight":-0.13273629221709787,"gater":null},{"from":"55","to":"46","weight":0.028409529848017753,"gater":null},{"from":"55","to":"47","weight":0.15682907997285897,"gater":null},{"from":"55","to":"48","weight":0.6899814395822936,"gater":null},{"from":"55","to":"49","weight":3.3511803757255594,"gater":null},{"from":"55","to":"50","weight":0.11168692262051791,"gater":null},{"from":"55","to":"51","weight":0.10199739321557492,"gater":null},{"from":"55","to":"52","weight":0.040625267446402435,"gater":null},{"from":"55","to":"53","weight":0.022190907907939532,"gater":null},{"from":"55","to":"62","weight":3.830005624337459,"gater":null},{"from":"55","to":"63","weight":6.834782050636986,"gater":null},{"from":"55","to":"64","weight":9.415719395537526,"gater":null},{"from":"55","to":"65","weight":0.9369509605345491,"gater":null},{"from":"55","to":"66","weight":2.950284926256697,"gater":null},{"from":"55","to":"67","weight":4.233139645783939,"gater":null},{"from":"55","to":"68","weight":0.9168337863263817,"gater":null},{"from":"55","to":"69","weight":2.7371758043387238,"gater":null},{"from":"55","to":"55","weight":1,"gater":"47"},{"from":"56","to":"70","weight":-15764.922662504647,"gater":"64"},{"from":"56","to":"38","weight":-0.838311563961657,"gater":null},{"from":"56","to":"39","weight":0.6275379431150798,"gater":null},{"from":"56","to":"40","weight":-39.121717773295764,"gater":null},{"from":"56","to":"41","weight":-0.6201494425084506,"gater":null},{"from":"56","to":"42","weight":-0.02160970316962564,"gater":null},{"from":"56","to":"43","weight":-0.7062310880542517,"gater":null},{"from":"56","to":"44","weight":-218.18599062057547,"gater":null},{"from":"56","to":"45","weight":-0.17960114429107277,"gater":null},{"from":"56","to":"46","weight":-0.027032416080883945,"gater":null},{"from":"56","to":"47","weight":0.10822416709726486,"gater":null},{"from":"56","to":"48","weight":0.4765081436896625,"gater":null},{"from":"56","to":"49","weight":3.0203356030710555,"gater":null},{"from":"56","to":"50","weight":0.12566607489077025,"gater":null},{"from":"56","to":"51","weight":-0.05037750435107131,"gater":null},{"from":"56","to":"52","weight":0.0672415061352478,"gater":null},{"from":"56","to":"53","weight":14.945845559194844,"gater":null},{"from":"56","to":"62","weight":1.0824996019510764,"gater":null},{"from":"56","to":"63","weight":6.751668131768846,"gater":null},{"from":"56","to":"64","weight":9.39981031095661,"gater":null},{"from":"56","to":"65","weight":60.02438237497947,"gater":null},{"from":"56","to":"66","weight":2.92836361114152,"gater":null},{"from":"56","to":"67","weight":4.18924884695915,"gater":null},{"from":"56","to":"68","weight":0.8285122040700048,"gater":null},{"from":"56","to":"69","weight":2.6731806404072693,"gater":null},{"from":"56","to":"56","weight":1,"gater":"48"},{"from":"57","to":"70","weight":301.55391808521483,"gater":"65"},{"from":"57","to":"38","weight":-0.9311044668558734,"gater":null},{"from":"57","to":"39","weight":1.0323381532600935,"gater":null},{"from":"57","to":"40","weight":-39.14573621358155,"gater":null},{"from":"57","to":"41","weight":0.02416493212314835,"gater":null},{"from":"57","to":"42","weight":0.003058856751398323,"gater":null},{"from":"57","to":"43","weight":-0.35729662926021266,"gater":null},{"from":"57","to":"44","weight":-218.66014255033375,"gater":null},{"from":"57","to":"45","weight":-0.00413086395633841,"gater":null},{"from":"57","to":"46","weight":-0.06877370531809704,"gater":null},{"from":"57","to":"47","weight":-0.567013362388734,"gater":null},{"from":"57","to":"48","weight":0.7067654704175822,"gater":null},{"from":"57","to":"49","weight":2.1319434366501957,"gater":null},{"from":"57","to":"50","weight":0.06838845018525444,"gater":null},{"from":"57","to":"51","weight":0.21761811337578768,"gater":null},{"from":"57","to":"52","weight":0.11821667242289888,"gater":null},{"from":"57","to":"53","weight":0.012776112384327656,"gater":null},{"from":"57","to":"62","weight":3.9473863139242518,"gater":null},{"from":"57","to":"63","weight":6.4131189041430146,"gater":null},{"from":"57","to":"64","weight":0.1535933386131352,"gater":null},{"from":"57","to":"65","weight":60.50992239753784,"gater":null},{"from":"57","to":"66","weight":2.856966624380572,"gater":null},{"from":"57","to":"67","weight":4.288113793458763,"gater":null},{"from":"57","to":"68","weight":0.8839059098865045,"gater":null},{"from":"57","to":"69","weight":0.08390340414704771,"gater":null},{"from":"57","to":"57","weight":1,"gater":"49"},{"from":"58","to":"70","weight":-12877.129896439694,"gater":"66"},{"from":"58","to":"38","weight":-0.729729531573828,"gater":null},{"from":"58","to":"39","weight":0.7357570090376427,"gater":null},{"from":"58","to":"40","weight":-39.079637644433355,"gater":null},{"from":"58","to":"41","weight":-0.0248167608767043,"gater":null},{"from":"58","to":"42","weight":-0.028039496550039587,"gater":null},{"from":"58","to":"43","weight":-0.24597921777930332,"gater":null},{"from":"58","to":"44","weight":-218.69461097018953,"gater":null},{"from":"58","to":"45","weight":-0.05098826123427734,"gater":null},{"from":"58","to":"46","weight":-0.040447720872129424,"gater":null},{"from":"58","to":"47","weight":-0.6546818713509934,"gater":null},{"from":"58","to":"48","weight":0.20167818279124494,"gater":null},{"from":"58","to":"49","weight":0.18154194330885506,"gater":null},{"from":"58","to":"50","weight":0.09291010118471911,"gater":null},{"from":"58","to":"51","weight":0.022547891235292807,"gater":null},{"from":"58","to":"52","weight":0.08591698744045184,"gater":null},{"from":"58","to":"53","weight":15.106274003360545,"gater":null},{"from":"58","to":"62","weight":3.799233116032549,"gater":null},{"from":"58","to":"63","weight":6.692538397645015,"gater":null},{"from":"58","to":"64","weight":1.1397103370798631,"gater":null},{"from":"58","to":"65","weight":60.37095666319108,"gater":null},{"from":"58","to":"66","weight":2.9891153051882258,"gater":null},{"from":"58","to":"67","weight":4.260236429228245,"gater":null},{"from":"58","to":"68","weight":0.825525632661011,"gater":null},{"from":"58","to":"69","weight":0.04144710401629368,"gater":null},{"from":"58","to":"58","weight":1,"gater":"50"},{"from":"59","to":"70","weight":-306.7498904286015,"gater":"67"},{"from":"59","to":"38","weight":-0.7118114555177093,"gater":null},{"from":"59","to":"39","weight":0.8787556892369156,"gater":null},{"from":"59","to":"40","weight":-38.58342657957279,"gater":null},{"from":"59","to":"41","weight":-0.5830410396138559,"gater":null},{"from":"59","to":"42","weight":0.05200674445935573,"gater":null},{"from":"59","to":"43","weight":-0.4634940057078901,"gater":null},{"from":"59","to":"44","weight":-218.67221943399394,"gater":null},{"from":"59","to":"45","weight":-0.1836246459505382,"gater":null},{"from":"59","to":"46","weight":-0.05776590640091048,"gater":null},{"from":"59","to":"47","weight":0.19177368054434624,"gater":null},{"from":"59","to":"48","weight":0.668260003759445,"gater":null},{"from":"59","to":"49","weight":3.318605642417415,"gater":null},{"from":"59","to":"50","weight":0.021282313659843136,"gater":null},{"from":"59","to":"51","weight":0.058786485503021714,"gater":null},{"from":"59","to":"52","weight":0.181378596667366,"gater":null},{"from":"59","to":"53","weight":14.937286882421303,"gater":null},{"from":"59","to":"62","weight":0.8551345706208477,"gater":null},{"from":"59","to":"63","weight":6.377131610903744,"gater":null},{"from":"59","to":"64","weight":9.258726386879019,"gater":null},{"from":"59","to":"65","weight":59.95761295173943,"gater":null},{"from":"59","to":"66","weight":2.7554660281108907,"gater":null},{"from":"59","to":"67","weight":4.420987512876359,"gater":null},{"from":"59","to":"68","weight":0.8221487527628488,"gater":null},{"from":"59","to":"69","weight":-0.30322605685503434,"gater":null},{"from":"59","to":"59","weight":1,"gater":"51"},{"from":"60","to":"70","weight":-18037.706859730606,"gater":"68"},{"from":"60","to":"38","weight":-0.9838762337616159,"gater":null},{"from":"60","to":"39","weight":0.9762056340047407,"gater":null},{"from":"60","to":"40","weight":-39.087932638244155,"gater":null},{"from":"60","to":"41","weight":-0.6559525217870259,"gater":null},{"from":"60","to":"42","weight":-0.07554948523370711,"gater":null},{"from":"60","to":"43","weight":-0.38533262505801713,"gater":null},{"from":"60","to":"44","weight":-218.68879067484298,"gater":null},{"from":"60","to":"45","weight":0.0352810857888289,"gater":null},{"from":"60","to":"46","weight":0.024052525704676343,"gater":null},{"from":"60","to":"47","weight":0.1840856482599694,"gater":null},{"from":"60","to":"48","weight":0.6756525424356302,"gater":null},{"from":"60","to":"49","weight":3.081763328810966,"gater":null},{"from":"60","to":"50","weight":0.1242074780571425,"gater":null},{"from":"60","to":"51","weight":0.1426803504919547,"gater":null},{"from":"60","to":"52","weight":0.14688361384853157,"gater":null},{"from":"60","to":"53","weight":14.956705406854887,"gater":null},{"from":"60","to":"62","weight":1.0854758694435684,"gater":null},{"from":"60","to":"63","weight":5.685020160157818,"gater":null},{"from":"60","to":"64","weight":9.415271689542017,"gater":null},{"from":"60","to":"65","weight":0.24619138104749763,"gater":null},{"from":"60","to":"66","weight":2.9161920148670437,"gater":null},{"from":"60","to":"67","weight":3.8158780135005816,"gater":null},{"from":"60","to":"68","weight":0.8324271766887846,"gater":null},{"from":"60","to":"69","weight":0.19399630437031345,"gater":null},{"from":"60","to":"60","weight":1,"gater":"52"},{"from":"61","to":"70","weight":-7305.976526930965,"gater":"69"},{"from":"61","to":"38","weight":-0.6695232440629558,"gater":null},{"from":"61","to":"39","weight":1.092557014425307,"gater":null},{"from":"61","to":"40","weight":-39.16129575569668,"gater":null},{"from":"61","to":"41","weight":-0.08193254901614042,"gater":null},{"from":"61","to":"42","weight":0.008315825184617208,"gater":null},{"from":"61","to":"43","weight":0.180077622681038,"gater":null},{"from":"61","to":"44","weight":-218.5596430098921,"gater":null},{"from":"61","to":"45","weight":-0.23627985446074826,"gater":null},{"from":"61","to":"46","weight":-0.0029476487075418855,"gater":null},{"from":"61","to":"47","weight":0.10464797062171194,"gater":null},{"from":"61","to":"48","weight":0.5903357207753712,"gater":null},{"from":"61","to":"49","weight":3.3290494333996543,"gater":null},{"from":"61","to":"50","weight":0.18159413020174664,"gater":null},{"from":"61","to":"51","weight":0.17601143434583516,"gater":null},{"from":"61","to":"52","weight":0.13070585453582403,"gater":null},{"from":"61","to":"53","weight":15.110311025947203,"gater":null},{"from":"61","to":"62","weight":2.540598778273598,"gater":null},{"from":"61","to":"63","weight":6.651777780956275,"gater":null},{"from":"61","to":"64","weight":9.332134382724725,"gater":null},{"from":"61","to":"65","weight":0.8860575329166211,"gater":null},{"from":"61","to":"66","weight":2.843457683642687,"gater":null},{"from":"61","to":"67","weight":4.2488014013444655,"gater":null},{"from":"61","to":"68","weight":0.31601354460235886,"gater":null},{"from":"61","to":"69","weight":2.712919741555846,"gater":null},{"from":"61","to":"61","weight":1,"gater":"53"}]}';
return angular.fromJson(a)}var b={get:a};return b}angular.module("chesireApp").factory("neuralNetworkStore",a)}(),function(){function a(a){function b(){return f=a.defer(),g=!0,f.promise}function c(){return g}function d(){g=!1}function e(){f&&f.resolve()}var f,g=!1,h={show:b,hide:d,isShown:c,notifySongHasBeenCreated:e};return h}angular.module("chesireApp").factory("songScaleCreator",a),a.$inject=["$q"]}(),function(){function a(a,b,c,d,e,f){function g(){j.startingNotes=e.get(),j.startingNote=j.startingNotes[0].value,j.scales=c,j.scale=c[0].value,j.repetitions=1,j.repetitionsValues=[{name:"1",value:1},{name:"2",value:2},{name:"3",value:3},{name:"4",value:4}]}function h(){var b=f.create(i());d.setCurrentPart(b),a.notifySongHasBeenCreated(),j.close()}function i(){for(var a={name:j.startingNote.name.substring(0,j.startingNote.name.length-1)+" "+j.scale.name+" (x"+j.repetitions+")",chords:[]},c=_.findIndex(b,function(a){return a.freq===j.startingNote.freq}),d=0,e=0,f=0;f<j.scale.intervals.length;f++)j.scale.intervals[f]&&e++;for(var g=c;g<b.length&&a.chords.length<j.repetitions*e;g++)j.scale.intervals[d]&&a.chords.push({name:"",notes:[angular.copy(b[g])]}),d++,d>=j.scale.intervals.length&&(d=0);return a}var j=this;j.songScaleCreator=a,j.close=a.hide,j.save=h,g()}angular.module("chesireApp").controller("SongScaleCreatorController",a),a.$inject=["songScaleCreator","NoteList","defaultScales","ScaleOptions","startingNotes","SongPartModel"]}(),function(){function a(){return{restrict:"E",templateUrl:"scripts/song-scale-creator/song-scale-creator.tpl.html",controller:"SongScaleCreatorController",controllerAs:"vm",scope:{}}}angular.module("chesireApp").directive("songScaleCreator",a)}(),function(){angular.module("chesireApp").constant("defaultScales",[{name:"Major",value:{name:"Major",intervals:[!0,!1,!0,!1,!0,!0,!1,!0,!1,!0,!1,!0]}},{name:"Minor",value:{name:"Minor",intervals:[!0,!1,!0,!0,!1,!0,!1,!0,!0,!1,!0,!1]}},{name:"Melodic minor",value:{name:"Melodic minor",intervals:[!0,!1,!0,!0,!1,!0,!0,!0,!1,!0,!1,!0]}},{name:"Minor pentatonic",value:{name:"Minor pentatonic",intervals:[!0,!1,!1,!0,!1,!0,!1,!0,!1,!1,!0,!1]}},{name:"Major pentatonic",value:{name:"Major pentatonic",intervals:[!0,!1,!0,!1,!0,!1,!1,!0,!1,!0,!1,!1]}},{name:"Blues",value:{name:"Blues",intervals:[!0,!1,!1,!0,!1,!0,!0,!0,!1,!1,!0,!1]}},{name:"Hungarian minor",value:{name:"Hungarian minor",intervals:[!0,!1,!0,!1,!1,!0,!0,!0,!1,!0,!1,!0]}},{name:"Persian",value:{name:"Persian",intervals:[!0,!0,!1,!1,!0,!0,!0,!1,!0,!1,!1,!0]}},{name:"Hirojoshi",value:{name:"Hirojoshi",intervals:[!0,!1,!0,!0,!1,!1,!1,!0,!0,!1,!1,!1]}},{name:"Arabian",value:{name:"Arabian",intervals:[!0,!1,!0,!1,!0,!0,!0,!1,!0,!1,!0,!1]}},{name:"Scottish",value:{name:"Scottish",intervals:[!0,!1,!0,!1,!1,!0,!1,!0,!1,!0,!1,!1]}}])}(),function(){function a(a,b){function c(){return h=a.defer(),i=!0,h.promise}function d(){return i}function e(){i=!1}function f(a){h&&(h.resolve(a),h=null)}function g(a,c,d){for(var e={name:a.name.substring(0,a.name.length-1)+" "+c.name,notes:[]},f=_.findIndex(b,function(b){return b.freq===a.freq}),g=0,h=f;h<b.length&&e.notes.length<d;h++)c.intervals[g]&&e.notes.push(angular.copy(b[h])),g++,g>=c.intervals.length&&(g=0);return e}var h,i=!1,j={showSelector:c,isOpen:d,close:e,notifyChordSelected:f,getChordFromParams:g};return j}angular.module("chesireApp").factory("chordSelector",a),a.$inject=["$q","NoteList"]}(),function(){function a(a,b,c){function d(){g.startingNotes=b.get(),g.startingNote=g.startingNotes[0].value,g.moods=c,g.mood=g.moods[0].value,g.numberOfNotes=6}function e(){var b=a.getChordFromParams(g.startingNote,g.mood,g.numberOfNotes);a.notifyChordSelected(b),f()}function f(){a.close()}var g=this;g.chordSelector=a,g.close=f,g.save=e,d()}angular.module("chesireApp").controller("ChordSelectorController",a),a.$inject=["chordSelector","startingNotes","chordMoods"]}(),function(){function a(){return{restrict:"E",templateUrl:"scripts/chord-selector/chord-selector.tpl.html",scope:{},controller:"ChordSelectorController",controllerAs:"vm"}}angular.module("chesireApp").directive("chordSelector",a)}(),function(){function a(a){function b(b){return f=a.defer(),h.chord=angular.copy(b),g=!0,f.promise}function c(){return g}function d(){g=!1}function e(a){f&&(f.resolve(a),f=null)}var f,g=!1,h={showEditor:b,isOpen:c,close:d,notifyChordEdited:e,chord:{}};return h}angular.module("chesireApp").factory("chordEditor",a),a.$inject=["$q"]}(),function(){function a(a){function b(){a.close()}function c(){a.notifyChordEdited(a.chord),a.close()}var d=this;d.chordEditor=a,d.close=b,d.save=c}angular.module("chesireApp").controller("ChordEditorController",a),a.$inject=["chordEditor"]}(),function(){function a(){return{restrict:"E",templateUrl:"scripts/chord-editor/chord-editor.tpl.html",scope:{},controller:"ChordEditorController",controllerAs:"vm"}}angular.module("chesireApp").directive("chordEditor",a)}(),function(){function a(a,b){function c(){a.$watch("vm.notes",d)}function d(a){a&&(i(a),k(a))}function e(a){return"selected"===o[a]}function f(a){return"possible"===o[a]}function g(a){p[a.name]?h(a):(n.notes.push(a),n.notes=angular.copy(n.notes))}function h(a){var b=_.findIndex(n.notes,function(b){return b.name===a.name});n.notes.splice(b,1),n.notes=angular.copy(n.notes)}function i(a){p={},a.forEach(j)}function j(a){p[a.name]={selected:!0,index:m(a)}}function k(a){o=Array.apply(null,new Array(b.length)).map(Number.prototype.valueOf,0),a.forEach(l)}function l(a){var b=p[a.name],c=b.index;o[c]="selected";for(var d=c%12,e=d;e<o.length;e+=12)"selected"!==o[e]&&(o[e]="possible")}function m(a){return _.findIndex(b,function(b){return b.name===a.name})}var n=this,o=[],p={};n.allNotes=b,n.isNoteSelected=e,n.selectNote=g,n.isNotePossible=f,c()}angular.module("chesireApp").controller("NotesKeyboardController",a),a.$inject=["$scope","NoteList"]}(),function(){function a(){return{restrict:"E",scope:{notes:"="},templateUrl:"scripts/notes-keyboard/notes-keyboard.tpl.html",controller:"NotesKeyboardController",controllerAs:"vm",bindToController:!0}}angular.module("chesireApp").directive("notesKeyboard",a)}(),function(){function a(a,b,c,d,e){function f(){a.subscribeToChangesInScaleOptions(h),c.subscribeToFrameChange(k),e.subscribeToChange(g)}function g(a){a&&(p.width=Math.round(a.max.x-a.min.x))}function h(a){a&&(p.chords=angular.copy(a.getCurrentPart().chords),m())}function i(a){return d.getChordName(a)}function j(a){return a.volume?a.volume*(1-p.MIN_OPACITY)+p.MIN_OPACITY:p.MIN_OPACITY}function k(a){var d=a.frame;if(d&&d.hands&&d.hands.length)for(var e=c.getRelativePositions(d,d.hands),f=b.getKeyRangesVolume(e.x),g=0;g<f.length;g++)l(g,f[g]);else m()}function l(a,b){p.chords&&p.chords[a]&&(p.chords[a].volume=b)}function m(){if(p.chords&&p.chords.length)for(var a=0;a<p.chords.length;a++)p.chords[a].volume=0}function n(a,b){return b>1?Math.round(1e4*(a/100/(b-1)))+"%":"50%"}function o(a,b){return b>p.CHORDS_TWO_COLUMNS_LIMIT&&a%2===1?p.SECOND_CHORD_BOTTOM+"px":"0px"}var p=this;p.MIN_OPACITY=.3,p.CHORDS_TWO_COLUMNS_LIMIT=5,p.SECOND_CHORD_BOTTOM=40,p.getChordName=i,p.getChordOpacity=j,p.getChordLeft=n,p.getChordBottom=o,f()}angular.module("chesireApp").controller("ChordNamesVisController",a),a.$inject=["ScaleOptions","VisualizationKeyHelper","Leapmotion","chordNames","playerBoundaries"]}(),function(){function a(){return{restrict:"E",templateUrl:"scripts/chord-names-vis/chord-names-vis.tpl.html",scope:{},controller:"ChordNamesVisController",controllerAs:"vm"}}angular.module("chesireApp").directive("chordNamesVis",a)}(),function(){function a(a,b,c,d,e,f,g){function h(){E.loadingFirstSong=!0,b.subscribeToChangesInScaleOptions(i),c.subscribeToChangeInAllSongs(q),d.subscribeToMenuOpening(n),e.subscribeToSongChanged(k),g.on("NEXT_SONG",o),g.on("PREV_SONG",p),g.on("PART_1",s),g.on("PART_2",t),g.on("PART_3",u),g.on("PART_4",v),g.on("PART_5",w),g.on("PART_6",x),g.on("PART_7",y),g.on("PART_8",z),g.on("PART_9",A),g.on("PART_10",B),a.$on("$destroy",D)}function i(a){E.loadingFirstSong=!1,a&&(E.currentSong=a,r(),e.notifySongHasChanged(!1))}function j(){0===E.songs.length&&(E.songs[0]=angular.copy(f)),E.indexOfSelectedSong>=E.songs.length&&(E.indexOfSelectedSong=E.songs.length-1),b.setScaleOptions(E.songs[E.indexOfSelectedSong])}function k(a){a&&b.setScaleOptions(E.currentSong)}function l(){E.showSongList=!E.showSongList,E.showSongList&&(E.songEditorShown=!1,d.notifyMenuOpen(F))}function m(){E.songEditorShown=!E.songEditorShown,E.songEditorShown&&(E.showSongList=!1,d.notifyMenuOpen(F))}function n(a){a!==F&&(E.songEditorShown=!1,E.showSongList=!1)}function o(){E.songs&&E.indexOfSelectedSong<E.songs.length-1&&(E.indexOfSelectedSong++,b.setScaleOptionsFromPreset(E.songs[E.indexOfSelectedSong]))}function p(){E.songs&&E.indexOfSelectedSong>0&&(E.indexOfSelectedSong--,b.setScaleOptionsFromPreset(E.songs[E.indexOfSelectedSong]))}function q(a,b){E.songs=a,b?j():r()}function r(){E.songs&&E.currentSong&&(E.indexOfSelectedSong=_.findIndex(E.songs,function(a){return E.currentSong&&a.name===E.currentSong.name}))}function s(){C(0)}function t(){C(1)}function u(){C(2)}function v(){C(3)}function w(){C(4)}function x(){C(5)}function y(){C(6)}function z(){C(7)}function A(){C(8)}function B(){C(9)}function C(a){a!==E.currentSong.currentPart&&(E.currentSong.setCurrentPartByIndex(a),b.setScaleOptions(E.currentSong))}function D(){b.unsubscribeToChangesInScaleOptions(i),c.unsubscribeToChangeInAllSongs(q),e.unsubscribeToSongChanged(k),e.unsubscribeToSongDeleted(j),g.off("NEXT_SONG",o),g.off("PREV_SONG",p),g.off("PART_1",s),g.off("PART_2",t),g.off("PART_3",u),g.off("PART_4",v),g.off("PART_5",w),g.off("PART_6",x),g.off("PART_7",y),g.off("PART_8",z),g.off("PART_9",A),g.off("PART_10",B)}var E=this,F="song-selector";E.toggleSongList=l,E.toggleSongEditor=m,E.goToNextSong=o,E.goToPrevSong=p,h()}angular.module("chesireApp").controller("SongSelectorController",a),a.$inject=["$scope","ScaleOptions","SongStore","UIService","songEditor","DefaultScale","hotKeys"]}(),function(){function a(){return{restrict:"E",templateUrl:"scripts/song-selector/song-selector.tpl.html",scope:{},controller:"SongSelectorController",controllerAs:"vm"}}angular.module("chesireApp").directive("songSelector",a)}(),function(){function a(a){function b(b){a.setScaleOptionsFromPreset(b)}var c=this;c.selectSong=b}angular.module("chesireApp").controller("SongListController",a),a.$inject=["ScaleOptions"]}(),function(){function a(){return{restrict:"E",templateUrl:"scripts/song-selector/song-list/song-list.tpl.html",scope:{songs:"=",selectedSong:"="},controller:"SongListController",controllerAs:"vm",bindToController:!0}}angular.module("chesireApp").directive("songList",a)}(),function(){function a(a,b,c,d){function e(){}function f(){n.song.$isModified=!0,n.songEditor.notifySongHasChanged(!0)}function g(){n.confirmingDeleteSong=!0}function h(){n.confirmingDeleteSong=!1}function i(){c.saveSong(n.song)}function j(){d.save(n.song,n.song.name||"song")}function k(){c.deleteSong(n.song),n.confirmingDeleteSong=!1}function l(b){m(b)&&(b.name=c.getUniqueName(b.name),n.song=b,a.setScaleOptionsFromPreset(n.song),n.song.$isModified=!0,n.songEditor.notifySongHasChanged(!0))}function m(a){return a&&a.parts&&a.parts.length}var n=this;n.saveSong=i,n.deleteSong=k,n.askConfirmationDeleteSong=g,n.cancelDeleteSong=h,n.songNameChanged=f,n.saveSongToFile=j,n.fileSaver=d,n.songLoaded=l,n.songEditor=b,e()}angular.module("chesireApp").controller("SongEditorController",a),a.$inject=["ScaleOptions","songEditor","SongStore","fileSaver"]}(),function(){function a(){return{restrict:"E",templateUrl:"scripts/song-selector/song-editor/song-editor.tpl.html",scope:{song:"="},controller:"SongEditorController",controllerAs:"vm",bindToController:!0}}angular.module("chesireApp").directive("songEditor",a)}(),function(){function a(){function a(a){angular.forEach(d,function(b){b(a)})}function b(a){d.push(a)}function c(a){d=_.without(d,a)}var d=[],e={notifySongHasChanged:a,subscribeToSongChanged:b,unsubscribeToSongChanged:c};return e}angular.module("chesireApp").factory("songEditor",a)}(),function(){angular.module("chesireApp").component("songPartsListEditor",{bindings:{song:"="},controller:"SongPartsListEditor as vm",templateUrl:"scripts/song-selector/song-parts-list-editor/song-parts-list-editor.tpl.html"})}(),function(){function a(a){function b(b){e.song.getCurrentPart().index!==b.index&&(e.song.setCurrentPart(b),a.setScaleOptions(e.song))}function c(){var a=e.song.addPart();b(a)}function d(b,c,d){var f=b["json/song-part-editor"].partIndex,g=e.song.movePart(f,d);g&&a.setScaleOptions(e.song)}var e=this;e.setCurrentPart=b,e.addPart=c,e.onDrop=d}angular.module("chesireApp").controller("SongPartsListEditor",a),a.$inject=["ScaleOptions"]}(),function(){angular.module("chesireApp").component("songPartEditor",{bindings:{},controller:"SongPartEditorController as vm",templateUrl:"scripts/song-selector/song-part-editor/song-part-editor.tpl.html"})}(),function(){function a(a,b,c,d,e,f,g){function h(){c.subscribeToChangesInScaleOptions(i),a.$on("$destroy",v)}function i(a){x.currentSong=a,a&&x.currentPart!==a.getCurrentPart()&&(x.currentPart=a.getCurrentPart())}function j(){e.notifySongHasChanged(!0)}function k(a){return b.getChordName(a)}function l(a){return x.currentPart.chords.length>w&&a%2===1}function m(a,b){d.showSelector().then(function(c){b[a]=c,e.notifySongHasChanged(!0)})}function n(a){x.currentSong.removeChordInPart(x.currentPart,a),e.notifySongHasChanged(!0)}function o(){x.confirmingDelete=!1,x.currentSong.deletePart(x.currentPart)&&e.notifySongHasChanged(!0)}function p(){x.currentSong.duplicatePart(x.currentPart)&&e.notifySongHasChanged(!0)}function q(a){x.currentSong.addChordBefore(x.currentPart,a),e.notifySongHasChanged(!0)}function r(){x.currentSong.addChordLast(x.currentPart),e.notifySongHasChanged(!0)}function s(a,b){f.showEditor(b[a]).then(function(b){x.currentSong.replaceChord(x.currentPart,a,b),e.notifySongHasChanged(!0)})}function t(){g.show().then(u)}function u(){e.notifySongHasChanged(!0)}function v(){c.unsubscribeToChangesInScaleOptions(i)}var w=5,x=this;x.currentPart=null,x.currentSong=null,x.getChordName=k,x.isChordInSecondRow=l,x.pickChord=m,x.removeChord=n,x.addChordBefore=q,x.addChordLast=r,x.partNameChanged=j,x.createPartFromScale=t,x.editChord=s,x.deletePart=o,x.duplicatePart=p,h()}angular.module("chesireApp").controller("SongPartEditorController",a),a.$inject=["$scope","chordNames","ScaleOptions","chordSelector","songEditor","chordEditor","songScaleCreator"]}(),function(){angular.module("chesireApp").component("songPartsListHud",{bindings:{song:"="},controller:"SongPartsListHudController as vm",templateUrl:"scripts/song-selector/song-parts-list-hud/song-parts-list-hud.tpl.html"})}(),function(){function a(a){function b(b){d.song.getCurrentPart().index!==b.index&&(d.song.setCurrentPart(b),a.setScaleOptions(d.song))}function c(b,c,e){var f=b["json/song-part-hud"].partIndex,g=d.song.movePart(f,e);g&&a.setScaleOptions(d.song)}var d=this;d.setCurrentPart=b,d.onDrop=c}angular.module("chesireApp").controller("SongPartsListHudController",a),a.$inject=["ScaleOptions"]}(),function(){function a(a,b,c,d,e,f,g){function h(){u.loadingFirstSynth=!0,g.subscribeToSynthPresetSelected(j),g.subscribeToSynthIsModified(k),c.subscribeToChangesInSynthOptions(i),f.subscribeToChangeInAllSynths(r),d.subscribeToMenuOpening(o),e.on("NEXT_SYNTH",p),e.on("PREV_SYNTH",q),a.$on("$destroy",t)}function i(a,c){b(function(){u.loadingFirstSynth?u.loadingFirstSynth=!1:u.synthPresetJustLoaded?u.synthPresetJustLoaded=!1:c||g.notifySynthIsModified(!0),a&&(u.currentSynth=angular.copy(a),s())})}function j(a){c.setSynthOptions(a),u.synthPresetJustLoaded=!0,g.notifySynthIsModified(!1)}function k(a){u.synthHasBeenModified=a}function l(){0===u.synths.length,u.indexOfSelectedSynth>=u.synths.length&&(u.indexOfSelectedSynth=u.synths.length-1),c.setSynthOptions(u.synths[u.indexOfSelectedSynth],!0)}function m(){u.showSynthList=!u.showSynthList,u.showSynthList&&(u.synthEditorShown=!1,d.notifyMenuOpen(v))}function n(){u.synthEditorShown=!u.synthEditorShown,u.synthEditorShown&&(u.showSynthList=!1,d.notifyMenuOpen(v))}function o(a){a!==v&&(u.synthEditorShown=!1,u.showSynthList=!1)}function p(){u.synths&&u.indexOfSelectedSynth<u.synths.length-1&&(u.indexOfSelectedSynth++,c.setSynthOptions(u.synths[u.indexOfSelectedSynth]))}function q(){u.synths&&u.indexOfSelectedSynth>0&&(u.indexOfSelectedSynth--,c.setSynthOptions(u.synths[u.indexOfSelectedSynth]))}function r(a,b){u.synths=a,b?l():s()}function s(){u.synths&&u.currentSynth&&(u.indexOfSelectedSynth=_.findIndex(u.synths,function(a){return u.currentSynth&&a.name===u.currentSynth.name}))}function t(){c.unsubscribeToChangesInSynthOptions(i),f.unsubscribeToChangeInAllSynths(r),g.unsubscribeToSynthIsModified(k),g.unsubscribeToSynthPresetSelected(j),e.off("NEXT_SYNTH",p),e.off("PREV_SYNTH",q)}var u=this,v="synth-selector";u.synthHasBeenModified=!1,u.toggleSynthList=m,u.toggleSynthEditor=n,u.goToNextSynth=p,u.goToPrevSynth=q,h()}angular.module("chesireApp").controller("SynthSelectorController",a),a.$inject=["$scope","$timeout","SynthOptions","UIService","hotKeys","SynthStore","synthSelector"]}(),function(){function a(){return{restrict:"E",templateUrl:"scripts/synth-selector/synth-selector.tpl.html",scope:{},controller:"SynthSelectorController",controllerAs:"vm"}}angular.module("chesireApp").directive("synthSelector",a)}(),function(){function a(){function a(a){g=a;for(var b=0;b<i.length;b++)i[b](a)}function b(a){i.push(a)}function c(a){i=_.without(i,a)}function d(a){h=a;for(var b=0;b<j.length;b++)j[b](a)}function e(a){j.push(a)}function f(a){j=_.without(j,a)}var g=null,h=!1,i=[],j=[],k={notifySynthPresetSelected:a,subscribeToSynthPresetSelected:b,unsubscribeToSynthPresetSelected:c,notifySynthIsModified:d,subscribeToSynthIsModified:e,unsubscribeToSynthIsModified:f};return k}angular.module("chesireApp").factory("synthSelector",a)}(),function(){function a(a){function b(b){a.notifySynthPresetSelected(angular.copy(b))}var c=this;c.selectSynth=b}angular.module("chesireApp").controller("SynthListController",a),a.$inject=["synthSelector"]}(),function(){function a(){return{restrict:"E",templateUrl:"scripts/synth-selector/synth-list/synth-list.tpl.html",scope:{synths:"=",selectedSynth:"="},controller:"SynthListController",controllerAs:"vm",bindToController:!0}}angular.module("chesireApp").directive("synthList",a)}(),function(){function a(){return{restrict:"E",templateUrl:"scripts/synth-selector/synth-editor/synth-editor.tpl.html",scope:{synthOptions:"="},controller:"SynthEditorController",controllerAs:"vm",bindToController:!0}}angular.module("chesireApp").directive("synthEditor",a)}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k){function l(){g.subscribeToChangesInSynthOptions(z),e.subscribeToSynthIsModified(n),d.subscribeToMenuOpening(A),a.$on("$destroy",C)}function m(){e.notifySynthIsModified(!0)}function n(a){D.synthHasBeenModified=a}function o(){h.saveSynth(D.synthOptions),e.notifySynthIsModified(!1)}function p(){j.save(D.synthOptions,D.synthOptions.name||"synth")}function q(a){r(a)&&(a.name=h.getUniqueName(a.name),D.song=a,g.setSynthOptions(a),e.notifySynthIsModified(!0))}function r(a){return a&&a.audio&&a.audio.components&&a.audio.oscillators?!0:!1}function s(){h.deleteSynth(D.synthOptions).then(v,w)}function t(){var a=k.open({modalTitle:"New synth",showCloseButton:!0,templateUrl:"scripts/synth-selector/add-synth/add-synth.tpl.html",controller:"AddSynthController"});a.result.then(function(a){var b=i.create();b.name=a||"New synth",g.setSynthOptions(b)})}function u(){var a=k.open({modalTitle:"Save synth as",showCloseButton:!0,templateUrl:"scripts/synth-selector/save-synth-as/save-synth-as.tpl.html",controller:"SaveSynthAsController",resolve:{oldName:function(){return D.synthOptions.name}}});a.result.then(function(a){D.synthOptions.name=a||D.synthOptions.name,h.saveSynth(D.synthOptions),e.notifySynthIsModified(!1)})}function v(){e.notifySynthIsModified(!1)}function w(a){c.error(a)}function x(){D.confirmingDeleteSynth=!0;var a=k.open({modalTitle:"Do you really want to delete it?",showCloseButton:!0,templateUrl:"scripts/synth-selector/delete-synth/delete-synth.tpl.html",controller:"DeleteSynthController"});a.result.then(function(a){a&&s()})}function y(){g.setSynthOptions(D.synthOptions)}function z(a){b(function(){a!==D.synthOptions&&(D.synthOptions=a)})}function A(a){"synth-options"!==a&&(D.expanded=!1)}function B(){D.expanded=!D.expanded,D.expanded&&d.notifyMenuOpen("synth-options")}function C(){d.unsubscribeToMenuOpening(A),g.unsubscribeToChangesInSynthOptions(z)}var D=this;D.outputModes=f,D.toggle=B,D.outputModeChanged=y,D.saveSynth=o,D.askConfirmationDeleteSynth=x,D.synthModified=m,D.createNewSynth=t,D.saveSynthAs=u,D.saveSynthToFile=p,D.fileSaver=j,D.synthLoaded=q,D.synthHasBeenModified=!1,l()}angular.module("chesireApp").controller("SynthEditorController",a),a.$inject=["$scope","$timeout","$log","UIService","synthSelector","outputModes","SynthOptions","SynthStore","SynthoptionsModel","fileSaver","modalFactory"]}(),function(){function a(a,b){function c(){e.newSynthName="New synth"}function d(){b.close(e.newSynthName)}var e={};a.vm=e,e.createSynth=d,c()}angular.module("chesireApp").controller("AddSynthController",a),a.$inject=["$scope","currentModalInstance"]}(),function(){function a(a,b){function c(){b.close(!1)}function d(){b.close(!0)}var e={};a.vm=e,e.cancel=c,e.confirm=d}angular.module("chesireApp").controller("DeleteSynthController",a),a.$inject=["$scope","currentModalInstance"]}(),function(){function a(a,b,c){function d(){f.newName=c}function e(){b.close(f.newName)}var f={};a.vm=f,f.saveSynthAs=e,d()}angular.module("chesireApp").controller("SaveSynthAsController",a),a.$inject=["$scope","currentModalInstance","oldName"]}(),function(){function a(){function a(a){return a.name?a.name:a.notes&&a.notes.length?"("+b(a.notes).name+")":"-"}function b(a){for(var b=a[0],c=1;c<a.length;c++)a[c].freq<b.freq&&(b=a[c]);return b}var c={getChordName:a};return c}angular.module("chesireApp").factory("chordNames",a)}(),function(){function a(){function a(a,b){function c(){b.on("keyup",d),b.on("keydown",d),b.on("keypress",d),a.$on("$destroy",e)}function d(a){a.stopPropagation()}function e(){b.off("keyup",d),b.off("keydown",d),b.off("keypress",d)}c()}return{restrict:"A",link:a}}angular.module("chesireApp").directive("stopKeyEvents",a)}(),function(){function a(a){return function(b){return a("number")(1e3/b,3)+" ms"}}function b(a){return function(b){return a("number")(60*b,0)+" bpm"}}function c(a){return function(b){return a("number")(1/b*60,0)+" bpm"}}angular.module("chesireApp").filter("toMs",a).filter("toBpm",b).filter("sToBpm",c),a.$inject=["$filter"],b.$inject=["$filter"],c.$inject=["$filter"]}(),function(){function a(){function a(a,c){if(!b())throw"Error, cannot save files";c=c||"chesire",c=c.replace(new RegExp(" ","g"),"_"),c=c.toLowerCase(),c+=".json",a=angular.toJson(a,4);var d=new Blob([a],{type:"text/plain;charset=utf-8"});window.saveAs(d,c)}function b(){return!!Blob&&!!window.saveAs}var c={save:a,isAvailable:b};return c}angular.module("chesireApp").factory("fileSaver",a)}(),function(){function a(){function a(a){return new b(a)}var c={create:a};return c}function b(a){this.init(a)}angular.module("chesireApp").service("ObserverFactory",a),b.prototype={init:function(a){this.subscribers=[],a=a||{},this.callbackOnSubscribe=!!a.callbackOnSubscribe,this.currentValue=void 0},subscribe:function(a){this.subscribers.push(a),this.callbackOnSubscribe&&a(this.currentValue)},unsubscribe:function(a){this.subscribers=_.without(this.subscribers,a)},notify:function(a){this.currentValue=a;for(var b=0;b<this.subscribers.length;b++)this.subscribers[b](this.currentValue)}}}(),function(){function a(a,b){function c(){var b=_.debounce(function(){e.notify()},d);angular.element(a).on("resize",b)}var d=1e3,e=b.create(),f={observer:e};return c(),f}angular.module("chesireApp").factory("windowResize",a),a.$inject=["$window","ObserverFactory"]}(),function(){function a(a,b){function c(c,d,e){c.backdropClass=e.backdropClass||"",e.avoidBackdropClosing||a(function(){d.on("click",b.close)},0,!1)}return{restrict:"E",replace:!0,template:'<a class="modal-backdrop {{backdropClass}}"></a>',link:c}}angular.module("chesireApp").directive("modalBackdrop",a),a.$inject=["$timeout","modalFactory"]}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(a){if(a.resolve=a.resolve||{},!a.template&&!a.templateUrl)throw new Error("custommodal: One of template or templateUrl options is required.");return a}function k(b){return a.all([l(b)].concat(m(b.resolve)))}function l(d){return d.template?a.when(d.template):b.get(d.templateUrl,{cache:c}).then(function(a){return a.data})}function m(b){var c=[];return angular.forEach(b,function(b){(angular.isFunction(b)||angular.isArray(b))&&c.push(a.when(d.invoke(b)))}),c}function n(){return q=q||h.find("body").eq(0)}function o(a){i(function(){a&&a.addClass(r)},0,!1)}function p(a){a&&(a.removeClass(r),i(function(){a.remove()},s,!1))}var q,r="is-shown",s=0,t=function(a){this._init(a)};return t.prototype._init=function(b){this._isBeingCreated=!0,this.options=j(b),this._resultPromise=a.defer(),this._willCreateModal=a.defer(),this.result=this._resultPromise.promise,k(this.options).then(angular.bind(this,this._createModal),angular.bind(this,this._errorCreatingModal))},t.prototype.whenReady=function(){return this._willCreateModal.promise},t.prototype.close=function(a){this._isBeingCreated||(this._resultPromise&&this._resultPromise.resolve(a),this.modalScope&&this.modalScope.$destroy(),this.backdropScope&&this.backdropScope.$destroy(),this.modalHtml&&p(this.modalHtml),this.backdropHtml&&p(this.backdropHtml),this._resultPromise=null,this._willCreateModal=null,this.modalScope=null,this.backdropScope=null,this.modalHtml=null,this.backdropHtml=null)},t.prototype._createModal=function(a){this._instantiateNewModalController(a);var b=a[0];this._createModalContent(b),this._createBackdrop(),this._isBeingCreated=!1,this._willCreateModal.resolve()},t.prototype._errorCreatingModal=function(){this._isBeingCreated=!1,this._resultPromise.reject(),this._willCreateModal.reject()},t.prototype._instantiateNewModalController=function(a){this.modalScope=e.$new();var b={},c=1;this.options.controller&&(b.$scope=this.modalScope,b.currentModalInstance=this,angular.forEach(this.options.resolve,function(d,e){b[e]=a[c++]}),f(this.options.controller,b))},t.prototype._createModalContent=function(a){var b=angular.element("<modal></modal>");b.attr("window-class",this.options.windowClass),b.attr("modal-title",this.options.modalTitle),b.attr("show-close-button",this.options.showCloseButton),b.html(a),this.modalHtml=g(b)(this.modalScope),n().append(this.modalHtml),o(this.modalHtml)},t.prototype._createBackdrop=function(){this.backdropScope=e.$new(!0);var a=angular.element("<modal-backdrop></modal-backdrop>");a.attr("backdrop-class",this.options.backdropClass),a.attr("avoid-backdrop-closing",this.options.avoidBackdropClosing),this.backdropHtml=g(a)(this.backdropScope),n().append(this.backdropHtml),o(this.backdropHtml)},t}angular.module("chesireApp").factory("ModalInstance",a),a.$inject=["$q","$http","$templateCache","$injector","$rootScope","$controller","$compile","$document","$timeout"]}(),function(){function a(a){function c(b,c,d){b.windowClass=d.windowClass||"",b.modalTitle=d.modalTitle||"",b.fadeClass=d.fadeClass||"",b.showCloseButton=!!d.showCloseButton&&"false"!==d.showCloseButton,a(function(){c[0].focus()},0,!1)}return{restrict:"E",scope:{},replace:!0,transclude:!0,templateUrl:"scripts/custom-modal/modal.tpl.html",link:c,controller:b}}function b(a,b){a.closeModal=b.close}angular.module("chesireApp").directive("modal",a),a.$inject=["$timeout"],b.$inject=["$scope","modalFactory"]}(),function(){function a(a){function b(b){c();var e=new a(b);return e.whenReady().then(function(){d=e}),e}function c(){d&&d.close(),d=null}var d,e={open:b,close:c};return e}angular.module("chesireApp").factory("modalFactory",a),a.$inject=["ModalInstance"]}(),function(){function a(a){function b(){var b=angular.element(a.document.querySelector("body"));b.on("keyup",e)}function c(a,b){i[a]=i[a]||[],i[a].push(b)}function d(a,b){i[a]&&(i[a]=_.without(i[a],b))}function e(a){var b=f(a);b&&g(b)}function f(a){var b;for(var c in h)if(b=h[c],b.keyCode===a.keyCode)return b.name=c,b}function g(a){angular.forEach(i[a.name],function(b){b(a.params)})}var h={TOGGLE_MUTE:{keyCode:32},NEXT_SONG:{keyCode:39},PREV_SONG:{keyCode:37},PART_1:{keyCode:49},PART_2:{keyCode:50},PART_3:{keyCode:51},PART_4:{keyCode:52},PART_5:{keyCode:53},PART_6:{keyCode:54},PART_7:{keyCode:55},PART_8:{keyCode:56},PART_9:{keyCode:57},PART_10:{keyCode:58},PREV_SYNTH:{keyCode:38},NEXT_SYNTH:{keyCode:40}},i={},j={on:c,off:d,actions:h};return b(),j}angular.module("chesireApp").factory("hotKeys",a),a.$inject=["$window"]}(),function(){angular.module("chesireApp").component("partSynthSelector",{bindings:{part:"="},controller:"PartSynthSelectorController as vm",templateUrl:"scripts/part-synth-selector/part-synth-selector.tpl.html"})}(),function(){function a(a,b,c){function d(){a.$on("$destroy",i),b.subscribeToChangeInAllSynths(f),a.$watch("vm.part",e)}function e(){g()}function f(a){j.synths=a,g()}function g(){if(j.part&&j.part.getPreferredSynth()&&j.synths){var a=j.part.getPreferredSynth(),b=_.findWhere(j.synths,{name:a});b?j.selectedSynth=b:j.selectedSynth=void 0}else j.selectedSynth=void 0}function h(){j.part.setPreferredSynth(j.selectedSynth),c.notifySongHasChanged(!0)}function i(){b.unsubscribeToChangeInAllSynths(f)}var j=this;j.selectedSynthChanged=h,d()}angular.module("chesireApp").controller("PartSynthSelectorController",a),a.$inject=["$scope","SynthStore","songEditor"]}(),function(){function a(a){function b(b,c){for(var d=.5,e=a.getChordsRelevanceFromX(c.x)||[],f=0;f<e.length;f++)e[f]>d&&(d=e[f]);return d=2*(d-.5)}var c={getValue:b};return c}angular.module("chesireApp").factory("closeToChordControl",a),a.$inject=["MultiNotesHelper"]}(),angular.module("chesireApp").run(["$templateCache",function(a){a.put("scripts/app/main.html",'<div class="header"> <song-selector></song-selector> <synth-selector></synth-selector> <!-- <synthoptions></synthoptions> --> <div class="logo"></div> </div> <div class="main-container" ng-click="vm.closeAllPopopovers()"> <!-- Background visualization --> <threeparticles></threeparticles> <chord-names-vis></chord-names-vis> <soundgenerator></soundgenerator> <midigenerator ng-show="false"></midigenerator> <controls-hud></controls-hud> <!-- <neural-trainer></neural-trainer> --> <song-scale-creator></song-scale-creator> <sound-muter></sound-muter> <!-- <helper-visuals></helper-visuals> --> <!-- <testmidi></testmidi> --> <!-- Stats --> </div>'),a.put("scripts/chord-editor/chord-editor.tpl.html",'<div class="chord-editor generic-modal" ng-if="vm.chordEditor.isOpen()"> <div class="generic-modal-backdrop chord-editor-backdrop" ng-click="vm.close()"></div> <div class="generic-modal-content"> <h1 class="generic-main-title">Edit chord</h1> <div class="generic-section"> <h3 class="generic-section-title"> Chord name </h3> <div class="generic-section-content"> <input type="text" stop-key-events ng-model="vm.chordEditor.chord.name" class="chord-editor-name"> </div> </div> <div class="generic-section"> <h3 class="generic-section-title"> Notes </h3> <div class="generic-section-content"> <notes-keyboard notes="vm.chordEditor.chord.notes" ng-if="vm.chordEditor.chord.notes"></notes-keyboard> </div> </div> <div class="align-center"> <button class="button generic-cancel-button" ng-click="vm.close()">Cancel</button> <button class="button generic-save-button" ng-click="vm.save()">Save chord</button> </div> </div> </div>'),a.put("scripts/chord-names-vis/chord-names-vis.tpl.html",'<div class="chord-names-vis" ng-if="vm.width" ng-style="{&quot;width&quot;: vm.width + &quot;px&quot;,\n                &quot;margin-left&quot;: (-vm.width/2) + &quot;px&quot; }"> <div ng-repeat="chord in vm.chords" class="chord-names-vis-chord" ng-style="{\n            &quot;opacity&quot;: vm.getChordOpacity(chord),\n            &quot;left&quot;: vm.getChordLeft($index, vm.chords.length),\n            &quot;bottom&quot;: vm.getChordBottom($index, vm.chords.length)\n        }"> {{vm.getChordName(chord)}} </div> </div>'),
a.put("scripts/chord-selector/chord-selector.tpl.html",'<div class="chord-selector generic-modal" ng-if="vm.chordSelector.isOpen()"> <div class="generic-modal-backdrop" ng-click="vm.close()"></div> <div class="generic-modal-content"> <h1 class="generic-main-title">Choose a chord</h1> <div class="generic-section"> <h3 class="generic-section-title"> Chord key </h3> <div class="generic-section-content"> <switch-two-values values="vm.startingNotes" ng-model="vm.startingNote"></switch-two-values> </div> </div> <div class="generic-section"> <h3 class="generic-section-title"> Chord moods </h3> <div class="generic-section-content"> <switch-two-values values="vm.moods" ng-model="vm.mood"></switch-two-values> </div> </div> <div class="generic-section"> <h3 class="generic-section-title"> Number of notes </h3> <div class="generic-section-content"> <input type="range" ng-model="vm.numberOfNotes" min="1" max="18"> {{vm.numberOfNotes}} </div> </div> <div class="align-center"> <button class="button generic-cancel-button" ng-click="vm.close()">Cancel</button> <button class="button generic-save-button" ng-click="vm.save()">Get chord</button> </div> </div> </div>'),a.put("scripts/controls-hud/controls-hud.html",'<div class="controls-hud"> <single-control-hud control-info="vm.volumeControl" related-param="Volume"></single-control-hud> <single-control-hud ng-repeat="control in vm.controls" control-info="control" related-param="{{vm.getMidiParamFromOptions(control).name}}"></single-control-hud> </div>'),a.put("scripts/controls-hud/single-control-hud.html",'<div class="single-control-hud"> <div class="single-control-hud-content"> <div class="single-control-hud-param"> {{vm.relatedParam || vm.controlInfo.name || \'Unknown param\'}} <span class="js-single-control-hud-text"></span> </div> <div class="single-control-hud-gesture"> {{vm.controlInfo.param}} </div> </div> <div class="single-control-hud-value"> <div class="single-control-hud-value-inner js-single-control-hud-value-inner"></div> </div> </div>'),a.put("scripts/custom-checkbox/custom-checkbox.html",'<div class="custom-checkbox"> <label ng-class="{&quot;checked&quot;: value}"> <input type="checkbox" ng-model="value" ng-change="changeCallback()"> </label> </div>'),a.put("scripts/custom-modal/modal.tpl.html",'<div class="modal-container"> <div class="modal {{windowClass}} {{fadeClass}}" ng-class="{\'modal-with-title\': !!modalTitle}"> <div ng-if="showCloseButton" class="modal-close-button js-modal-close-button" ng-click="closeModal()"></div> <h3 ng-if="modalTitle" ng-bind="modalTitle" class="modal-title"></h3> <div class="modal-content" ng-transclude></div> </div> </div>'),a.put("scripts/delay/delay.tpl.html",'<div class="component-title"> <h2 class="component-title-text">Delay</h2> <button class="button" ng-click="vm.removeComponent()">Remove delay</button> </div> <div ng-if="vm.componentInfo" class="row"> <div class="column"> <div class="oscillator-section"> <h4 class="oscillator-section-title"> <div class="oscillator-section-title-full-left"> Delay time </div> <button class="button" ng-click="vm.toggleDelay()"> <span ng-show="vm.componentInfo.controls.delay.enabled">Disable</span> <span ng-show="!vm.componentInfo.controls.delay.enabled">Enable</span> gesture control </button> </h4> <div class="oscillator-section-content" ng-show="vm.componentInfo.controls.delay.enabled"> <div class="slider-with-value"> <div class="slider-with-value-label">Min</div> <input class="slider-with-value-slider" ng-change="vm.notifyOptionsChanged()" ng-model-options="{ debounce: 500 }" type="range" min="{{::vm.componentInfo.MIN_DELAY}}" max="{{::vm.componentInfo.MAX_DELAY}}" step="{{::vm.DELAY_STEP}}" ng-model="vm.componentInfo.minDelay"> <div class="slider-with-value-value"> <div>{{vm.componentInfo.minDelay | sToBpm}}</div> <div class="secondary-text">({{vm.componentInfo.minDelay | number: 2}})</div> </div> </div> <div class="slider-with-value"> <div class="slider-with-value-label">Max</div> <input class="slider-with-value-slider" ng-change="vm.notifyOptionsChanged()" ng-model-options="{ debounce: 500 }" type="range" min="{{::vm.componentInfo.MIN_DELAY}}" max="{{::vm.componentInfo.MAX_DELAY}}" step="{{::vm.DELAY_STEP}}" ng-model="vm.componentInfo.maxDelay"> <div class="slider-with-value-value"> <div>{{vm.componentInfo.maxDelay | sToBpm}}</div> <div class="secondary-text">({{vm.componentInfo.maxDelay | number: 2}})</div> </div> </div> <gesture-selector gesture-object="vm.componentInfo.controls.delay" change-callback="vm.notifyOptionsChanged()"></gesture-selector> </div> <div class="oscillator-section-content" ng-show="!vm.componentInfo.controls.delay.enabled"> <div class="slider-with-value"> <input class="slider-with-value-slider" ng-change="vm.notifyOptionsChanged()" ng-model-options="{ debounce: 500 }" type="range" min="{{::vm.componentInfo.MIN_DELAY}}" max="{{::vm.componentInfo.MAX_DELAY}}" step="{{::vm.DELAY_STEP}}" ng-model="vm.componentInfo.delay"> <div class="slider-with-value-value"> <div>{{vm.componentInfo.delay | sToBpm}}</div> <div class="secondary-text">({{vm.componentInfo.delay | number: 2}})</div> </div> </div> </div> </div> </div> <div class="column"> <div class="oscillator-section"> <h4 class="oscillator-section-title"> <div class="oscillator-section-title-full-left"> Feedback </div> <button class="button" ng-click="vm.toggleFeedback()"> <span ng-show="vm.componentInfo.controls.feedback.enabled">Disable</span> <span ng-show="!vm.componentInfo.controls.feedback.enabled">Enable</span> gesture control </button> </h4> <div class="oscillator-section-content" ng-show="vm.componentInfo.controls.feedback.enabled"> <gesture-selector gesture-object="vm.componentInfo.controls.feedback" change-callback="vm.notifyOptionsChanged()"></gesture-selector> </div> <div class="oscillator-section-content" ng-show="!vm.componentInfo.controls.feedback.enabled"> <div class="slider-with-value"> <input class="slider-with-value-slider" ng-change="vm.notifyOptionsChanged()" ng-model-options="{ debounce: 500 }" type="range" min="0" max="1" step="0.01" ng-model="vm.componentInfo.feedback"> <div class="slider-with-value-value"> {{vm.componentInfo.feedback*100 | number:0}} % </div> </div> </div> </div> <div class="oscillator-section"> <h4 class="oscillator-section-title"> Cutoff frequency </h4> <div class="oscillator-section-content"> <div class="slider-with-value"> <input class="slider-with-value-slider" ng-change="vm.notifyOptionsChanged()" ng-model-options="{ debounce: 500 }" type="range" min="20" max="22000" step="5" ng-model="vm.componentInfo.cutoff"> <div class="slider-with-value-value"> {{vm.componentInfo.cutoff | number:0}} Hz </div> </div> </div> </div> </div> </div>'),a.put("scripts/distortion/distortion.tpl.html",'<div> <div class="component-title"> <h2 class="component-title-text">Distortion</h2> <button class="button" ng-click="vm.removeComponent()">Remove distortion</button> </div> <div class="oscillator-section"> <h4 class="oscillator-section-title"> <div class="oscillator-section-title-full-left"> Amount </div> <button class="button" ng-click="vm.toggleAmount()"> <span ng-show="vm.componentInfo.controls.amount.enabled">Disable</span> <span ng-show="!vm.componentInfo.controls.amount.enabled">Enable</span> gesture control </button> </h4> <div class="oscillator-section-content" ng-show="vm.componentInfo.controls.amount.enabled"> <gesture-selector gesture-object="vm.componentInfo.controls.amount" change-callback="vm.notifyOptionsChanged()"></gesture-selector> </div> <div class="oscillator-section-content" ng-show="!vm.componentInfo.controls.amount.enabled"> <div class="slider-with-value"> <input class="slider-with-value-slider" ng-change="vm.notifyOptionsChanged()" ng-model-options="{ debounce: 500 }" type="range" min="vm.componentInfo.MIN_AMOUNT" max="vm.componentInfo.MAX_AMOUNT" step="0.5" ng-model="vm.componentInfo.amount"> <div class="slider-with-value-value"> {{vm.componentInfo.amount | number:1}} % </div> </div> </div> </div> </div>'),a.put("scripts/equalizer/equalizer.tpl.html",'<div> <div class="component-title"> <h2 class="component-title-text">Equalizer</h2> <button class="button" ng-click="vm.removeComponent()">Remove equalizer</button> </div> <div ng-if="vm.componentInfo" class="row"> <div class="column"> <div class="oscillator-section"> <h4 class="oscillator-section-title">EQ type</h4> <div class="oscillator-section-content"> <select-box value="vm.componentInfo.eqType" value-list="vm.availableEqTypes" attr-to-show="name" change-callback="vm.eqTypeChanged()"></select-box> </div> </div> <div class="oscillator-section" ng-show="vm.componentInfo.eqType.usesGain"> <h4 class="oscillator-section-title"> <div class="oscillator-section-title-full-left"> Gain </div> <button class="button" ng-click="vm.toggleGain()"> <span ng-show="vm.componentInfo.controls.gain.enabled">Disable</span> <span ng-show="!vm.componentInfo.controls.gain.enabled">Enable</span> gesture control </button> </h4> <div class="oscillator-section-content" ng-show="vm.componentInfo.controls.gain.enabled"> <div class="slider-with-value"> <div class="slider-with-value-label">Min</div> <input class="slider-with-value-slider" ng-change="vm.notifyOptionsChanged()" ng-model-options="{ debounce: 500 }" type="range" min="{{::vm.componentInfo.DEFAULT_MIN_GAIN}}" max="{{::vm.componentInfo.DEFAULT_MAX_GAIN}}" step="{{::vm.GAIN_STEP}}" ng-model="vm.componentInfo.minGain"> <div class="slider-with-value-value"> {{vm.componentInfo.minGain | number:0}} </div> </div> <div class="slider-with-value"> <div class="slider-with-value-label">Max</div> <input class="slider-with-value-slider" ng-change="vm.notifyOptionsChanged()" ng-model-options="{ debounce: 500 }" type="range" min="{{::vm.componentInfo.DEFAULT_MIN_GAIN}}" max="{{::vm.componentInfo.DEFAULT_MAX_GAIN}}" step="{{::vm.GAIN_STEP}}" ng-model="vm.componentInfo.maxGain"> <div class="slider-with-value-value"> {{vm.componentInfo.maxGain | number:0}} </div> </div> <gesture-selector gesture-object="vm.componentInfo.controls.gain" change-callback="vm.notifyOptionsChanged()"></gesture-selector> </div> <div class="oscillator-section-content" ng-show="!vm.componentInfo.controls.gain.enabled"> <div class="slider-with-value"> <input class="slider-with-value-slider" ng-change="vm.notifyOptionsChanged()" ng-model-options="{ debounce: 500 }" type="range" min="{{::vm.componentInfo.DEFAULT_MIN_GAIN}}" max="{{::vm.componentInfo.DEFAULT_MAX_GAIN}}" step="{{::vm.GAIN_STEP}}" ng-model="vm.componentInfo.gain"> <div class="slider-with-value-value"> {{vm.componentInfo.gain | number:0}} </div> </div> </div> </div> </div> <div class="column"> <div class="oscillator-section"> <h4 class="oscillator-section-title"> <div class="oscillator-section-title-full-left"> Frequency </div> <button class="button" ng-click="vm.toggleFrequency()"> <span ng-show="vm.componentInfo.controls.freq.enabled">Disable</span> <span ng-show="!vm.componentInfo.controls.freq.enabled">Enable</span> gesture control </button> </h4> <div class="oscillator-section-content" ng-show="vm.componentInfo.controls.freq.enabled"> <div class="slider-with-value"> <div class="slider-with-value-label">Min</div> <input class="slider-with-value-slider" ng-change="vm.notifyOptionsChanged()" ng-model-options="{ debounce: 500 }" type="range" min="{{::vm.componentInfo.DEFAULT_MIN_FREQ}}" max="{{::vm.componentInfo.DEFAULT_MAX_FREQ}}" step="{{::vm.FREQ_STEP}}" ng-model="vm.componentInfo.minFreq"> <div class="slider-with-value-value"> {{vm.componentInfo.minFreq | number:0}} Hz </div> </div> <div class="slider-with-value"> <div class="slider-with-value-label">Max</div> <input class="slider-with-value-slider" ng-change="vm.notifyOptionsChanged()" ng-model-options="{ debounce: 500 }" type="range" min="{{::vm.componentInfo.DEFAULT_MIN_FREQ}}" max="{{::vm.componentInfo.DEFAULT_MAX_FREQ}}" step="{{::vm.FREQ_STEP}}" ng-model="vm.componentInfo.maxFreq"> <div class="slider-with-value-value"> {{vm.componentInfo.maxFreq | number:0}} Hz </div> </div> <gesture-selector gesture-object="vm.componentInfo.controls.freq" change-callback="vm.notifyOptionsChanged()"></gesture-selector> </div> <div class="oscillator-section-content" ng-show="!vm.componentInfo.controls.freq.enabled"> <div class="slider-with-value"> <input class="slider-with-value-slider" ng-change="vm.notifyOptionsChanged()" ng-model-options="{ debounce: 500 }" type="range" min="{{::vm.componentInfo.DEFAULT_MIN_FREQ}}" max="{{::vm.componentInfo.DEFAULT_MAX_FREQ}}" step="{{::vm.FREQ_STEP}}" ng-model="vm.componentInfo.freq"> <div class="slider-with-value-value"> {{vm.componentInfo.freq | number:0}} Hz </div> </div> </div> </div> <div class="oscillator-section" ng-show="vm.componentInfo.eqType.usesQ"> <h4 class="oscillator-section-title"> <div class="oscillator-section-title-full-left"> Q </div> <button class="button" ng-click="vm.toggleQ()"> <span ng-show="vm.componentInfo.controls.q.enabled">Disable</span> <span ng-show="!vm.componentInfo.controls.q.enabled">Enable</span> gesture control </button> </h4> <div class="oscillator-section-content" ng-show="vm.componentInfo.controls.q.enabled"> <div class="slider-with-value"> <div class="slider-with-value-label">Min</div> <input class="slider-with-value-slider" ng-change="vm.notifyOptionsChanged()" ng-model-options="{ debounce: 500 }" type="range" min="{{::vm.componentInfo.DEFAULT_MIN_Q}}" max="{{::vm.componentInfo.DEFAULT_MAX_Q}}" step="{{::vm.Q_STEP}}" ng-model="vm.componentInfo.minQ"> <div class="slider-with-value-value"> {{vm.componentInfo.minQ | number:0}} </div> </div> <div class="slider-with-value"> <div class="slider-with-value-label">Max</div> <input class="slider-with-value-slider" ng-change="vm.notifyOptionsChanged()" ng-model-options="{ debounce: 500 }" type="range" min="{{::vm.componentInfo.DEFAULT_MIN_Q}}" max="{{::vm.componentInfo.DEFAULT_MAX_Q}}" step="{{::vm.Q_STEP}}" ng-model="vm.componentInfo.maxQ"> <div class="slider-with-value-value"> {{vm.componentInfo.maxQ | number:0}} </div> </div> <gesture-selector gesture-object="vm.componentInfo.controls.q" change-callback="vm.notifyOptionsChanged()"></gesture-selector> </div> <div class="oscillator-section-content" ng-show="!vm.componentInfo.controls.q.enabled"> <div class="slider-with-value"> <input class="slider-with-value-slider" ng-change="vm.notifyOptionsChanged()" ng-model-options="{ debounce: 500 }" type="range" min="{{::vm.componentInfo.DEFAULT_MIN_Q}}" max="{{::vm.componentInfo.DEFAULT_MAX_Q}}" step="{{::vm.Q_STEP}}" ng-model="vm.componentInfo.q"> <div class="slider-with-value-value"> {{vm.componentInfo.q | number:0}} </div> </div> </div> </div> </div> </div> </div>'),a.put("scripts/file-loader/file-loader.tpl.html",'<label class="file-loader big-button"> Load from file <input type="file" accept=".json" class="js-file-input file-loader-input"> </label>'),a.put("scripts/gesture-selector/gesture-selector.html",'<div class="gesture-selector"> <div class="gesture-selector-gesture"> <div class="gesture-selector-gesture-label"> Gesture: </div> <div class="gesture-selector-gesture-select"> <select-box value="vm.gestureObject.param" value-list="vm.availableGestures" change-callback="vm.changeCallback()"></select-box> </div> </div> <div class="gesture-selector-response"> <div class="gesture-selector-response-label"> Response: </div> <div class="gesture-selector-response-select"> <response-function response-function-info="vm.gestureObject.responseFunction" change-callback="vm.changeCallback()"></response-function> </div> </div> </div>'),a.put("scripts/gesture-selector/response-function-param.html",'<div class="response-function-param"> <div class="response-function-param-name"> {{vm.paramInfo.name}} </div> <div class="response-function-param-value"> <input ng-show="vm.isNumber" type="range" min="0" max="1" step="0.01" ng-model="vm.selectedValue" ng-model-options="{ debounce: 500 }" ng-change="vm.selectedValueChanged()"> <custom-checkbox ng-show="vm.isBoolean" value="vm.selectedValue" change-callback="vm.selectedValueChanged()"></custom-checkbox> </div> </div>'),a.put("scripts/gesture-selector/response-function.html",'<div class="response-function"> <select-box value="vm.selectedResponseFunction" value-list="vm.availableResponseFunctions" attr-to-show="name" change-callback="vm.responseFunctionChanged()"></select-box> <div class="response-function-details"> <div class="response-function-graph-container"> <ul class="response-function-graph"> <li ng-repeat="responseValue in vm.responseFunctionValues" class="response-function-graph-value" style="width: {{100*vm.responseFunctionIncrement}}%;\n                           left:  {{100*responseValue.x}}%;\n                           height: {{100*responseValue.y}}%"></li> </ul> </div> <ul class="response-function-params"> <li ng-repeat="(key, param) in vm.selectedResponseFunction.params"> <response-function-param param-parent-object="vm.responseFunctionInfo" param-key="key" param-info="param" change-callback="vm.responseFunctionParamsChanged()"></response-function-param> </li> </ul> </div> </div>'),a.put("scripts/helper-visuals/helper-visuals.html",'<div class="helper-visuals"> <ul> <li ng-repeat="motion in vm.motionsTracked"> <span class="helper-visuals-data">{{motion.name}}</span> <span class="helper-visuals-data">{{motion.actualValue | number:1}}</span> <span class="helper-visuals-data">(min:{{motion.min | number:1}})</span> <span class="helper-visuals-data">(max:{{motion.max | number:1}})</span> </li> </ul> </div>'),a.put("scripts/midi/midi-generator.html",'<div class="midigenerator"> <ul> <li ng-repeat="midiOutput in midiOutputs"> {{midiOutput.name}} </li> </ul> <ul> <li ng-repeat="note in notesBeingPlayed"> {{note.name}} - {{note.unnormalizedGain}} </li> </ul> <p>last notesOn</p> <ul> <li ng-repeat="note in lastNotesOn"> {{note.name}} - {{note.unnormalizedGain}} </li> </ul> <p>notesOff</p> <ul> <li ng-repeat="note in lastNotesOff"> {{note.name}} - {{note.unnormalizedGain}} </li> </ul> <p>notesUpdate</p> <ul> <li ng-repeat="note in notesUpdate"> {{note.name}} - {{note.unnormalizedGain}} </li> </ul> </div>'),a.put("scripts/midi/testmidi.html",'<div class="testmidi"> <button ng-click="start()">Iniciar</button> <button ng-click="start2()">Iniciar2</button> <button ng-click="tune()">Tune1</button> <button ng-click="control()">Control</button> <button ng-click="middle(0)">0</button> <button ng-click="middle(0.2)">0.2</button> <button ng-click="middle(0.4)">0.4</button> <button ng-click="middle(0.6)">0.6</button> <button ng-click="middle(0.8)">0.8</button> <button ng-click="middle(1)">1</button> <button ng-click="end()">Fin</button> <button ng-click="end2()">Fin2</button> </div>'),a.put("scripts/neural-trainer/neural-trainer.html",'<div class="neural-trainer-switch"> <button class="button" ng-click="vm.toggleShow()">Show neural trainer</button> </div> <div ng-if="vm.show" class="neural-trainer" ng-class="{&quot;translucent&quot;: vm.recording || vm.testing }"> <button class="big-button config-menu-close" ng-click="vm.toggleShow()"></button> <button class="button" ng-show="!vm.recording" ng-click="vm.startRecording()">Start recording</button> <button class="button" ng-show="vm.recording" ng-click="vm.stopRecording()">Stop recording</button> <button class="button" ng-show="!vm.testing && vm.neuralNetwork" ng-click="vm.startTesting()">Start testing</button> <button class="button" ng-show="vm.testing && vm.neuralNetwork" ng-click="vm.stopTesting()">Stop testing</button> <div class="neural-trainer-active-container"> <div class="neural-trainer-active-light" ng-style="{&quot;height&quot;: 100*vm.output + &quot;%&quot;}"></div> </div> </div>'),a.put("scripts/noise-generator/noise-generator.tpl.html",'<div class="component-title"> <h2 class="component-title-text">Noise</h2> <button class="button" ng-click="vm.removeNoise(vm.noiseConfig)">Remove noise</button> </div> <div class="row"> <div class="column"> <div class="oscillator-section"> <div class="oscillator-section-title"> <h4 class="oscillator-section-title-full-left">Volume control</h4> <button class="button" ng-click="vm.toggleGainControl()"> <span ng-show="vm.noiseConfig.controls.gain.enabled">Disable</span> <span ng-show="!vm.noiseConfig.controls.gain.enabled">Enable</span> gesture control </button> </div> <div class="oscillator-section-content" ng-show="vm.noiseConfig.controls.gain.enabled"> <gesture-selector gesture-object="vm.noiseConfig.controls.gain" change-callback="vm.gainControllerInfoChanged()"></gesture-selector> </div> <div class="oscillator-section-content" ng-show="!vm.noiseConfig.controls.gain.enabled"> <div class="slider-with-value"> <input class="slider-with-value-slider" ng-change="vm.gainControllerInfoChanged()" ng-model-options="{ debounce: 500 }" type="range" min="0" max="1" step="0.01" ng-model="vm.noiseConfig.gain"> <div class="slider-with-value-value"> {{vm.noiseConfig.gain*100 | number:0}}% </div> </div> </div> </div> </div> </div>'),a.put("scripts/notes-keyboard/notes-keyboard.tpl.html",'<ul class="notes-keyboard"> <li class="notes-keyboard-note" ng-repeat="note in vm.allNotes" ng-click="vm.selectNote(note)" ng-class="{&quot;sharp-note&quot;: (note.name.indexOf(&quot;#&quot;)!==-1)\n                    , &quot;selected&quot;: vm.isNoteSelected($index)\n                    , &quot;possible&quot;: vm.isNotePossible($index)}"> <div class="notes-keyboard-note-content"> <button class="notes-keyboard-note-button"></button> <div class="notes-keyboard-note-info" ng-bind="::note.name"></div> </div> </li> </ul>'),a.put("scripts/oscillator/oscillator-fm/oscillator-fm.tpl.html",'<div class="oscillator-fm"> <div class="oscillator-sub-section"> <h4 class="oscillator-sub-section-title">Frequency rate</h4> <div class="oscillator-sub-section-content"> <div class="slider-with-value"> <input class="slider-with-value-slider" ng-change="vm.componentChanged()" ng-model-options="{ debounce: 500 }" type="range" min="0.25" max="6" step="0.05" ng-model="vm.component.freq"> <div class="slider-with-value-value">{{vm.component.freq | number:2}}</div> </div> </div> </div> <div class="oscillator-sub-section"> <h4 class="oscillator-sub-section-title"> <div class="oscillator-sub-section-title-full-width">Depth</div> <button class="button" ng-click="vm.toggleDepthControl()"> <span ng-show="vm.component.controls.depth.enabled">Disable</span> <span ng-show="!vm.component.controls.depth.enabled">Enable</span> gesture control </button> </h4> <div class="oscillator-sub-section-content"> <div ng-show="vm.component.controls.depth.enabled"> <gesture-selector gesture-object="vm.component.controls.depth" change-callback="vm.componentChanged()"></gesture-selector> </div> <div ng-show="!vm.component.controls.depth.enabled"> <div class="slider-with-value"> <input class="slider-with-value-slider" ng-change="vm.componentChanged()" ng-model-options="{ debounce: 500 }" type="range" min="0" max="1" step="0.01" ng-model="vm.component.depth"> <div class="slider-with-value-value">{{vm.component.depth | number:2}}</div> </div> </div> </div> </div> <div class="oscillator-sub-section"> <h4 class="oscillator-sub-section-title"> <div class="oscillator-sub-section-title-full-width">Pre-modulator</div> <button class="button" ng-click="vm.togglePreModulator()"> <span ng-show="vm.component.preModulator.enabled">Disable</span> <span ng-show="!vm.component.preModulator.enabled">Enable</span> pre-modulator </button> </h4> <div class="oscillator-sub-section-content" ng-show="vm.component.preModulator.enabled"> <div class="slider-with-value"> <div class="slider-with-value-label">Depth</div> <input class="slider-with-value-slider" ng-change="vm.componentChanged()" ng-model-options="{ debounce: 500 }" type="range" min="0" max="1" step="0.01" ng-model="vm.component.preModulator.depth"> <div class="slider-with-value-value">{{vm.component.preModulator.depth | number:2}}</div> </div> <div class="slider-with-value"> <div class="slider-with-value-label">Freq. rate</div> <input class="slider-with-value-slider" ng-change="vm.componentChanged()" ng-model-options="{ debounce: 500 }" type="range" min="0.25" max="6" step="0.05" ng-model="vm.component.preModulator.freq"> <div class="slider-with-value-value">{{vm.component.preModulator.freq | number:2}}</div> </div> </div> </div> </div>'),a.put("scripts/oscillator/oscillator-snap.html",'<div class="oscillator-snap-info"> <div class="oscillator-snap-info-first-note" style="width: {{100*vm.componentInfo.snapDistance}}%"></div> <div class="oscillator-snap-info-middle" style="width: {{100*(1 - 2*vm.componentInfo.snapDistance)}}%; left: {{100*vm.componentInfo.snapDistance}}%"></div> <div class="oscillator-snap-info-second-note" style="width: {{100*vm.componentInfo.snapDistance}}%"></div> </div> <input class="oscillator-snap-range-picker" type="range" min="0" max="0.5" step="0.01" ng-model="vm.componentInfo.snapDistance" ng-model-options="{ debounce: 500 }" ng-change="vm.valueChanged()">'),a.put("scripts/oscillator/oscillator-wave-selector/oscillator-wave-selector.tpl.html",'<div class="oscillator-wave-selector"> <ul class="oscillator-wave-selector-column oscillator-wave-selector-real"> <li class="oscillator-wave-selector-item oscillator-wave-selector-real-item" ng-repeat="item in vm.realPeriodicTableValues track by $index"> <div class="oscillator-wave-selector-index">{{$index}}:</div> <div class="oscillator-wave-selector-value">{{item.value | number:2}}</div> <input class="oscillator-wave-selector-range" type="range" ng-model="item.value" min="0" max="1" step="0.01" ng-model-options="{ debounce: 500 }" ng-change="vm.realValueChanged($index)"> </li> </ul> <ul class="oscillator-wave-selector-column oscillator-wave-selector-imaginary"> <li class="oscillator-wave-selector-item oscillator-wave-selector-imaginary-item" ng-repeat="item in vm.imaginaryPeriodicTableValues track by $index"> <div class="oscillator-wave-selector-index">{{$index}}:</div> <div class="oscillator-wave-selector-value">{{item.value | number:2}}</div> <input class="oscillator-wave-selector-range" type="range" ng-model="item.value" min="0" max="1" step="0.01" ng-model-options="{ debounce: 500 }" ng-change="vm.imaginaryValueChanged($index)"> </li> </ul> </div>'),a.put("scripts/oscillator/oscillator.html",'<div class="oscillator"> <div class="component-title"> <h2 class="component-title-text">Oscillator</h2> <button class="button" ng-click="vm.removeOscillator(vm.oscillatorConfig)">Remove oscillator</button> </div> <div ng-if="!!vm.oscillatorConfig" class="row"> <div class="column"> <div class="oscillator-section"> <h4 class="oscillator-section-title">Oscillator type</h4> <div class="oscillator-section-content"> <select-box value="vm.oscillatorConfig.oscillatorType" value-list="vm.availableOscillators" change-callback="vm.notifyOscillatorOptionsChangedThrottled()"></select-box> </div> <oscillator-wave-selector ng-if="vm.oscillatorConfig.oscillatorType === &quot;custom&quot;" config="vm.oscillatorConfig" change-callback="vm.notifyOscillatorOptionsChangedThrottled()"></oscillator-wave-selector> </div> <div class="oscillator-section"> <h4 class="oscillator-section-title"> <div class="oscillator-section-title-full-left"> Freq Modulation </div> <custom-checkbox value="vm.oscillatorConfig.fm.enabled" change-callback="vm.fmToggle()"></custom-checkbox> </h4> <div class="oscillator-section-content" ng-show="vm.oscillatorConfig.fm.enabled"> <oscillator-fm component="vm.oscillatorConfig.fm" change-callback="vm.notifyOscillatorOptionsChangedThrottled()"></oscillator-fm> </div> </div> </div> <div class="column"> <div class="oscillator-section"> <div class="oscillator-section-title"> <h4 class="oscillator-section-title-full-left">Volume control</h4> <button class="button" ng-click="vm.toggleGainControl()"> <span ng-show="vm.oscillatorConfig.controls.gain.enabled">Disable</span> <span ng-show="!vm.oscillatorConfig.controls.gain.enabled">Enable</span> gesture control </button> </div> <div class="oscillator-section-content" ng-show="vm.oscillatorConfig.controls.gain.enabled"> <gesture-selector gesture-object="vm.oscillatorConfig.controls.gain" change-callback="vm.gainControllerInfoChanged()"></gesture-selector> </div> <div class="oscillator-section-content" ng-show="!vm.oscillatorConfig.controls.gain.enabled"> <div class="slider-with-value"> <input class="slider-with-value-slider" ng-change="vm.gainControllerInfoChanged()" ng-model-options="{ debounce: 500 }" type="range" min="0" max="1" step="0.01" ng-model="vm.oscillatorConfig.gain"> <div class="slider-with-value-value"> {{vm.oscillatorConfig.gain*100 | number:0}}% </div> </div> </div> </div> </div> </div> </div>'),a.put("scripts/part-synth-selector/part-synth-selector.tpl.html",'<select-box value="vm.selectedSynth" value-list="vm.synths" attr-to-show="name" change-callback="vm.selectedSynthChanged()"></select-box>'),a.put("scripts/select-box/select-box.html",'<div class="select-box"> <a class="select-box-value" ng-click="vm.toggleList()">{{vm.value[vm.attrToShow] || vm.value}}</a> <button class="select-box-value-toggle" ng-click="vm.toggleList()"></button> <ul class="select-box-list" ng-show="vm.listExpanded"> <li class="select-box-list-item" ng-repeat="eachValue in vm.valueList"> <a class="select-box-list-link" ng-click="vm.selectValue(eachValue)">{{eachValue[vm.attrToShow] || eachValue}}</a> </li> </ul> </div>'),a.put("scripts/song-scale-creator/song-scale-creator.tpl.html",'<div class="song-scale-creator" ng-if="vm.songScaleCreator.isShown()"> <div class="song-scale-creator-backdrop" ng-click="vm.close()"></div> <div class="song-scale-creator-content"> <h1 class="generic-main-title">Song scale creator</h1> <div class="generic-section"> <h3 class="generic-section-title"> Scale key </h3> <div class="generic-section-content"> <switch-two-values values="vm.startingNotes" ng-model="vm.startingNote"></switch-two-values> </div> </div> <div class="generic-section"> <h3 class="generic-section-title"> Scale mood </h3> <div class="generic-section-content"> <switch-two-values values="vm.scales" ng-model="vm.scale"></switch-two-values> </div> </div> <div class="generic-section"> <h3 class="generic-section-title"> Repetitions </h3> <div class="generic-section-content"> <switch-two-values values="vm.repetitionsValues" ng-model="vm.repetitions"></switch-two-values> </div> </div> <div class="align-center"> <button class="button generic-cancel-button" ng-click="vm.close()">Cancel</button> <button class="button generic-save-button" ng-click="vm.save()">Save</button> </div> </div> </div>'),a.put("scripts/song-selector/song-editor/song-editor.tpl.html",'<div class="song-editor"> <div class="song-editor-content"> <div class="song-editor-tools"> <button class="big-button song-editor-save" ng-click="vm.saveSongToFile()" ng-if="vm.fileSaver.isAvailable()"> Save to file </button> <file-loader on-load="vm.songLoaded"></file-loader> <button class="big-button song-editor-save" ng-click="vm.saveSong()" ng-disabled="!vm.song.$isModified"> Save </button> <button class="big-button song-editor-delete" ng-click="vm.askConfirmationDeleteSong()" ng-show="!vm.confirmingDeleteSong"> Delete song </button> <div class="song-editor-delete-confirm" ng-show="vm.confirmingDeleteSong"> Are you sure you want to delete this song? <button class="big button" ng-click="vm.deleteSong()">Delete!</button> <button class="big button" ng-click="vm.cancelDeleteSong()">Cancel</button> </div> </div> <div class="generic-section"> <h3 class="generic-section-title"> Song name </h3> <div class="generic-section-content"> <input type="text" class="song-editor-song-name" stop-key-events ng-model="vm.song.name" ng-model-options="{ debounce: 500 }" ng-change="vm.songNameChanged()"> </div> </div> <div class="generic-section"> <h3 class="generic-section-title"> Parts </h3> </div> <song-parts-list-editor song="vm.song"></song-parts-list-editor> <song-part-editor></song-part-editor> </div> </div>'),a.put("scripts/song-selector/song-list/song-list.tpl.html",'<ul class="config-menu-list"> <li class="config-menu-list-item" ng-repeat="song in vm.songs"> <a class="config-menu-list-item-link" ng-click="vm.selectSong(song)" ng-class="{&quot;selected&quot;: vm.selectedSong.name === song.name}">{{song.name}}</a> </li> </ul>'),
a.put("scripts/song-selector/song-part-editor/song-part-editor.tpl.html",'<div class="generic-section"> <h3 class="generic-section-title"> {{vm.currentPart.name}} </h3> <div class="generic-section-content"> <input type="text" stop-key-events ng-model="vm.currentPart.name" ng-model-options="{ debounce: 500 }" ng-change="vm.partNameChanged()"> <button class="button" ng-show="!vm.confirmingDelete && (vm.currentSong.parts.length > 1)" ng-click="vm.confirmingDelete = true">Remove part</button> <div ng-show="vm.confirmingDelete  && (vm.currentSong.parts.length > 1)"> Do you really want to delete it? <button class="button" ng-click="vm.confirmingDelete = false">Cancel</button> <button class="button" ng-click="vm.deletePart()">Delete!</button> </div> <button class="button" ng-show="!vm.confirmingDelete" ng-click="vm.duplicatePart()">Duplicate part</button> <part-synth-selector part="vm.currentPart"></part-synth-selector> <div class="song-editor-chords"> <div class="song-editor-chord-container" ng-repeat="chord in vm.currentPart.chords"> <button class="song-editor-add-chord" ng-click="vm.addChordBefore($index)">+ <span class="song-editor-add-chord-popover">Add chord</span> </button> <div class="song-editor-chord" ng-click="vm.editChord($index, vm.currentPart.chords)"> <div class="song-editor-chord-name" ng-class="{&quot;is-chord-in-second-row&quot;: vm.isChordInSecondRow($index)}"> {{vm.getChordName(chord)}} </div> <div class="song-editor-chord-tools"> <button class="big-button song-editor-pick-chord" ng-click="vm.pickChord($index, vm.currentPart.chords); $event.stopPropagation();">Pick chord</button> <button class="big-button song-editor-edit-chord" ng-click="vm.editChord($index, vm.currentPart.chords); $event.stopPropagation();">Edit chord</button> <button class="big-button song-editor-remove-chord" ng-click="vm.removeChord($index); $event.stopPropagation();">Remove chord</button> </div> </div> </div> <button class="song-editor-add-chord song-editor-add-chord-last" ng-click="vm.addChordLast()"> + <span class="song-editor-add-chord-popover">Add chord</span> </button> </div> <div class="generic-section-content song-editor-song-from-scale"> <button class="big-button song-editor-song-from-scale-button" ng-click="vm.createPartFromScale()"> Create part from scale </button> </div> </div> </div>'),a.put("scripts/song-selector/song-parts-list-editor/song-parts-list-editor.tpl.html",'<div class="song-parts-list-editor"> <div ng-repeat="part in vm.song.parts" class="song-parts-list-editor-item-container" drop="vm.onDrop($data, $event, $index)" drop-effect="copy" drop-accept="\'json/song-part-editor\'" drag-over-class="drag-over-accept"> <button class="song-parts-list-editor-item" ng-class="{\n                 &quot;is-active&quot;: vm.song.currentPart === part.index\n             }" ng-click="vm.setCurrentPart(part)" draggable="true" effect-allowed="copy" draggable-type="song-part-editor" draggable-data="{partIndex: part.index}"> <span class="song-parts-list-editor-item-number" ng-bind="part.index + 1"></span> {{part.name}} </button> </div> <div class="song-parts-list-editor-item-container" drop="vm.onDrop($data, $event, vm.song.parts.length)" drop-effect="copy" drop-accept="\'json/song-part-editor\'" drag-over-class="drag-over-accept"> <button class="song-parts-list-editor-item" ng-click="vm.addPart()"> + Add part </button> </div> </div>'),a.put("scripts/song-selector/song-parts-list-hud/song-parts-list-hud.tpl.html",'<div class="song-parts-list-hud"> <div class="song-parts-list-hud-item-container" ng-repeat="part in vm.song.parts" drop="vm.onDrop($data, $event, $index)" drop-effect="copy" drop-accept="\'json/song-part-hud\'" drag-over-class="drag-over-accept"> <button class="song-parts-list-editor-item" draggable="true" effect-allowed="copy" draggable-type="song-part-hud" draggable-data="{partIndex: part.index}" ng-class="{\n                 &quot;is-active&quot;: vm.song.currentPart === part.index\n             }" ng-click="vm.setCurrentPart(part)"> <span class="song-parts-list-editor-item-number" ng-bind="part.index + 1"></span> {{part.name}} </button> </div> <div class="song-parts-list-hud-item-container song-parts-list-hud-item-container-empty" drop="vm.onDrop($data, $event, vm.song.parts.length)" drop-effect="copy" drop-accept="\'json/song-part-hud\'" drag-over-class="drag-over-accept"></div> </div> <!-- drag-over=\'onDragOver($event)\' -->'),a.put("scripts/song-selector/song-selector.tpl.html",'<div class="main-selector song-selector" ng-class="{&quot;is-main-editor-open&quot;: vm.songEditorShown}"> <div class="config-menu-header" ng-if="vm.loadingFirstSong"> <button class="big-button config-menu-title">Loading...</button> </div> <div class="config-menu-header" ng-if="!vm.loadingFirstSong"> <button class="big-button config-menu-button config-menu-prev" ng-click="vm.goToPrevSong()" ng-disabled="!vm.songs || (vm.indexOfSelectedSong <= 0)"></button> <button class="big-button config-menu-title" ng-click="vm.toggleSongList()"> {{vm.currentSong.name || \'No name\'}} <span ng-show="vm.currentSong.$isModified">(*)</span> </button> <button class="big-button config-menu-button config-menu-next" ng-click="vm.goToNextSong()" ng-disabled="!vm.songs || (vm.indexOfSelectedSong >= (vm.songs.length - 1)) "></button> <button class="big-button config-menu-button config-menu-config" ng-click="vm.toggleSongEditor()"></button> <song-list ng-show="vm.showSongList" ng-click="vm.toggleSongList()" songs="vm.songs" selected-song="vm.currentSong"></song-list> </div> <song-editor song="vm.currentSong" ng-show="vm.songEditorShown"></song-editor> <chord-editor></chord-editor> <chord-selector></chord-selector> <song-parts-list-hud song="vm.currentSong" ng-show="!vm.songEditorShown && !vm.showSongList"></song-parts-list-hud> </div>'),a.put("scripts/sound-generator/sound-generator.html",'<div class="soundgenerator"> <ul> <li class="soundgenerator-chord" ng-repeat="note in notesInfo"> {{note.freqToPlay | number:2 }}Hz | {{note.gain | number:2 }} </li> </ul> </div>'),a.put("scripts/sound-muter/sound-muter.tpl.html",'<div class="sound-muter" ng-show="vm.soundMuter.isMuted()"> <div class="sound-muter-content" ng-show="vm.soundMuter.getMuteType() === &quot;space&quot;"> Sound muted, press SPACE to unmute </div> <div class="sound-muter-content" ng-show="vm.soundMuter.getMuteType() === &quot;noHands&quot;"> Place a hand to start playing </div> <div class="sound-muter-content" ng-show="vm.soundMuter.getMuteType() === &quot;fist&quot;"> Open your hand to keep playing </div> </div>'),a.put("scripts/switch-two-values/switch-two-values.html",'<ul class="switch-two-values"> <li class="switch-two-values-item" ng-repeat="value in vm.values" ng-class="{ &quot;selected&quot;: (value.value === vm.bindModel)}" ng-click="vm.selectValue(value.value)"> {{value.name}} </li> </ul>'),a.put("scripts/synth-options/components-list/components-list.tpl.html",'<ul class="components-selector-list"> <li class="component-selector-icon component-selector-icon-start"></li> <li class="component-selector" ng-class="{\n            &quot;is-active&quot;: !vm.componentsList.getActiveItem()\n        }"> <button class="component-selector-button" ng-click="vm.componentsList.setActiveItem(null)">Main settings</button> </li> <li class="component-selector-stack"> <div class="component-selector-vertical-merge component-selector-vertical-merge-start"></div> <ul class="component-selector-vertical-stack"> <li class="component-selector-vertical-stack-item" ng-repeat="component in vm.audioSynthOptions.oscillators"> <sound-source-selector component="component"></sound-source-selector> </li> <li ng-repeat="component in vm.audioSynthOptions.noises"> <sound-source-selector component="component"></sound-source-selector> </li> </ul> <div class="component-selector-vertical-merge component-selector-vertical-merge-end" drop="vm.componentDroppedOverMerger($data)" drop-effect="copy" drop-accept="\'json/component\'" drag-over-class="drag-over-accept"></div> </li> <li class="component-selector" ng-repeat="component in vm.components" ng-class="{\n            &quot;is-active&quot;: (vm.componentsList.getActiveItem() === component)\n        }" draggable="true" effect-allowed="copy" draggable-type="component" draggable-data="{componentInfo: component}" drop="vm.componentDroppedOverComponent($data, $event, component)" drop-effect="copy" drop-accept="\'json/component\'" drag-over-class="drag-over-accept"> <button class="component-selector-button" ng-click="vm.componentsList.setActiveItem(component)">{{component.name}}</button> <custom-checkbox class="component-selector-toggle" value="component.enabled" change-callback="vm.componentToggled(component)"></custom-checkbox> </li> <li class="component-selector-icon component-selector-icon-end"></li> </ul>'),a.put("scripts/synth-options/control.html",'<div class="control"> <div class="control-title"> <div class="control-title-text"> Parameter: </div> <div class="control-title-select"> <select-box value="currentControlMessage" value-list="midiControlMessages" attr-to-show="name"></select-box> </div> </div> <div class="control-content"> <gesture-selector gesture-object="controlInfo"></gesture-selector> </div> <div class="control-remove"> <button class="button" ng-click="pingControl()">Ping control</button> <button class="button" ng-click="removeControl()">Remove control</button> </div> </div>'),a.put("scripts/synth-options/midi-output-selector/midi-output-selector.html",'<select-box value="selectedMidiOutput" value-list="midiOutputs" attr-to-show="name"></select-box>'),a.put("scripts/synth-options/oscillator-audio-options/oscillator-audio-options.tpl.html",'<div class="component-title"> <h2 class="component-title-text">Main settings</h2> </div> <div class="oscillator-section"> <h4 class="oscillator-section-title">Volume control</h4> <div class="oscillator-section-content"> <gesture-selector gesture-object="vm.mainVolumeInfo" change-callback="vm.mainParamsInSynthChanged()"></gesture-selector> </div> </div> <div class="row"> <div class="column"> <div class="oscillator-snap oscillator-section"> <h4 class="oscillator-section-title">Snap to chords</h4> <div class="oscillator-section-content"> <oscillator-snap component-info="vm.synthOptions" change-callback="vm.mainParamsInSynthChanged()"></oscillator-snap> </div> </div> </div> <div class="column"> <div class="oscillator-transition oscillator-section column" ng-hide="vm.synthOptions.isMidiOutput()"> <h4 class="oscillator-section-title">Transition between chords</h4> <div class="oscillator-section-content"> <switch-two-values values="vm.transitionTypes" ng-model="vm.synthOptions.transitionType" change-callback="vm.mainParamsInSynthChanged()"></switch-two-values> </div> </div> </div> </div>'),a.put("scripts/synth-options/sound-source-selector/sound-source-selector.tpl.html",'<ul class="components-selector-list sound-source-components-selector-list"> <li class="component-selector" ng-class="{\n            &quot;is-active&quot;: (vm.componentsList.getActiveItem() === vm.component)\n        }" drop="vm.componentDroppedOverComponent($data, $event, vm.component)" drop-effect="copy" drop-accept="\'json/component\'" drag-over-class="drag-over-accept"> <button class="component-selector-button" ng-click="vm.componentsList.setActiveItem(vm.component)">{{vm.component.name}}</button> <custom-checkbox class="component-selector-toggle" value="vm.component.enabled" change-callback="vm.componentToggled(vm.component)"></custom-checkbox> </li> <li class="component-selector" ng-repeat="subComponent in vm.component.components" ng-class="{\n            &quot;is-active&quot;: (vm.componentsList.getActiveItem() === subComponent)\n        }" draggable="true" effect-allowed="copy" draggable-type="component" draggable-data="{\n            componentInfo: subComponent\n        }" drop="vm.componentDroppedOverSubComponent($data, vm.component, subComponent)" drop-effect="copy" drop-accept="\'json/component\'" drag-over-class="drag-over-accept"> <button class="component-selector-button" ng-click="vm.componentsList.setActiveItem(subComponent)">{{subComponent.name}}</button> <custom-checkbox class="component-selector-toggle" value="subComponent.enabled" change-callback="vm.componentToggled(subComponent)"></custom-checkbox> </li> </ul>'),a.put("scripts/synth-options/synthoptions-audio/synthoptions-audio.tpl.html",'<div class="synthoptions-audio"> <components-list></components-list> <div class="line-right"> <div class="dropdown-menu"> <div class="dropdown-menu-toggle">Add component</div> <div class="dropdown-menu-content"> <button class="dropdown-menu-item" ng-click="vm.addOscillator()"> Add oscillator </button> <button class="dropdown-menu-item" ng-click="vm.addNoise()"> Add noise </button> <button class="dropdown-menu-item" ng-repeat="component in vm.availableComponents" ng-click="vm.addComponent(component)"> Add {{component.name}} </button> </div> </div> </div> <div class="components-container"> <div class="component"> <oscillator-audio-options class="component" ng-show="!vm.componentsList.getActiveItem()"> </oscillator-audio-options> </div> <div class="component" ng-repeat="component in vm.components" ng-show="vm.componentsList.getActiveItem() === component"> <synthcomponent component-info="component"></synthcomponent> </div> <div class="component" ng-repeat="oscillator in vm.audioSynthOptions.oscillators" ng-show="vm.componentsList.getActiveItem() === oscillator"> <oscillator oscillator-config="oscillator"></oscillator> </div> <div ng-repeat="oscillator in vm.audioSynthOptions.oscillators"> <div class="component" ng-repeat="component in oscillator.components" ng-show="vm.componentsList.getActiveItem() === component"> <synthcomponent component-info="component"></synthcomponent> </div> </div> <div class="component" ng-repeat="noise in vm.audioSynthOptions.noises" ng-show="vm.componentsList.getActiveItem() === noise"> <noise-generator noise-config="noise"></noise-generator> </div> <div ng-repeat="noise in vm.audioSynthOptions.noises" class="component-container"> <div class="component" ng-repeat="component in noise.components" ng-show="vm.componentsList.getActiveItem() === component"> <synthcomponent component-info="component"></synthcomponent> </div> </div> </div> </div>'),a.put("scripts/synth-options/synthoptions-midi/synthoptions-midi.tpl.html","<div class=\"component\"> <!-- TODO add basic stuff, snamp and all that --> <!-- <div class='oscillator-section' ng-if='vm.synthOptions.isMidiOutput()'>\n                <h4 class='oscillator-section-title'>Output mode</h4>\n                <div class='oscillator-section-content'>\n                    <midi-output-selector></midi-output-selector>\n                </div>\n            </div> --> <!-- <ul>\n        <li ng-repeat='component in vm.synthoptions.getActiveComponents()'>\n            <synthcomponent component-info='component'></synthcomponent>\n        </li>\n"+'    </ul> --> <h2 class="synthoptions-content-column-title">Additional controls</h2> <ul class="synthoptions-midi-controls"> <li ng-repeat="control in vm.synthoptions.getActiveControls()" trackby> <control control-info="control"></control> </li> </ul> <div class="synthoptions-content-controls-add-control"> <button class="big-button" ng-click="vm.addControl()">Add control</button> </div> </div>'),a.put("scripts/synth-selector/add-synth/add-synth.tpl.html",'<div class="add-synth"> <div>New synth name:</div> <p> <input ng-model="vm.newSynthName"> </p> <button class="button big-button" ng-click="vm.createSynth()" ng-disabled="!vm.newSynthName">Create new synth</button> </div>'),a.put("scripts/synth-selector/delete-synth/delete-synth.tpl.html",'<button class="button" ng-click="vm.cancel()">Cancel</button> <button class="button" ng-click="vm.confirm()">Delete it</button>'),a.put("scripts/synth-selector/save-synth-as/save-synth-as.tpl.html",'<div class="save-synth-as"> <div>New name:</div> <p> <input ng-model="vm.newName"> </p> <button class="button big-button" ng-click="vm.saveSynthAs()" ng-disabled="!vm.newName">Save synth as</button> </div>'),a.put("scripts/synth-selector/synth-editor/synth-editor.tpl.html",'<div class="synthoptions-content-body"> <div class="line-right"> <div class="dropdown-menu"> <div class="dropdown-menu-toggle">Preset options</div> <div class="dropdown-menu-content"> <button class="dropdown-menu-item" ng-click="vm.createNewSynth()"> New synth... </button> <button class="dropdown-menu-item" ng-click="vm.saveSynth()" ng-disabled="!vm.synthHasBeenModified"> Save synth </button> <button class="dropdown-menu-item" ng-click="vm.saveSynthAs()"> Save synth as... </button> <button class="dropdown-menu-item" ng-click="vm.askConfirmationDeleteSynth()"> Delete synth... </button> <button class="dropdown-menu-item" ng-click="vm.saveSynthToFile()" ng-if="vm.fileSaver.isAvailable()"> Save synth to file </button> <file-loader class="dropdown-menu-item" on-load="vm.synthLoaded">Load synth from file</file-loader> </div> </div> </div> <!-- <switch-two-values\n        class=\'synthoptions-tab-selector\'\n        values=\'vm.outputModes\'\n        ng-model=\'vm.synthOptions.outputMode\'\n        change-callback=\'vm.outputModeChanged()\'></switch-two-values> --> <!--     \n        <synthoptions-midi synthoptions=\'vm.synthOptions\' ng-if=\'vm.synthOptions.isMidiOutput()\' ></synthoptions-midi>\n --> <div class="synthoptions-tab-inner"> <synthoptions-audio synthoptions="vm.synthOptions" ng-if="vm.synthOptions.isAudioOutput()"></synthoptions-audio> </div> </div>'),a.put("scripts/synth-selector/synth-list/synth-list.tpl.html",'<ul class="config-menu-list"> <li class="config-menu-list-item" ng-repeat="synth in vm.synths"> <a class="config-menu-list-item-link" ng-click="vm.selectSynth(synth)" ng-class="{&quot;selected&quot;: vm.selectedSynth.name === synth.name}">{{synth.name}}</a> </li> </ul>'),a.put("scripts/synth-selector/synth-selector.tpl.html",'<div class="main-selector synth-selector" ng-class="{&quot;is-main-editor-open&quot;: vm.synthEditorShown}"> <div class="config-menu-header" ng-if="vm.loadingFirstSynth"> <button class="big-button config-menu-title">Loading...</button> </div> <div class="config-menu-header" ng-if="!vm.loadingFirstSynth"> <button class="big-button config-menu-button config-menu-prev" ng-click="vm.goToPrevSynth()" ng-disabled="!vm.synths || (vm.indexOfSelectedSynth <= 0)"></button> <button class="big-button config-menu-title" ng-click="vm.toggleSynthList()"> {{vm.currentSynth.name || \'No name\'}} <span ng-show="vm.synthHasBeenModified">(*)</span> </button> <button class="big-button config-menu-button config-menu-next" ng-click="vm.goToNextSynth()" ng-disabled="!vm.synths || (vm.indexOfSelectedSynth >= (vm.synths.length - 1)) "></button> <button class="big-button config-menu-button config-menu-config" ng-click="vm.toggleSynthEditor()"></button> <synth-list ng-show="vm.showSynthList" ng-click="vm.toggleSynthList()" synths="vm.synths" selected-synths="vm.currentSynth"></synth-list> </div> <synth-editor synth-options="vm.currentSynth" ng-show="vm.synthEditorShown"></synth-editor> </div>'),a.put("scripts/tremolo/tremolo.tpl.html",'<div class="component-title"> <h2 class="component-title-text">Tremolo</h2> <button class="button" ng-click="vm.removeComponent()">Remove tremolo</button> </div> <div class="tremolo row"> <div class="column"> <div class="oscillator-section"> <h4 class="oscillator-section-title">Oscillator type</h4> <div class="oscillator-section-content"> <select-box value="vm.componentInfo.oscillatorType" value-list="vm.availableOscillators" change-callback="vm.notifyOptionsChangedThrottled()"></select-box> </div> </div> <div class="oscillator-section"> <h4 class="oscillator-section-title"> <div class="oscillator-section-title-full-left"> Depth </div> <button class="button" ng-click="vm.toggleDepth()"> <span ng-show="vm.componentInfo.controls.depth.enabled">Disable</span> <span ng-show="!vm.componentInfo.controls.depth.enabled">Enable</span> gesture control </button> </h4> <div class="oscillator-section-content" ng-show="vm.componentInfo.controls.depth.enabled"> <gesture-selector gesture-object="vm.componentInfo.controls.depth" change-callback="vm.notifyOptionsChangedThrottled()"></gesture-selector> </div> <div class="oscillator-section-content" ng-show="!vm.componentInfo.controls.depth.enabled"> <div class="slider-with-value"> <input class="slider-with-value-slider" ng-change="vm.notifyOptionsChangedThrottled()" ng-model-options="{ debounce: 500 }" type="range" min="0" max="1" step="0.01" ng-model="vm.componentInfo.depth"> <div class="slider-with-value-value"> {{vm.componentInfo.depth*100 | number:0}} % </div> </div> </div> </div> </div> <div class="column"> <div class="oscillator-section"> <h4 class="oscillator-section-title"> <div class="oscillator-section-title-full-left"> Frequency </div> <button class="button" ng-click="vm.toggleRate()"> <span ng-show="vm.componentInfo.controls.rate.enabled">Disable</span> <span ng-show="!vm.componentInfo.controls.rate.enabled">Enable</span> gesture control </button> </h4> <div class="oscillator-section-content" ng-show="vm.componentInfo.controls.rate.enabled"> <div class="slider-with-value"> <div class="slider-with-value-label">Min</div> <input class="slider-with-value-slider" ng-change="vm.notifyOptionsChangedThrottled()" ng-model-options="{ debounce: 500 }" type="range" min="{{vm.componentInfo.DEFAULT_MIN_RATE}}" max="{{vm.componentInfo.DEFAULT_MAX_RATE}}" step="0.1" ng-model="vm.componentInfo.minRate"> <div class="slider-with-value-value"> <div>{{vm.componentInfo.minRate | toBpm}}</div> <div class="secondary-text">({{vm.componentInfo.minRate | toMs}})</div> </div> </div> <div class="slider-with-value"> <div class="slider-with-value-label">Max</div> <input class="slider-with-value-slider" ng-change="vm.notifyOptionsChangedThrottled()" ng-model-options="{ debounce: 500 }" type="range" min="{{vm.componentInfo.DEFAULT_MIN_RATE}}" max="{{vm.componentInfo.DEFAULT_MAX_RATE}}" step="0.1" ng-model="vm.componentInfo.maxRate"> <div class="slider-with-value-value"> <div>{{vm.componentInfo.maxRate | toBpm}}</div> <div class="secondary-text">({{vm.componentInfo.maxRate | toMs}})</div> </div> </div> <br><br> <gesture-selector gesture-object="vm.componentInfo.controls.rate" change-callback="vm.notifyOptionsChangedThrottled()"></gesture-selector> </div> <div class="oscillator-section-content" ng-show="!vm.componentInfo.controls.rate.enabled"> <div class="slider-with-value"> <input class="slider-with-value-slider" ng-change="vm.notifyOptionsChangedThrottled()" ng-model-options="{ debounce: 500 }" type="range" min="{{vm.componentInfo.DEFAULT_MIN_RATE}}" max="{{vm.componentInfo.DEFAULT_MAX_RATE}}" step="0.1" ng-model="vm.componentInfo.rate"> <div class="slider-with-value-value"> <div>{{vm.componentInfo.rate | toBpm}}</div> <div class="secondary-text">({{vm.componentInfo.rate | toMs}})</div> </div> </div> </div> </div> </div> </div>')}]);